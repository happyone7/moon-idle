<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MOON IDLE — 생산 허브 v7a (Graphic Idle)</title>
<link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">
<style>
/* =============================================
   RESET & BASE
============================================= */
*, *::before, *::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

:root {
  --bg:          #010800;
  --panel-bg:    #020d04;
  --green:       #00e676;
  --green-dim:   #1a5c34;
  --green-mid:   #00994d;
  --amber:       #ffab00;
  --red:         #ff1744;
  --cyan:        #00e5ff;
  --cyan-dim:    #006070;
  --amber-dim:   #5c3d00;
  --red-dim:     #5c0011;
  --locked-fg:   #1a3020;
  --locked-bg:   #010b03;
  --font:        'Share Tech Mono', monospace;
  --border:      1px solid #1a5c34;
  --glow:        0 0 6px #00e67680;
  --glow-strong: 0 0 12px #00e676, 0 0 24px #00e67650;
  --glow-amber:  0 0 8px #ffab0080;
  --glow-cyan:   0 0 8px #00e5ff60;
}

html, body {
  width: 100%;
  height: 100%;
  background: var(--bg);
  color: var(--green);
  font-family: var(--font);
  font-size: 11px;
  line-height: 1.4;
  overflow: hidden;
}

/* =============================================
   CRT OVERLAYS
============================================= */
body::before {
  content: '';
  position: fixed;
  inset: 0;
  background: repeating-linear-gradient(
    0deg,
    transparent,
    transparent 2px,
    rgba(0,0,0,0.13) 2px,
    rgba(0,0,0,0.13) 4px
  );
  pointer-events: none;
  z-index: 9999;
}

body::after {
  content: '';
  position: fixed;
  inset: 0;
  background: radial-gradient(ellipse at center, transparent 52%, rgba(0,0,0,0.82) 100%);
  pointer-events: none;
  z-index: 9998;
}

@keyframes crt-flicker {
  0%   { opacity: 1; }
  92%  { opacity: 1; }
  93%  { opacity: 0.91; }
  94%  { opacity: 1; }
  97%  { opacity: 1; }
  98%  { opacity: 0.94; }
  100% { opacity: 1; }
}

/* =============================================
   LAYOUT SKELETON
============================================= */
.app {
  display: flex;
  flex-direction: column;
  width: 100%;
  height: 100%;
  animation: crt-flicker 8s infinite;
}

/* TOP BAR */
.topbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 14px;
  height: 34px;
  min-height: 34px;
  border-bottom: 1px solid var(--green-dim);
  background: var(--panel-bg);
  letter-spacing: 0.05em;
  flex-shrink: 0;
}

.topbar-title {
  color: var(--green);
  font-size: 13px;
  text-shadow: var(--glow);
}

.topbar-title span {
  color: var(--amber);
}

.topbar-center {
  color: var(--green-dim);
  font-size: 12px;
}

.topbar-right {
  display: flex;
  gap: 18px;
  font-size: 11px;
  color: var(--green-mid);
}

.topbar-right .ok   { color: var(--green); }
.topbar-right .warn { color: var(--amber); }

/* MAIN CONTENT */
.main {
  display: flex;
  flex: 1;
  overflow: hidden;
  gap: 0;
}

/* =============================================
   LEFT PANEL — Resource Dashboard
============================================= */
.panel-left {
  width: 25%;
  min-width: 200px;
  max-width: 280px;
  display: flex;
  flex-direction: column;
  border-right: 1px solid var(--green-dim);
  background: var(--panel-bg);
  overflow-y: auto;
  overflow-x: hidden;
  padding: 8px 0 0;
}

.panel-left::-webkit-scrollbar { width: 4px; }
.panel-left::-webkit-scrollbar-track { background: var(--bg); }
.panel-left::-webkit-scrollbar-thumb { background: var(--green-dim); }

.panel-label {
  font-size: 10px;
  letter-spacing: 0.12em;
  color: var(--green-dim);
  padding: 0 10px 4px;
  border-bottom: 1px solid var(--green-dim);
  margin-bottom: 6px;
}

/* Resource Tier Block */
.tier-block {
  margin: 0 8px 8px;
  border: 1px solid;
  padding: 6px 8px;
}

.tier-block.t1 { border-color: var(--green-dim); }
.tier-block.t2 { border-color: var(--amber-dim); }
.tier-block.t3 { border-color: var(--cyan-dim); }
.tier-block.t4 { border-color: var(--red-dim); }

.tier-header {
  font-size: 10px;
  letter-spacing: 0.1em;
  margin-bottom: 5px;
}

.tier-block.t1 .tier-header { color: var(--green); }
.tier-block.t2 .tier-header { color: var(--amber); }
.tier-block.t3 .tier-header { color: var(--cyan); }
.tier-block.t4 .tier-header { color: var(--red); }

.res-row {
  display: flex;
  align-items: center;
  gap: 5px;
  margin-bottom: 4px;
}

.res-name {
  width: 75px;
  font-size: 10px;
  color: #88aa88;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.res-bar-bg {
  flex: 1;
  height: 5px;
  background: #020d04;
  border: 1px solid #0d3020;
  position: relative;
  overflow: hidden;
}

.res-bar-fill {
  height: 100%;
  position: relative;
}

@keyframes bar-tick {
  0%   { width: var(--from); }
  100% { width: var(--to); }
}

.res-bar-fill.c-green  { background: var(--green); box-shadow: 0 0 4px #00e67660; }
.res-bar-fill.c-amber  { background: var(--amber); box-shadow: 0 0 4px #ffab0060; }
.res-bar-fill.c-cyan   { background: var(--cyan);  box-shadow: 0 0 4px #00e5ff50; }
.res-bar-fill.c-red    { background: var(--red);   box-shadow: 0 0 4px #ff174450; }

.res-val {
  width: 36px;
  font-size: 9px;
  text-align: right;
  white-space: nowrap;
}

.res-rate {
  font-size: 9px;
  color: var(--green-dim);
  width: 44px;
  text-align: right;
}

.tier-block.t1 .res-val { color: var(--green-mid); }
.tier-block.t2 .res-val { color: var(--amber); }
.tier-block.t3 .res-val { color: var(--cyan); }
.tier-block.t4 .res-val { color: var(--red); }

/* Efficiency bar at bottom of left panel */
.eff-block {
  margin: 4px 8px 8px;
  border: 1px solid var(--green-dim);
  padding: 6px 8px;
}

.eff-label {
  font-size: 10px;
  color: var(--green-dim);
  margin-bottom: 4px;
}

.eff-bar-bg {
  height: 8px;
  background: #010800;
  border: 1px solid var(--green-dim);
  overflow: hidden;
}

.eff-bar-fill {
  height: 100%;
  width: 73%;
  background: linear-gradient(90deg, var(--green-mid), var(--green));
  box-shadow: var(--glow);
  position: relative;
}

.eff-bar-fill::after {
  content: '';
  position: absolute;
  right: 0; top: 0; bottom: 0;
  width: 2px;
  background: #fff;
  opacity: 0.7;
  animation: eff-pulse 1.5s ease-in-out infinite;
}

@keyframes eff-pulse {
  0%, 100% { opacity: 0.3; }
  50% { opacity: 0.9; }
}

.eff-pct {
  font-size: 11px;
  color: var(--green);
  text-shadow: var(--glow);
  margin-top: 3px;
}

/* =============================================
   CENTER — WORLD VIEW
============================================= */
.panel-center {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  position: relative;
}

.world-label {
  font-size: 10px;
  letter-spacing: 0.12em;
  color: var(--green-dim);
  padding: 5px 12px;
  border-bottom: 1px solid var(--green-dim);
  background: var(--panel-bg);
  flex-shrink: 0;
}

.world-view {
  flex: 1;
  position: relative;
  overflow: hidden;
  background: linear-gradient(180deg, #000800 0%, #010d02 60%, #010800 100%);
}

/* Stars */
.stars {
  position: absolute;
  inset: 0;
  pointer-events: none;
}

.star {
  position: absolute;
  width: 1px;
  height: 1px;
  background: var(--green);
  opacity: 0.3;
  border-radius: 50%;
}

.star.bright {
  width: 2px;
  height: 2px;
  opacity: 0.5;
  box-shadow: 0 0 3px #00e676;
}

@keyframes star-twinkle {
  0%, 100% { opacity: 0.15; }
  50% { opacity: 0.55; }
}

/* Subtle horizon grid on ground */
.ground {
  position: absolute;
  bottom: 60px;
  left: 0;
  right: 0;
  height: 2px;
  background: var(--green-dim);
  box-shadow: 0 0 6px #00e67640;
  z-index: 2;
}

.ground-fill {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 60px;
  background: linear-gradient(180deg, #020d04 0%, #010800 100%);
  border-top: 1px solid var(--green-dim);
  z-index: 1;
}

/* Ground grid lines */
.ground-grid {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 60px;
  background-image:
    linear-gradient(90deg, #00e67610 1px, transparent 1px),
    linear-gradient(0deg, #00e67610 1px, transparent 1px);
  background-size: 40px 20px;
  z-index: 2;
  pointer-events: none;
}

/* =============================================
   BUILDINGS
============================================= */
.buildings {
  position: absolute;
  bottom: 61px;   /* sit on the ground line */
  left: 0;
  right: 0;
  height: calc(100% - 61px);
  display: flex;
  align-items: flex-end;
  padding: 0 16px;
  gap: 18px;
  z-index: 5;
}

.building-slot {
  display: flex;
  flex-direction: column;
  align-items: center;
  position: relative;
  flex-shrink: 0;
}

.building-label {
  font-size: 9px;
  color: var(--green-mid);
  margin-bottom: 4px;
  white-space: nowrap;
  letter-spacing: 0.05em;
  text-shadow: 0 0 4px #00e67670;
}

.building-label.locked-text {
  color: var(--locked-fg);
  text-shadow: none;
}

.building-status {
  font-size: 8px;
  color: var(--amber);
  margin-bottom: 2px;
  letter-spacing: 0.05em;
}

/* Generic building glow animation */
@keyframes building-glow {
  0%, 100% { box-shadow: 0 0 3px #00e67630; }
  50%       { box-shadow: 0 0 10px #00e676, 0 0 20px #00e67650; }
}

@keyframes building-glow-amber {
  0%, 100% { box-shadow: 0 0 3px #ffab0030; }
  50%       { box-shadow: 0 0 10px #ffab00, 0 0 20px #ffab0050; }
}

@keyframes building-glow-cyan {
  0%, 100% { box-shadow: 0 0 3px #00e5ff20; }
  50%       { box-shadow: 0 0 8px #00e5ff, 0 0 16px #00e5ff40; }
}

/* =============================================
   BUILDING 1 — 제련소 (Smelter)
============================================= */
.smelter-wrap {
  position: relative;
  display: flex;
  align-items: flex-end;
  gap: 4px;
}

.smelter-body {
  width: 44px;
  height: 90px;
  background: linear-gradient(180deg, #0a1f0a 0%, #020d04 100%);
  border: 1px solid var(--green-dim);
  border-bottom: none;
  position: relative;
  animation: building-glow 2.4s ease-in-out infinite;
}

.smelter-body::before {
  content: '';
  position: absolute;
  top: 12px; left: 6px; right: 6px; bottom: 16px;
  background: repeating-linear-gradient(
    0deg, transparent, transparent 6px,
    #00e67615 6px, #00e67615 7px
  );
}

/* window */
.smelter-window {
  position: absolute;
  bottom: 20px; left: 50%; transform: translateX(-50%);
  width: 16px; height: 10px;
  background: #001a08;
  border: 1px solid var(--green-mid);
  overflow: hidden;
}

@keyframes forge-glow {
  0%, 100% { background: #ff6600; opacity: 0.5; }
  50%       { background: #ff9900; opacity: 1; }
}

.smelter-window::after {
  content: '';
  position: absolute;
  inset: 0;
  background: #ff6600;
  animation: forge-glow 0.8s ease-in-out infinite;
}

/* chimney */
.smelter-chimney {
  position: absolute;
  top: -24px; right: 8px;
  width: 8px;
  height: 26px;
  background: #0a1a0a;
  border: 1px solid var(--green-dim);
  border-bottom: none;
}

/* Smoke puffs */
.smoke-container {
  position: absolute;
  top: -60px;
  right: 6px;
  width: 24px;
  height: 60px;
  pointer-events: none;
  overflow: visible;
}

.smoke-puff {
  position: absolute;
  border-radius: 50%;
  background: radial-gradient(circle, #1a3320 0%, transparent 70%);
  animation: smoke-rise linear infinite;
  opacity: 0;
}

.smoke-puff:nth-child(1) { width: 14px; height: 14px; left: 4px; animation-duration: 3s; animation-delay: 0s; }
.smoke-puff:nth-child(2) { width: 18px; height: 18px; left: 0px; animation-duration: 3.5s; animation-delay: 0.8s; }
.smoke-puff:nth-child(3) { width: 12px; height: 12px; left: 6px; animation-duration: 3.2s; animation-delay: 1.6s; }
.smoke-puff:nth-child(4) { width: 16px; height: 16px; left: 2px; animation-duration: 3.8s; animation-delay: 2.4s; }

@keyframes smoke-rise {
  0%   { bottom: 0; opacity: 0;    transform: translateX(0) scale(0.5); }
  15%  { opacity: 0.7; }
  80%  { opacity: 0.3; }
  100% { bottom: 70px; opacity: 0; transform: translateX(8px) scale(2); }
}

/* =============================================
   BUILDING 2 — 합금 제조공장 (Alloy Plant)
============================================= */
.alloy-body {
  width: 62px;
  height: 72px;
  background: linear-gradient(180deg, #0d1a08 0%, #020d04 100%);
  border: 1px solid var(--green-dim);
  border-bottom: none;
  position: relative;
  animation: building-glow-amber 3s ease-in-out infinite;
}

/* roof detail */
.alloy-body::before {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 8px;
  background: #1a3310;
  border-bottom: 1px solid var(--amber-dim);
}

.alloy-window {
  position: absolute;
  top: 16px; left: 8px; right: 8px; height: 20px;
  background: #010800;
  border: 1px solid var(--amber-dim);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 9px;
  color: var(--amber);
  letter-spacing: 0;
}

/* Conveyor belt on side */
.alloy-conveyor {
  position: absolute;
  bottom: 10px; left: 0; right: 0;
  height: 6px;
  background: #020d04;
  border-top: 1px solid var(--amber-dim);
  overflow: hidden;
}

@keyframes conveyor-move {
  from { background-position: 0 0; }
  to   { background-position: 20px 0; }
}

.alloy-conveyor::after {
  content: '';
  position: absolute;
  inset: 0;
  background-image: repeating-linear-gradient(
    90deg,
    transparent 0px, transparent 8px,
    var(--amber-dim) 8px, var(--amber-dim) 10px
  );
  animation: conveyor-move 0.6s linear infinite;
}

/* =============================================
   BUILDING 3 — CFRP 압출 시설
============================================= */
.cfrp-body {
  width: 36px;
  height: 110px;
  background: linear-gradient(180deg, #001a1a 0%, #020d04 100%);
  border: 1px solid var(--cyan-dim);
  border-bottom: none;
  position: relative;
  animation: building-glow-cyan 2.8s ease-in-out infinite;
}

.cfrp-body::before {
  content: '';
  position: absolute;
  inset: 0;
  background: repeating-linear-gradient(
    0deg, transparent, transparent 10px,
    #00e5ff18 10px, #00e5ff18 11px
  );
}

.cfrp-top {
  position: absolute;
  top: -10px; left: 50%; transform: translateX(-50%);
  width: 18px; height: 12px;
  background: #001020;
  border: 1px solid var(--cyan-dim);
  border-bottom: none;
}

.cfrp-light {
  position: absolute;
  top: 18px; left: 50%; transform: translateX(-50%);
  width: 6px; height: 6px;
  border-radius: 50%;
  background: var(--cyan);
  box-shadow: 0 0 8px var(--cyan);
  animation: cfrp-blink 1.2s ease-in-out infinite;
}

@keyframes cfrp-blink {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.2; }
}

/* =============================================
   BUILDING 4 — 추진제 저장 탱크 (Propellant Tanks)
============================================= */
.tanks-wrap {
  display: flex;
  align-items: flex-end;
  gap: 5px;
}

.tank {
  width: 28px;
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.tank-top {
  width: 28px;
  height: 14px;
  border-radius: 50% 50% 0 0;
  border: 1px solid;
  border-bottom: none;
  position: relative;
  overflow: hidden;
}

.tank-top::after {
  content: '';
  position: absolute;
  top: 4px; left: 4px; right: 4px;
  height: 4px;
  border-radius: 50%;
  opacity: 0.4;
}

.tank.lox .tank-top {
  background: linear-gradient(180deg, #003050 0%, #001a30 100%);
  border-color: #0070a0;
}
.tank.lox .tank-top::after { background: #00c0ff; }

.tank.rp1 .tank-top {
  background: linear-gradient(180deg, #301000 0%, #1a0800 100%);
  border-color: #803000;
}
.tank.rp1 .tank-top::after { background: #ff6010; }

.tank.gh2 .tank-top {
  background: linear-gradient(180deg, #102010 0%, #080f08 100%);
  border-color: var(--green-dim);
}
.tank.gh2 .tank-top::after { background: var(--green); }

.tank-body {
  width: 28px;
  border: 1px solid;
  border-top: none;
  position: relative;
  overflow: hidden;
}

.tank.lox .tank-body { height: 80px; background: linear-gradient(180deg, #001a30, #000c18); border-color: #0070a0; }
.tank.rp1 .tank-body { height: 70px; background: linear-gradient(180deg, #1a0800, #0d0400); border-color: #803000; }
.tank.gh2 .tank-body { height: 56px; background: linear-gradient(180deg, #081808, #010800); border-color: var(--green-dim); }

/* level fill inside tank */
.tank-fill {
  position: absolute;
  bottom: 0; left: 0; right: 0;
  opacity: 0.35;
  animation: tank-slosh 4s ease-in-out infinite;
}

.tank.lox .tank-fill { height: 55%; background: #0090c0; }
.tank.rp1 .tank-fill { height: 68%; background: #cc4400; }
.tank.gh2 .tank-fill { height: 40%; background: var(--green-mid); }

@keyframes tank-slosh {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-2px); }
}

/* Pipe connecting tanks to ground */
.tank-pipe {
  width: 4px;
  height: 12px;
  border-left: 1px solid;
  border-right: 1px solid;
  margin-bottom: 0;
}
.tank.lox .tank-pipe { border-color: #0070a0; }
.tank.rp1 .tank-pipe { border-color: #803000; }
.tank.gh2 .tank-pipe { border-color: var(--green-dim); }

.tank-label {
  font-size: 8px;
  margin-top: 2px;
  margin-bottom: 2px;
}

.tank.lox .tank-label { color: #00a0d0; }
.tank.rp1 .tank-label { color: #cc6020; }
.tank.gh2 .tank-label { color: var(--green-mid); }

/* LOX warning flash */
@keyframes lox-warn {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.3; }
}

.tank.lox .tank-label { animation: lox-warn 1.8s ease-in-out infinite; }

/* =============================================
   BUILDING 5 — 조립 공장 (Assembly Hall) — LARGEST
============================================= */
.assembly-wrap {
  display: flex;
  flex-direction: column;
  align-items: center;
}

.assembly-body {
  width: 90px;
  height: 120px;
  background: linear-gradient(180deg, #060f06 0%, #020d04 100%);
  border: 1px solid var(--green);
  border-bottom: none;
  position: relative;
  animation: building-glow 2s ease-in-out infinite;
}

/* Roof slant */
.assembly-roof {
  width: 0;
  height: 0;
  border-left: 45px solid transparent;
  border-right: 45px solid transparent;
  border-bottom: 18px solid #0a1f0a;
  position: absolute;
  top: -18px; left: 0;
}

.assembly-roof::after {
  content: '';
  position: absolute;
  top: 18px; left: -45px; right: -45px;
  height: 1px;
  background: var(--green);
  box-shadow: var(--glow);
}

/* Big door */
.assembly-door {
  position: absolute;
  bottom: 0; left: 50%; transform: translateX(-50%);
  width: 32px; height: 48px;
  background: #000d02;
  border: 1px solid var(--green-dim);
  border-bottom: none;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
}

/* ASCII rocket inside door */
.assembly-rocket {
  font-size: 9px;
  line-height: 1.1;
  color: var(--green-mid);
  text-align: center;
  letter-spacing: -1px;
  white-space: pre;
}

/* Side windows */
.assembly-windows {
  position: absolute;
  top: 20px; left: 8px; right: 8px;
  display: flex;
  justify-content: space-between;
}

.assembly-win {
  width: 12px; height: 8px;
  background: #001a08;
  border: 1px solid var(--green-dim);
  animation: win-flicker 4s ease-in-out infinite;
}

.assembly-win:nth-child(2) { animation-delay: 1.2s; }
.assembly-win:nth-child(3) { animation-delay: 2.4s; }

@keyframes win-flicker {
  0%, 85%, 100% { background: #001a08; }
  88% { background: #00e67630; }
  92% { background: #001a08; }
  95% { background: #00e67620; }
}

/* =============================================
   BUILDING 6 — 발사대 (Launch Pad) — far right
============================================= */
.launchpad-wrap {
  display: flex;
  flex-direction: column;
  align-items: center;
  position: relative;
}

/* Gantry tower */
.gantry {
  width: 6px;
  height: 130px;
  background: #0a1a0a;
  border: 1px solid var(--green-dim);
  border-bottom: none;
  position: relative;
}

/* Horizontal arms on gantry */
.gantry-arm {
  position: absolute;
  height: 1px;
  background: var(--green-dim);
  left: 5px;
}

.gantry-arm::after {
  content: '';
  position: absolute;
  top: -2px; right: 0;
  width: 3px; height: 5px;
  background: var(--green-dim);
}

/* Launch platform */
.launch-platform {
  width: 60px;
  height: 8px;
  background: #0d1f0d;
  border: 1px solid var(--green-mid);
  position: relative;
}

/* Exhaust vents */
.launch-vents {
  display: flex;
  justify-content: space-around;
  width: 60px;
}

.launch-vent {
  width: 10px;
  height: 6px;
  background: #010800;
  border: 1px solid var(--green-dim);
  border-top: none;
}

/* Rocket on pad (tiny) */
.pad-rocket {
  position: absolute;
  bottom: 8px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 8px;
  color: var(--green);
  white-space: pre;
  line-height: 1;
  text-shadow: 0 0 6px #00e676;
}

/* Gantry tower 2 (taller, right side) */
.gantry2 {
  width: 4px;
  height: 145px;
  background: #080f08;
  border: 1px solid #0d3020;
  border-bottom: none;
  position: absolute;
  right: 4px;
  bottom: 8px;
}

/* Connection cable between gantry arms */
.gantry-cable {
  position: absolute;
  height: 1px;
  background: #0d3020;
}

/* =============================================
   LOCKED BUILDINGS
============================================= */
.locked-body {
  background: var(--locked-bg);
  border-color: #0d2010;
  opacity: 0.5;
}

.locked-overlay {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 9px;
  color: var(--locked-fg);
  background: rgba(0,0,0,0.4);
  letter-spacing: 0.05em;
  flex-direction: column;
  gap: 4px;
}

.locked-icon {
  font-size: 14px;
  color: #1a3020;
}

/* LOCKED BUILDING 7 — 정제소 */
.refinery-body {
  width: 48px;
  height: 80px;
  border: 1px solid #0d2010;
  border-bottom: none;
  position: relative;
}

/* LOCKED BUILDING 8 — 발사체 조립동 */
.vab-body {
  width: 70px;
  height: 100px;
  border: 1px solid #0d2010;
  border-bottom: none;
  position: relative;
}

/* =============================================
   WORKERS (animated dots on ground level)
============================================= */
.workers-layer {
  position: absolute;
  bottom: 61px;
  left: 0;
  right: 0;
  height: 12px;
  z-index: 10;
  pointer-events: none;
}

.worker {
  position: absolute;
  width: 8px;
  height: 8px;
  border-radius: 50%;
  bottom: 0;
  font-size: 8px;
  line-height: 8px;
  text-align: center;
}

/* Worker movement keyframes — varied start/end positions */
@keyframes worker1 {
  0%   { left: 5%; }
  40%  { left: 30%; }
  60%  { left: 30%; }
  100% { left: 5%; }
}

@keyframes worker2 {
  0%   { left: 35%; }
  45%  { left: 60%; }
  65%  { left: 60%; }
  100% { left: 35%; }
}

@keyframes worker3 {
  0%   { left: 55%; }
  50%  { left: 78%; }
  70%  { left: 78%; }
  100% { left: 55%; }
}

@keyframes worker4 {
  0%   { left: 20%; }
  35%  { left: 48%; }
  55%  { left: 48%; }
  100% { left: 20%; }
}

@keyframes worker5 {
  0%   { left: 70%; }
  40%  { left: 90%; }
  60%  { left: 90%; }
  100% { left: 70%; }
}

.worker.w1 { background: var(--green); box-shadow: 0 0 4px var(--green); animation: worker1 8s linear infinite; }
.worker.w2 { background: var(--amber); box-shadow: 0 0 4px var(--amber); animation: worker2 6s linear infinite 1s; }
.worker.w3 { background: var(--green); box-shadow: 0 0 4px var(--green); animation: worker3 9s linear infinite 2s; }
.worker.w4 { background: var(--green-dim); animation: worker4 11s linear infinite 0.5s; }
.worker.w5 { background: var(--amber); box-shadow: 0 0 4px var(--amber); animation: worker5 7s linear infinite 3s; }

/* =============================================
   RIGHT PANEL — Staff & Automation
============================================= */
.panel-right {
  width: 25%;
  min-width: 200px;
  max-width: 280px;
  display: flex;
  flex-direction: column;
  border-left: 1px solid var(--green-dim);
  background: var(--panel-bg);
  overflow-y: auto;
  overflow-x: hidden;
  padding: 8px 0 0;
}

.panel-right::-webkit-scrollbar { width: 4px; }
.panel-right::-webkit-scrollbar-track { background: var(--bg); }
.panel-right::-webkit-scrollbar-thumb { background: var(--green-dim); }

/* Staff list */
.staff-block {
  margin: 0 8px 8px;
  border: 1px solid var(--green-dim);
  padding: 6px 8px;
}

.staff-row {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 4px 0;
  border-bottom: 1px solid #0d2010;
}

.staff-row:last-child { border-bottom: none; }

.staff-dot {
  width: 7px; height: 7px;
  border-radius: 50%;
  flex-shrink: 0;
}

.staff-dot.engineer { background: var(--green); box-shadow: 0 0 4px var(--green); }
.staff-dot.manager  { background: var(--amber); box-shadow: 0 0 4px var(--amber); }
.staff-dot.scientist{ background: var(--cyan);  box-shadow: 0 0 4px var(--cyan); }

.staff-name {
  flex: 1;
  font-size: 10px;
  color: #88aa88;
}

.staff-badge {
  font-size: 8px;
  padding: 1px 4px;
  border: 1px solid;
  letter-spacing: 0.05em;
}

.staff-badge.eng  { border-color: var(--green-dim); color: var(--green-mid); }
.staff-badge.mgr  { border-color: var(--amber-dim); color: var(--amber); }
.staff-badge.sci  { border-color: var(--cyan-dim);  color: var(--cyan); }

.staff-assign {
  font-size: 8px;
  color: var(--green-dim);
  white-space: nowrap;
  max-width: 60px;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Hire button */
.btn-hire {
  display: block;
  margin: 0 8px 8px;
  padding: 5px 0;
  text-align: center;
  border: 1px solid var(--amber);
  background: var(--bg);
  color: var(--amber);
  font-family: var(--font);
  font-size: 10px;
  letter-spacing: 0.1em;
  cursor: pointer;
  transition: background 0.2s, box-shadow 0.2s;
}

.btn-hire:hover {
  background: #1a0e00;
  box-shadow: var(--glow-amber);
}

/* Automation section */
.auto-block {
  margin: 0 8px 8px;
  border: 1px solid var(--green-dim);
  padding: 6px 8px;
}

.auto-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 3px 0;
  border-bottom: 1px solid #0a1a0a;
  font-size: 10px;
}

.auto-row:last-child { border-bottom: none; }

.auto-name { color: #88aa88; }

.auto-status {
  font-size: 9px;
  padding: 1px 5px;
  border: 1px solid;
}

.auto-status.on  { border-color: var(--green-dim); color: var(--green); background: #001a08; }
.auto-status.off { border-color: #1a1a1a; color: #3a4a3a; }

/* Bonuses block */
.bonus-block {
  margin: 0 8px 8px;
  border: 1px solid var(--green-dim);
  padding: 6px 8px;
}

.bonus-row {
  display: flex;
  justify-content: space-between;
  font-size: 10px;
  padding: 2px 0;
}

.bonus-label { color: #667766; }
.bonus-val   { color: var(--green); }
.bonus-val.hi { color: var(--amber); text-shadow: var(--glow-amber); }

/* Offline accumulation */
.offline-block {
  margin: 0 8px 8px;
  border: 1px solid var(--amber-dim);
  padding: 6px 8px;
  background: #0d0800;
}

.offline-header {
  font-size: 10px;
  color: var(--amber);
  margin-bottom: 4px;
}

.offline-entry {
  font-size: 10px;
  color: #886620;
  padding: 1px 0;
}

.offline-entry span {
  color: var(--amber);
}

/* =============================================
   BOTTOM TICKER
============================================= */
.ticker-bar {
  height: 26px;
  min-height: 26px;
  background: var(--panel-bg);
  border-top: 1px solid var(--green-dim);
  display: flex;
  align-items: center;
  overflow: hidden;
  flex-shrink: 0;
  gap: 0;
}

.ticker-tag {
  background: var(--green-dim);
  color: var(--green);
  font-size: 10px;
  padding: 0 8px;
  height: 100%;
  display: flex;
  align-items: center;
  letter-spacing: 0.1em;
  flex-shrink: 0;
  border-right: 1px solid var(--green);
}

.ticker-scroll-wrap {
  flex: 1;
  overflow: hidden;
  height: 100%;
  position: relative;
}

.ticker-text {
  position: absolute;
  white-space: nowrap;
  font-size: 10px;
  color: var(--green-mid);
  top: 50%;
  transform: translateY(-50%);
  animation: ticker-scroll 38s linear infinite;
}

@keyframes ticker-scroll {
  0%   { left: 100%; }
  100% { left: -220%; }
}

/* =============================================
   HIRE MODAL
============================================= */
.modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.7);
  z-index: 1000;
  display: none;
  align-items: center;
  justify-content: center;
}

.modal-overlay.active {
  display: flex;
}

.modal-box {
  background: var(--panel-bg);
  border: 1px solid var(--amber);
  box-shadow: var(--glow-amber), 0 0 40px rgba(0,0,0,0.8);
  padding: 18px 20px;
  width: 360px;
  max-height: 70vh;
  overflow-y: auto;
  font-family: var(--font);
  color: var(--green);
}

.modal-title {
  font-size: 13px;
  color: var(--amber);
  letter-spacing: 0.1em;
  border-bottom: 1px solid var(--amber-dim);
  padding-bottom: 8px;
  margin-bottom: 12px;
}

.modal-candidate {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 6px 0;
  border-bottom: 1px solid #0d2010;
  font-size: 11px;
}

.modal-candidate:last-child { border-bottom: none; }

.modal-candidate-name { color: #88cc88; }
.modal-candidate-role { color: var(--amber); font-size: 10px; }
.modal-candidate-cost { color: var(--green); font-size: 10px; }

.btn-hire-confirm {
  margin-top: 4px;
  padding: 3px 10px;
  background: var(--bg);
  border: 1px solid var(--green-dim);
  color: var(--green);
  font-family: var(--font);
  font-size: 10px;
  cursor: pointer;
}

.btn-hire-confirm:hover {
  border-color: var(--green);
  background: #001a08;
  box-shadow: var(--glow);
}

.modal-close {
  display: block;
  margin-top: 14px;
  text-align: center;
  padding: 6px;
  border: 1px solid var(--green-dim);
  color: var(--green-dim);
  cursor: pointer;
  font-size: 10px;
  letter-spacing: 0.1em;
  font-family: var(--font);
  background: var(--bg);
}

.modal-close:hover {
  color: var(--green);
  border-color: var(--green);
}

/* =============================================
   MISC UTILS
============================================= */
.sec-label {
  font-size: 10px;
  color: var(--green-dim);
  letter-spacing: 0.1em;
  padding: 2px 0 4px;
  margin-bottom: 4px;
  border-bottom: 1px solid #0d2010;
}

</style>
</head>
<body>

<div class="app">

  <!-- ======== TOP BAR ======== -->
  <div class="topbar">
    <div class="topbar-title">&#9654; MOON IDLE &mdash; <span>생산 &amp; 자원</span></div>
    <div class="topbar-center" id="clock">00:00:00</div>
    <div class="topbar-right">
      <span class="ok">SYS:NOMINAL</span>
      <span class="ok">NET:LINK</span>
      <span class="ok">PWR:100%</span>
    </div>
  </div>

  <!-- ======== MAIN AREA ======== -->
  <div class="main">

    <!-- ===== LEFT PANEL ===== -->
    <div class="panel-left">

      <div class="panel-label">&#9632; 자원 현황</div>

      <!-- TIER 1 -->
      <div class="tier-block t1">
        <div class="tier-header">&#9724; TIER-1  RAW MATERIALS</div>

        <div class="res-row">
          <span class="res-name">철광석</span>
          <div class="res-bar-bg"><div class="res-bar-fill c-green" id="bar-fe" style="width:72%"></div></div>
          <span class="res-val" id="val-fe">14,320</span>
          <span class="res-rate">+320/s</span>
        </div>
        <div class="res-row">
          <span class="res-name">보크사이트</span>
          <div class="res-bar-bg"><div class="res-bar-fill c-green" id="bar-bx" style="width:58%"></div></div>
          <span class="res-val" id="val-bx">8,640</span>
          <span class="res-rate">+192/s</span>
        </div>
        <div class="res-row">
          <span class="res-name">구리</span>
          <div class="res-bar-bg"><div class="res-bar-fill c-green" id="bar-cu" style="width:43%"></div></div>
          <span class="res-val" id="val-cu">5,120</span>
          <span class="res-rate">+128/s</span>
        </div>
        <div class="res-row">
          <span class="res-name">알루미늄</span>
          <div class="res-bar-bg"><div class="res-bar-fill c-green" id="bar-al" style="width:65%"></div></div>
          <span class="res-val" id="val-al">11,280</span>
          <span class="res-rate">+256/s</span>
        </div>
      </div>

      <!-- TIER 2 -->
      <div class="tier-block t2">
        <div class="tier-header">&#9724; TIER-2  PROCESSED</div>

        <div class="res-row">
          <span class="res-name">강철</span>
          <div class="res-bar-bg"><div class="res-bar-fill c-amber" id="bar-st" style="width:54%"></div></div>
          <span class="res-val" id="val-st">3,210</span>
          <span class="res-rate">+64/s</span>
        </div>
        <div class="res-row">
          <span class="res-name">Al-7075</span>
          <div class="res-bar-bg"><div class="res-bar-fill c-amber" id="bar-al2" style="width:38%"></div></div>
          <span class="res-val" id="val-al2">1,840</span>
          <span class="res-rate">+42/s</span>
        </div>
        <div class="res-row">
          <span class="res-name">Cu 배선</span>
          <div class="res-bar-bg"><div class="res-bar-fill c-amber" id="bar-cuw" style="width:29%"></div></div>
          <span class="res-val" id="val-cuw">920</span>
          <span class="res-rate">+28/s</span>
        </div>
      </div>

      <!-- TIER 3 -->
      <div class="tier-block t3">
        <div class="tier-header">&#9724; TIER-3  ADVANCED</div>

        <div class="res-row">
          <span class="res-name">CFRP</span>
          <div class="res-bar-bg"><div class="res-bar-fill c-cyan" id="bar-cf" style="width:22%"></div></div>
          <span class="res-val" id="val-cf">340</span>
          <span class="res-rate">+8/s</span>
        </div>
        <div class="res-row">
          <span class="res-name">Inconel 718</span>
          <div class="res-bar-bg"><div class="res-bar-fill c-cyan" id="bar-in" style="width:31%"></div></div>
          <span class="res-val" id="val-in">510</span>
          <span class="res-rate">+12/s</span>
        </div>
        <div class="res-row">
          <span class="res-name">Ti-6Al-4V</span>
          <div class="res-bar-bg"><div class="res-bar-fill c-cyan" id="bar-ti" style="width:16%"></div></div>
          <span class="res-val" id="val-ti">190</span>
          <span class="res-rate">+6/s</span>
        </div>
      </div>

      <!-- TIER 4 -->
      <div class="tier-block t4">
        <div class="tier-header">&#9724; TIER-4  PROPELLANT</div>

        <div class="res-row">
          <span class="res-name">LOX</span>
          <div class="res-bar-bg"><div class="res-bar-fill c-red" id="bar-lox" style="width:18%"></div></div>
          <span class="res-val" id="val-lox">280</span>
          <span class="res-rate" style="color:var(--red)">+4/s !</span>
        </div>
        <div class="res-row">
          <span class="res-name">RP-1</span>
          <div class="res-bar-bg"><div class="res-bar-fill c-red" id="bar-rp1" style="width:47%"></div></div>
          <span class="res-val" id="val-rp1">720</span>
          <span class="res-rate">+10/s</span>
        </div>
        <div class="res-row">
          <span class="res-name">GH2</span>
          <div class="res-bar-bg"><div class="res-bar-fill c-red" id="bar-gh2" style="width:33%"></div></div>
          <span class="res-val" id="val-gh2">420</span>
          <span class="res-rate">+7/s</span>
        </div>
      </div>

      <!-- EFFICIENCY -->
      <div class="eff-block">
        <div class="eff-label">PROD.EFFICIENCY</div>
        <div class="eff-bar-bg"><div class="eff-bar-fill"></div></div>
        <div class="eff-pct">73.4%</div>
      </div>

    </div>
    <!-- /LEFT PANEL -->

    <!-- ===== CENTER WORLD VIEW ===== -->
    <div class="panel-center">
      <div class="world-label">&#9632; BASE COMPLEX &mdash; SIDE VIEW  [6/8 ACTIVE]</div>

      <div class="world-view" id="worldView">

        <!-- Stars -->
        <div class="stars" id="stars"></div>

        <!-- Ground -->
        <div class="ground"></div>
        <div class="ground-fill"></div>
        <div class="ground-grid"></div>

        <!-- Buildings row -->
        <div class="buildings">

          <!-- 1. 제련소 (Smelter) -->
          <div class="building-slot">
            <div class="building-status">ACTIVE</div>
            <div class="building-label">&#9632; 제련소</div>
            <div class="smelter-wrap">
              <div class="smelter-body">
                <div class="smelter-chimney"></div>
                <div class="smoke-container">
                  <div class="smoke-puff"></div>
                  <div class="smoke-puff"></div>
                  <div class="smoke-puff"></div>
                  <div class="smoke-puff"></div>
                </div>
                <div class="smelter-window"></div>
              </div>
            </div>
          </div>

          <!-- 2. 합금 제조공장 -->
          <div class="building-slot">
            <div class="building-status">ACTIVE</div>
            <div class="building-label">&#9632; 합금공장</div>
            <div class="alloy-body">
              <div class="alloy-window">&#9656;&#9656;&#9656;</div>
              <div class="alloy-conveyor"></div>
            </div>
          </div>

          <!-- 3. CFRP 압출 시설 -->
          <div class="building-slot">
            <div class="building-status">ACTIVE</div>
            <div class="building-label">&#9632; CFRP</div>
            <div class="cfrp-body">
              <div class="cfrp-top"></div>
              <div class="cfrp-light"></div>
            </div>
          </div>

          <!-- 4. 추진제 탱크 -->
          <div class="building-slot">
            <div class="building-status" style="color:var(--red)">LOX-LOW!</div>
            <div class="building-label" style="color:var(--amber)">&#9632; 추진제 탱크</div>
            <div class="tanks-wrap">
              <div class="tank lox">
                <div class="tank-top"><div class="tank-fill"></div></div>
                <div class="tank-body"><div class="tank-fill"></div></div>
                <div class="tank-pipe"></div>
                <div class="tank-label">LOX</div>
              </div>
              <div class="tank rp1">
                <div class="tank-top"><div class="tank-fill"></div></div>
                <div class="tank-body"><div class="tank-fill"></div></div>
                <div class="tank-pipe"></div>
                <div class="tank-label">RP-1</div>
              </div>
              <div class="tank gh2">
                <div class="tank-top"><div class="tank-fill"></div></div>
                <div class="tank-body"><div class="tank-fill"></div></div>
                <div class="tank-pipe"></div>
                <div class="tank-label">GH2</div>
              </div>
            </div>
          </div>

          <!-- 5. 조립 공장 — LARGEST, CENTER -->
          <div class="building-slot" style="flex-shrink:0">
            <div class="building-status" style="color:var(--green);text-shadow:0 0 6px #00e676">PROD x2.3</div>
            <div class="building-label" style="color:var(--green);font-size:10px">&#9632; 조립 공장</div>
            <div class="assembly-wrap">
              <div class="assembly-body">
                <div class="assembly-roof"></div>
                <div class="assembly-windows">
                  <div class="assembly-win"></div>
                  <div class="assembly-win"></div>
                  <div class="assembly-win"></div>
                </div>
                <div class="assembly-door">
                  <div class="assembly-rocket">  /\
 /  \
| [] |
|    |
 \  /
  \/</div>
                </div>
              </div>
            </div>
          </div>

          <!-- 6. 발사대 -->
          <div class="building-slot" style="position:relative">
            <div class="building-status">STANDBY</div>
            <div class="building-label">&#9632; 발사대</div>
            <div class="launchpad-wrap">
              <div style="display:flex;align-items:flex-end;gap:6px;position:relative">
                <!-- Main gantry tower -->
                <div class="gantry">
                  <div class="gantry-arm" style="width:28px;top:20px;"></div>
                  <div class="gantry-arm" style="width:24px;top:50px;"></div>
                  <div class="gantry-arm" style="width:20px;top:80px;"></div>
                  <div class="gantry-arm" style="width:24px;top:108px;"></div>
                </div>
                <!-- Launch platform + rocket on pad -->
                <div style="position:relative">
                  <div class="pad-rocket">  ^
 /|\
/ | \
  |
 [=]</div>
                  <div class="launch-platform"></div>
                  <div class="launch-vents">
                    <div class="launch-vent"></div>
                    <div class="launch-vent"></div>
                    <div class="launch-vent"></div>
                  </div>
                </div>
                <!-- Secondary gantry -->
                <div class="gantry2"></div>
              </div>
            </div>
          </div>

          <!-- SPACER -->
          <div style="flex:1;min-width:10px"></div>

          <!-- 7. LOCKED — 정제소 -->
          <div class="building-slot">
            <div class="building-label locked-text">&#9632; 정제소</div>
            <div class="refinery-body locked-body" style="position:relative">
              <div class="locked-overlay">
                <div class="locked-icon">&#128274;</div>
                <div>[LOCKED]</div>
                <div style="font-size:8px;color:#0d3020">Lv.8 필요</div>
              </div>
            </div>
          </div>

          <!-- 8. LOCKED — 발사체 조립동 -->
          <div class="building-slot">
            <div class="building-label locked-text">&#9632; 발사체조립동</div>
            <div class="vab-body locked-body" style="position:relative">
              <div class="locked-overlay">
                <div class="locked-icon">&#128274;</div>
                <div>[LOCKED]</div>
                <div style="font-size:8px;color:#0d3020">Lv.12 필요</div>
              </div>
            </div>
          </div>

        </div>
        <!-- /buildings -->

        <!-- WORKERS -->
        <div class="workers-layer">
          <div class="worker w1">&#9679;</div>
          <div class="worker w2">&#9679;</div>
          <div class="worker w3">&#9679;</div>
          <div class="worker w4">&#9679;</div>
          <div class="worker w5">&#9679;</div>
        </div>

      </div>
      <!-- /world-view -->
    </div>
    <!-- /CENTER -->

    <!-- ===== RIGHT PANEL ===== -->
    <div class="panel-right">

      <div class="panel-label">&#9632; 인원 &amp; 자동화</div>

      <!-- Staff list -->
      <div class="staff-block">
        <div class="sec-label">HIRED STAFF (3/6)</div>

        <div class="staff-row">
          <div class="staff-dot engineer"></div>
          <div class="staff-name">김엔지니어</div>
          <div class="staff-badge eng">ENG</div>
          <div class="staff-assign">조립공장</div>
        </div>
        <div class="staff-row">
          <div class="staff-dot scientist"></div>
          <div class="staff-name">이박사</div>
          <div class="staff-badge sci">SCI</div>
          <div class="staff-assign">CFRP</div>
        </div>
        <div class="staff-row">
          <div class="staff-dot manager"></div>
          <div class="staff-name">박매니저</div>
          <div class="staff-badge mgr">MGR</div>
          <div class="staff-assign">전체</div>
        </div>
      </div>

      <button class="btn-hire" id="btnHire">[ 인원 고용 + ]</button>

      <!-- Automation -->
      <div class="auto-block">
        <div class="sec-label">AUTO-MANAGER</div>

        <div class="auto-row">
          <span class="auto-name">제련소</span>
          <span class="auto-status on">AUTO</span>
        </div>
        <div class="auto-row">
          <span class="auto-name">합금공장</span>
          <span class="auto-status on">AUTO</span>
        </div>
        <div class="auto-row">
          <span class="auto-name">CFRP</span>
          <span class="auto-status on">AUTO</span>
        </div>
        <div class="auto-row">
          <span class="auto-name">추진제 탱크</span>
          <span class="auto-status off">수동</span>
        </div>
        <div class="auto-row">
          <span class="auto-name">조립 공장</span>
          <span class="auto-status on">AUTO</span>
        </div>
        <div class="auto-row">
          <span class="auto-name">발사대</span>
          <span class="auto-status off">수동</span>
        </div>
      </div>

      <!-- Bonuses -->
      <div class="bonus-block">
        <div class="sec-label">PRODUCTION BONUS</div>

        <div class="bonus-row">
          <span class="bonus-label">제련 효율 업그레이드</span>
          <span class="bonus-val">Lv.4</span>
        </div>
        <div class="bonus-row">
          <span class="bonus-label">합금 수율</span>
          <span class="bonus-val hi">+38%</span>
        </div>
        <div class="bonus-row">
          <span class="bonus-label">CFRP 처리속도</span>
          <span class="bonus-val">x1.6</span>
        </div>
        <div class="bonus-row">
          <span class="bonus-label">박매니저 보너스</span>
          <span class="bonus-val hi">x2.3</span>
        </div>
        <div class="bonus-row">
          <span class="bonus-label">연구 가속</span>
          <span class="bonus-val">+12%</span>
        </div>
      </div>

      <!-- Offline accumulation -->
      <div class="offline-block">
        <div class="offline-header">&#9650; 오프라인 누적</div>
        <div class="offline-entry">시간: <span>3h 42m</span></div>
        <div class="offline-entry">철광석: <span>+43,200</span></div>
        <div class="offline-entry">Al-7075: <span>+8,400</span></div>
        <div class="offline-entry">강철: <span>+5,640</span></div>
        <div class="offline-entry">CFRP: <span>+1,080</span></div>
        <div class="offline-entry" style="margin-top:4px;color:var(--amber)">효율: 60% (매니저 없음)</div>
      </div>

    </div>
    <!-- /RIGHT PANEL -->

  </div>
  <!-- /MAIN -->

  <!-- ======== TICKER ======== -->
  <div class="ticker-bar">
    <div class="ticker-tag">LOG</div>
    <div class="ticker-scroll-wrap">
      <div class="ticker-text" id="tickerText">
        &#9660; [경고] LOX 잔량 18% — 추진제 생산 우선 전환 권고
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        &#9654; [달성] Al-7075 누적 생산 10,000 돌파 — 보너스 +5%
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        &#9660; 발사대: 이그나이터 점검 필요 (D-3)
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        &#9654; 조립 공장: 로켓 1호기 동체 조립 완료 (72%)
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        &#9654; 박매니저 효율 보너스 갱신 — 전체 생산 x2.3 적용 중
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        &#9660; CFRP 재고 부족 예상 — 압출 시설 24시간 가동 돌입
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        &#9654; [인원] 김엔지니어 조립공장 배치 완료 — 조립속도 +15%
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        &#9660; GH2 탱크 압력 정상화 완료
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        &#9654; 제련소 Lv.4 업그레이드 예약됨 — 강철 +20%/s 예상
      </div>
    </div>
  </div>

</div>
<!-- /APP -->

<!-- HIRE MODAL -->
<div class="modal-overlay" id="hireModal">
  <div class="modal-box">
    <div class="modal-title">[ 인원 고용 — 채용 후보 목록 ]</div>

    <div class="modal-candidate">
      <div>
        <div class="modal-candidate-name">최엔지니어</div>
        <div class="modal-candidate-role">ENGINEER &mdash; 추진제 탱크 전문</div>
      </div>
      <div style="text-align:right">
        <div class="modal-candidate-cost">&#9830; 5,000 Al</div>
        <button class="btn-hire-confirm">고용</button>
      </div>
    </div>

    <div class="modal-candidate">
      <div>
        <div class="modal-candidate-name">한박사</div>
        <div class="modal-candidate-role">SCIENTIST &mdash; 추진제 연구 특화</div>
      </div>
      <div style="text-align:right">
        <div class="modal-candidate-cost">&#9830; 8,200 Al</div>
        <button class="btn-hire-confirm">고용</button>
      </div>
    </div>

    <div class="modal-candidate">
      <div>
        <div class="modal-candidate-name">정매니저</div>
        <div class="modal-candidate-role">MANAGER &mdash; 발사 운영 총괄</div>
      </div>
      <div style="text-align:right">
        <div class="modal-candidate-cost">&#9830; 12,000 강철</div>
        <button class="btn-hire-confirm">고용</button>
      </div>
    </div>

    <div class="modal-candidate">
      <div>
        <div class="modal-candidate-name">오기술자</div>
        <div class="modal-candidate-role">ENGINEER &mdash; 제련소 전담</div>
      </div>
      <div style="text-align:right">
        <div class="modal-candidate-cost">&#9830; 3,800 Al</div>
        <button class="btn-hire-confirm">고용</button>
      </div>
    </div>

    <button class="modal-close" id="modalClose">[ 취소 ]</button>
  </div>
</div>

<script>
/* =============================================
   CLOCK
============================================= */
function updateClock() {
  const now = new Date();
  const h = String(now.getHours()).padStart(2,'0');
  const m = String(now.getMinutes()).padStart(2,'0');
  const s = String(now.getSeconds()).padStart(2,'0');
  document.getElementById('clock').textContent = h + ':' + m + ':' + s;
}
setInterval(updateClock, 1000);
updateClock();

/* =============================================
   STARS
============================================= */
(function generateStars() {
  const container = document.getElementById('stars');
  const count = 60;
  for (let i = 0; i < count; i++) {
    const star = document.createElement('div');
    star.className = 'star' + (Math.random() < 0.15 ? ' bright' : '');
    star.style.left = (Math.random() * 100) + '%';
    star.style.top  = (Math.random() * 70) + '%';
    const delay = (Math.random() * 6).toFixed(2) + 's';
    const dur   = (3 + Math.random() * 4).toFixed(2) + 's';
    star.style.animation = `star-twinkle ${dur} ease-in-out ${delay} infinite`;
    container.appendChild(star);
  }
})();

/* =============================================
   RESOURCE TICK
============================================= */
const resources = {
  fe:  { val: 14320, rate: 320,  max: 50000, barId: 'bar-fe',  valId: 'val-fe' },
  bx:  { val: 8640,  rate: 192,  max: 30000, barId: 'bar-bx',  valId: 'val-bx' },
  cu:  { val: 5120,  rate: 128,  max: 20000, barId: 'bar-cu',  valId: 'val-cu' },
  al:  { val: 11280, rate: 256,  max: 25000, barId: 'bar-al',  valId: 'val-al' },
  st:  { val: 3210,  rate: 64,   max: 10000, barId: 'bar-st',  valId: 'val-st' },
  al2: { val: 1840,  rate: 42,   max: 8000,  barId: 'bar-al2', valId: 'val-al2' },
  cuw: { val: 920,   rate: 28,   max: 5000,  barId: 'bar-cuw', valId: 'val-cuw' },
  cf:  { val: 340,   rate: 8,    max: 2000,  barId: 'bar-cf',  valId: 'val-cf' },
  inc: { val: 510,   rate: 12,   max: 2000,  barId: 'bar-in',  valId: 'val-in' },
  ti:  { val: 190,   rate: 6,    max: 2000,  barId: 'bar-ti',  valId: 'val-ti' },
  lox: { val: 280,   rate: 4,    max: 2000,  barId: 'bar-lox', valId: 'val-lox' },
  rp1: { val: 720,   rate: 10,   max: 2000,  barId: 'bar-rp1', valId: 'val-rp1' },
  gh2: { val: 420,   rate: 7,    max: 2000,  barId: 'bar-gh2', valId: 'val-gh2' },
};

function formatNum(n) {
  if (n >= 1000000) return (n/1000000).toFixed(1) + 'M';
  if (n >= 10000)   return (n/1000).toFixed(1) + 'k';
  return Math.floor(n).toLocaleString();
}

function tickResources() {
  for (const key in resources) {
    const r = resources[key];
    r.val = Math.min(r.val + r.rate, r.max);
    const pct = Math.round((r.val / r.max) * 100);
    const bar = document.getElementById(r.barId);
    const valEl = document.getElementById(r.valId);
    if (bar) bar.style.width = pct + '%';
    if (valEl) valEl.textContent = formatNum(r.val);
  }
}

setInterval(tickResources, 1000);

/* =============================================
   HIRE MODAL
============================================= */
const hireBtn   = document.getElementById('btnHire');
const modal     = document.getElementById('hireModal');
const closeBtn  = document.getElementById('modalClose');

hireBtn.addEventListener('click', function() {
  modal.classList.add('active');
});

closeBtn.addEventListener('click', function() {
  modal.classList.remove('active');
});

modal.addEventListener('click', function(e) {
  if (e.target === modal) modal.classList.remove('active');
});

/* Hire confirm buttons (demo) */
document.querySelectorAll('.btn-hire-confirm').forEach(function(btn) {
  btn.addEventListener('click', function() {
    const row = btn.closest('.modal-candidate');
    const name = row.querySelector('.modal-candidate-name').textContent;
    btn.textContent = '고용됨';
    btn.disabled = true;
    btn.style.color = 'var(--green)';
    btn.style.borderColor = 'var(--green-dim)';
  });
});

/* =============================================
   TICKER — restart on end
============================================= */
const tickerEl = document.getElementById('tickerText');
tickerEl.addEventListener('animationiteration', function() {
  // Continuously loops via CSS animation — no JS needed
});
</script>

</body>
</html>
