<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MOON IDLE â€” ì—°êµ¬Â·ê¸°ìˆ </title>
<link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">
<style>
  /* =============================================
     RESET & BASE
  ============================================= */
  *, *::before, *::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }

  :root {
    --bg:          #010800;
    --panel-bg:    #020d04;
    --green:       #00e676;
    --green-dim:   #1a5c34;
    --green-mid:   #00994d;
    --green-text:  #88cc99;
    --amber:       #ffab00;
    --amber-dim:   #7a5100;
    --red:         #ff1744;
    --locked:      #1a1f1a;
    --locked-text: #3a4a3a;
    --font:        'Share Tech Mono', monospace;
    --border:      1px solid #1a5c34;
    --glow:        0 0 6px #00e67680;
    --glow-strong: 0 0 12px #00e676, 0 0 24px #00e67650;
    --amber-glow:  0 0 8px #ffab0080;
  }

  html, body {
    width: 100%;
    height: 100%;
    background: var(--bg);
    color: var(--green-text);
    font-family: var(--font);
    font-size: 12px;
    line-height: 1.5;
    overflow: hidden;
  }

  /* =============================================
     CRT OVERLAYS
  ============================================= */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background: repeating-linear-gradient(
      0deg,
      transparent,
      transparent 2px,
      rgba(0, 0, 0, 0.15) 2px,
      rgba(0, 0, 0, 0.15) 4px
    );
    pointer-events: none;
    z-index: 9999;
  }

  body::after {
    content: '';
    position: fixed;
    inset: 0;
    background: radial-gradient(ellipse at center, transparent 55%, rgba(0,0,0,0.75) 100%);
    pointer-events: none;
    z-index: 9998;
  }

  /* =============================================
     ANIMATIONS
  ============================================= */
  @keyframes crt-flicker {
    0%   { opacity: 1; }
    92%  { opacity: 1; }
    93%  { opacity: 0.88; }
    94%  { opacity: 1; }
    96%  { opacity: 0.92; }
    97%  { opacity: 1; }
    100% { opacity: 1; }
  }

  @keyframes blink {
    0%, 49%  { opacity: 1; }
    50%, 100% { opacity: 0; }
  }

  @keyframes pulse-amber {
    0%, 100% { color: var(--amber); text-shadow: var(--amber-glow); }
    50%      { color: var(--amber-dim); text-shadow: none; }
  }

  @keyframes progress-pulse {
    0%, 100% { opacity: 1; }
    50%      { opacity: 0.7; }
  }

  @keyframes node-available-pulse {
    0%, 100% { box-shadow: 0 0 4px var(--green-dim); }
    50%      { box-shadow: 0 0 10px var(--green-mid), 0 0 20px #00994d40; }
  }

  @keyframes scan-line {
    0%   { transform: translateY(-100%); opacity: 0.05; }
    100% { transform: translateY(200%); opacity: 0.05; }
  }

  @keyframes ascii-blink {
    0%, 45%  { opacity: 1; }
    50%, 95% { opacity: 0.55; }
    100%     { opacity: 1; }
  }

  @keyframes ascii-scanline-move {
    0%   { background-position: 0 0; }
    100% { background-position: 0 48px; }
  }

  @keyframes ascii-glow-pulse {
    0%, 100% { text-shadow: 0 0 8px #00e676, 0 0 2px #00e676; }
    50%      { text-shadow: 0 0 14px #00e676, 0 0 4px #00e676, 0 0 24px #00e67640; }
  }

  @keyframes ascii-amber-pulse {
    0%, 100% { text-shadow: 0 0 8px #ffab00, 0 0 2px #ffab00; opacity: 1; }
    50%      { text-shadow: 0 0 14px #ffab00, 0 0 4px #ffab00; opacity: 0.75; }
  }

  /* =============================================
     MAIN WRAPPER
  ============================================= */
  #main-wrapper {
    display: flex;
    flex-direction: column;
    width: 100%;
    height: 100%;
    animation: crt-flicker 8s infinite;
  }

  /* =============================================
     TOP BAR
  ============================================= */
  #top-bar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    background: var(--panel-bg);
    border-bottom: 2px solid var(--green-dim);
    padding: 5px 14px;
    flex-shrink: 0;
    box-shadow: var(--glow-strong);
    z-index: 100;
  }

  .top-title {
    font-size: 14px;
    letter-spacing: 3px;
    text-transform: uppercase;
    color: var(--green);
    text-shadow: var(--glow-strong);
  }

  .top-title span {
    color: var(--green-dim);
    font-size: 11px;
    letter-spacing: 1px;
  }

  .top-stats {
    display: flex;
    gap: 24px;
    align-items: center;
    font-size: 11px;
    letter-spacing: 1px;
  }

  .stat-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1px;
  }

  .stat-label {
    color: var(--green-dim);
    font-size: 9px;
    letter-spacing: 2px;
    text-transform: uppercase;
  }

  .stat-value {
    color: var(--green);
    text-shadow: var(--glow);
    font-size: 13px;
  }

  .stat-value.amber {
    color: var(--amber);
    text-shadow: var(--amber-glow);
    animation: pulse-amber 2s ease-in-out infinite;
  }

  .top-era {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 11px;
  }

  .era-badge {
    border: 1px solid var(--green-mid);
    padding: 2px 8px;
    color: var(--green);
    text-shadow: var(--glow);
    letter-spacing: 2px;
    font-size: 10px;
    text-transform: uppercase;
  }

  .cursor-blink {
    display: inline-block;
    width: 8px;
    height: 13px;
    background: var(--green);
    vertical-align: middle;
    animation: blink 1s step-end infinite;
    box-shadow: var(--glow);
  }

  /* =============================================
     MAIN TABS
  ============================================= */
  #tab-bar {
    display: flex;
    background: var(--panel-bg);
    border-bottom: 1px solid var(--green-dim);
    flex-shrink: 0;
    padding: 0 14px;
  }

  .tab {
    padding: 6px 18px;
    font-family: var(--font);
    font-size: 11px;
    letter-spacing: 2px;
    text-transform: uppercase;
    cursor: pointer;
    border: none;
    background: transparent;
    color: var(--green-dim);
    border-bottom: 2px solid transparent;
    transition: color 0.15s, border-color 0.15s;
    margin-bottom: -1px;
    white-space: nowrap;
  }

  .tab:hover {
    color: var(--green-text);
  }

  .tab.active {
    color: var(--green);
    border-bottom-color: var(--green);
    text-shadow: var(--glow);
  }

  /* =============================================
     CONTENT AREA
  ============================================= */
  #content {
    display: flex;
    flex: 1;
    overflow: hidden;
    gap: 0;
  }

  /* =============================================
     LEFT PANEL â€” RESEARCH STATUS (20%)
  ============================================= */
  #panel-left {
    width: 22%;
    flex-shrink: 0;
    background: var(--panel-bg);
    border-right: 1px solid var(--green-dim);
    display: flex;
    flex-direction: column;
    overflow: hidden;
  }

  .panel-header {
    padding: 6px 10px;
    background: #041208;
    border-bottom: 1px solid var(--green-dim);
    font-size: 10px;
    letter-spacing: 2px;
    text-transform: uppercase;
    color: var(--green);
    text-shadow: var(--glow);
    display: flex;
    align-items: center;
    gap: 6px;
  }

  .panel-header::before {
    content: '>';
    color: var(--green);
    text-shadow: var(--glow-strong);
  }

  .panel-scroll {
    flex: 1;
    overflow-y: auto;
    padding: 8px;
    scrollbar-width: thin;
    scrollbar-color: var(--green-dim) transparent;
  }

  /* Research queue slots */
  .research-queue-header {
    font-size: 10px;
    letter-spacing: 2px;
    text-transform: uppercase;
    color: var(--green-dim);
    padding: 4px 2px 6px;
    border-bottom: 1px solid #0d2016;
    margin-bottom: 8px;
  }

  .research-queue-header span {
    color: var(--green);
    text-shadow: var(--glow);
  }

  .active-research-card {
    border: 1px solid var(--green-dim);
    padding: 8px;
    margin-bottom: 8px;
    background: #010f04;
    position: relative;
    overflow: hidden;
  }

  .active-research-card.amber-card {
    border-color: var(--amber-dim);
  }

  .arc-title {
    font-size: 11px;
    color: var(--green);
    text-shadow: var(--glow);
    margin-bottom: 2px;
    letter-spacing: 1px;
  }

  .arc-title.amber {
    color: var(--amber);
    text-shadow: var(--amber-glow);
  }

  .arc-sub {
    font-size: 9px;
    color: var(--green-dim);
    margin-bottom: 6px;
    letter-spacing: 1px;
  }

  .progress-bar-wrap {
    height: 10px;
    background: #0d2016;
    border: 1px solid var(--green-dim);
    margin-bottom: 4px;
    position: relative;
    overflow: hidden;
  }

  .progress-bar-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--green-mid), var(--green));
    transition: width 0.5s;
    animation: progress-pulse 2s ease-in-out infinite;
    position: relative;
  }

  .progress-bar-fill::after {
    content: '';
    position: absolute;
    right: 0;
    top: 0;
    bottom: 0;
    width: 3px;
    background: var(--green);
    box-shadow: var(--glow-strong);
  }

  .progress-bar-fill.amber-fill {
    background: linear-gradient(90deg, var(--amber-dim), var(--amber));
  }

  .progress-bar-fill.amber-fill::after {
    background: var(--amber);
    box-shadow: var(--amber-glow);
  }

  .progress-label {
    display: flex;
    justify-content: space-between;
    font-size: 10px;
    color: var(--green-text);
    margin-bottom: 6px;
  }

  .progress-label .pct {
    color: var(--green);
    text-shadow: var(--glow);
  }

  .progress-label .pct.amber {
    color: var(--amber);
    text-shadow: var(--amber-glow);
  }

  .arc-eta {
    font-size: 10px;
    color: var(--green-dim);
    letter-spacing: 1px;
  }

  .btn-cancel {
    margin-top: 6px;
    padding: 3px 8px;
    font-family: var(--font);
    font-size: 10px;
    letter-spacing: 1px;
    background: transparent;
    border: 1px solid #3a1010;
    color: #ff6666;
    cursor: pointer;
    text-transform: uppercase;
    transition: background 0.15s, border-color 0.15s;
  }

  .btn-cancel:hover {
    background: #1a0505;
    border-color: var(--red);
    color: var(--red);
  }

  .empty-slot {
    border: 1px dashed #1a3020;
    padding: 10px;
    text-align: center;
    color: #1a3020;
    font-size: 10px;
    letter-spacing: 1px;
    margin-bottom: 8px;
  }

  /* RP Income */
  .rp-section {
    margin-top: 12px;
    border-top: 1px solid #0d2016;
    padding-top: 10px;
  }

  .rp-section-title {
    font-size: 9px;
    letter-spacing: 2px;
    color: var(--green-dim);
    text-transform: uppercase;
    margin-bottom: 6px;
  }

  .lab-item {
    display: flex;
    justify-content: space-between;
    font-size: 10px;
    color: var(--green-text);
    padding: 2px 0;
    border-bottom: 1px solid #091608;
  }

  .lab-item .lab-rate {
    color: var(--green);
    text-shadow: var(--glow);
  }

  .total-rate {
    display: flex;
    justify-content: space-between;
    font-size: 11px;
    color: var(--green);
    text-shadow: var(--glow);
    padding: 6px 0 0;
    letter-spacing: 1px;
  }

  /* =============================================
     CENTER PANEL â€” TECH TREE (55%)
  ============================================= */
  #panel-center {
    flex: 1;
    background: var(--bg);
    display: flex;
    flex-direction: column;
    overflow: hidden;
    position: relative;
  }

  #tree-container {
    flex: 1;
    overflow: auto;
    padding: 12px;
    scrollbar-width: thin;
    scrollbar-color: var(--green-dim) transparent;
    position: relative;
  }

  /* Tech tree SVG wrapper */
  #tech-tree-svg-wrap {
    position: relative;
    min-width: 900px;
  }

  /* Branch headers */
  .branch-headers {
    display: grid;
    grid-template-columns: repeat(6, 1fr);
    gap: 4px;
    margin-bottom: 8px;
    min-width: 900px;
  }

  .branch-header {
    text-align: center;
    padding: 4px;
    border: 1px solid var(--green-dim);
    background: #041208;
    font-size: 10px;
    letter-spacing: 1px;
    text-transform: uppercase;
    color: var(--green);
    text-shadow: var(--glow);
  }

  .branch-header.locked-branch {
    border-color: #1a1f1a;
    color: var(--locked-text);
    text-shadow: none;
  }

  /* The SVG tree */
  #tree-svg {
    width: 100%;
    min-width: 900px;
    display: block;
  }

  /* =============================================
     RIGHT PANEL â€” TECH DETAIL (25%)
  ============================================= */
  #panel-right {
    width: 25%;
    flex-shrink: 0;
    background: var(--panel-bg);
    border-left: 1px solid var(--green-dim);
    display: flex;
    flex-direction: column;
    overflow: hidden;
  }

  .detail-scroll {
    flex: 1;
    overflow-y: auto;
    padding: 10px;
    scrollbar-width: thin;
    scrollbar-color: var(--green-dim) transparent;
  }

  /* Default stats panel */
  .overview-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 6px;
    margin-top: 8px;
  }

  .ov-card {
    border: 1px solid var(--green-dim);
    background: #010f04;
    padding: 8px;
    text-align: center;
  }

  .ov-num {
    font-size: 22px;
    color: var(--green);
    text-shadow: var(--glow-strong);
    line-height: 1.2;
  }

  .ov-num.amber {
    color: var(--amber);
    text-shadow: var(--amber-glow);
  }

  .ov-num.dim {
    color: var(--green-dim);
    text-shadow: none;
  }

  .ov-label {
    font-size: 9px;
    letter-spacing: 1px;
    text-transform: uppercase;
    color: var(--green-dim);
    margin-top: 2px;
  }

  .lunar-target {
    margin-top: 10px;
    padding: 8px;
    border: 1px solid var(--amber-dim);
    background: #0a0600;
    text-align: center;
  }

  .lunar-target .lt-num {
    font-size: 28px;
    color: var(--amber);
    text-shadow: var(--amber-glow);
    animation: pulse-amber 3s ease-in-out infinite;
  }

  .lunar-target .lt-label {
    font-size: 9px;
    color: var(--amber-dim);
    letter-spacing: 2px;
    text-transform: uppercase;
  }

  /* Tech detail display */
  .detail-hidden { display: none; }

  .detail-tech-id {
    font-size: 10px;
    letter-spacing: 2px;
    color: var(--green-dim);
    text-transform: uppercase;
    margin-bottom: 2px;
  }

  .detail-tech-name {
    font-size: 14px;
    color: var(--green);
    text-shadow: var(--glow-strong);
    margin-bottom: 2px;
    letter-spacing: 1px;
  }

  .detail-tech-en {
    font-size: 10px;
    color: var(--green-dim);
    letter-spacing: 1px;
    margin-bottom: 8px;
  }

  .detail-divider {
    border: none;
    border-top: 1px solid var(--green-dim);
    margin: 8px 0;
  }

  .detail-status-badge {
    display: inline-block;
    padding: 2px 8px;
    font-size: 10px;
    letter-spacing: 2px;
    text-transform: uppercase;
    border: 1px solid;
    margin-bottom: 8px;
  }

  .status-complete  { color: var(--green);  border-color: var(--green);      background: #011a0a; text-shadow: var(--glow); }
  .status-progress  { color: var(--amber);  border-color: var(--amber-dim);  background: #0a0700; text-shadow: var(--amber-glow); animation: pulse-amber 2s ease-in-out infinite; }
  .status-available { color: var(--green);  border-color: var(--green-mid);  background: #010f04; }
  .status-locked    { color: var(--locked-text); border-color: #2a2f2a; background: var(--locked); }

  .detail-row {
    display: flex;
    justify-content: space-between;
    font-size: 11px;
    padding: 3px 0;
    border-bottom: 1px solid #091608;
  }

  .detail-row .dr-key {
    color: var(--green-dim);
    text-transform: uppercase;
    letter-spacing: 1px;
    font-size: 10px;
  }

  .detail-row .dr-val {
    color: var(--green-text);
    text-align: right;
  }

  .detail-row .dr-val.highlight {
    color: var(--green);
    text-shadow: var(--glow);
  }

  .detail-effects {
    margin-top: 8px;
  }

  .effect-title {
    font-size: 9px;
    letter-spacing: 2px;
    color: var(--green-dim);
    text-transform: uppercase;
    margin-bottom: 4px;
  }

  .effect-item {
    font-size: 11px;
    color: var(--green-text);
    padding: 2px 0;
    padding-left: 10px;
    position: relative;
  }

  .effect-item::before {
    content: '+';
    position: absolute;
    left: 0;
    color: var(--green);
    text-shadow: var(--glow);
  }

  .unlocks-section {
    margin-top: 8px;
    padding: 6px;
    border: 1px solid #0d2016;
    background: #010f04;
  }

  .unlocks-title {
    font-size: 9px;
    letter-spacing: 2px;
    color: var(--green-dim);
    text-transform: uppercase;
    margin-bottom: 4px;
  }

  .unlock-item {
    font-size: 10px;
    color: var(--green-text);
    padding: 1px 0 1px 8px;
    border-left: 2px solid var(--green-dim);
    margin-bottom: 2px;
  }

  .btn-research {
    width: 100%;
    margin-top: 12px;
    padding: 8px;
    font-family: var(--font);
    font-size: 12px;
    letter-spacing: 3px;
    text-transform: uppercase;
    background: #011a0a;
    border: 2px solid var(--green-mid);
    color: var(--green);
    cursor: pointer;
    text-shadow: var(--glow);
    transition: background 0.15s, box-shadow 0.15s, border-color 0.15s;
  }

  .btn-research:hover {
    background: #022d12;
    border-color: var(--green);
    box-shadow: var(--glow-strong);
  }

  .btn-research:active {
    background: var(--green-dim);
  }

  .btn-research.disabled {
    opacity: 0.4;
    cursor: not-allowed;
    border-color: var(--green-dim);
  }

  .btn-research.disabled:hover {
    background: #011a0a;
    box-shadow: none;
    border-color: var(--green-dim);
  }

  .rp-check {
    text-align: center;
    font-size: 10px;
    color: var(--green-text);
    margin-top: 4px;
    letter-spacing: 1px;
  }

  .rp-check .ok { color: var(--green); text-shadow: var(--glow); }
  .rp-check .fail { color: var(--red); }

  /* =============================================
     BOTTOM BAR
  ============================================= */
  #bottom-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: var(--panel-bg);
    border-top: 1px solid var(--green-dim);
    padding: 4px 14px;
    flex-shrink: 0;
    font-size: 10px;
    color: var(--green-dim);
    letter-spacing: 1px;
  }

  #bottom-bar .bb-item span {
    color: var(--green);
    text-shadow: var(--glow);
  }

  #bottom-bar .bb-hint {
    color: var(--amber-dim);
    animation: pulse-amber 4s ease-in-out infinite;
  }

  /* =============================================
     TECH NODE STYLES (via SVG foreignObject / CSS classes applied in JS)
  ============================================= */

  /* Tooltip on hover */
  .node-tooltip {
    position: fixed;
    background: var(--panel-bg);
    border: 1px solid var(--green-mid);
    padding: 6px 10px;
    font-size: 10px;
    color: var(--green-text);
    letter-spacing: 1px;
    pointer-events: none;
    z-index: 500;
    display: none;
    max-width: 200px;
    box-shadow: var(--glow);
  }

  .node-tooltip.visible { display: block; }

  /* Flash feedback when research starts */
  @keyframes flash-green {
    0%   { background: var(--green); }
    100% { background: #011a0a; }
  }

  .flash-feedback {
    animation: flash-green 0.4s ease-out;
  }

  /* SVG node inline styles applied via JS */

  /* Scrollbar */
  ::-webkit-scrollbar { width: 6px; height: 6px; }
  ::-webkit-scrollbar-track { background: transparent; }
  ::-webkit-scrollbar-thumb { background: var(--green-dim); }
  ::-webkit-scrollbar-thumb:hover { background: var(--green-mid); }

  /* =============================================
     ASCII ART PANELS
  ============================================= */

  .ascii-panel {
    margin-top: 8px;
    padding: 6px 8px;
    background: #010c03;
    border: 1px solid var(--green-dim);
    position: relative;
    overflow: hidden;
  }

  .ascii-panel::before {
    content: '';
    position: absolute;
    inset: 0;
    background: repeating-linear-gradient(
      0deg,
      transparent,
      transparent 3px,
      rgba(0, 230, 118, 0.025) 3px,
      rgba(0, 230, 118, 0.025) 6px
    );
    pointer-events: none;
    animation: ascii-scanline-move 4s linear infinite;
  }

  .ascii-panel.amber-ascii {
    border-color: var(--amber-dim);
    background: #0a0600;
  }

  .ascii-panel-label {
    font-size: 8px;
    letter-spacing: 2px;
    text-transform: uppercase;
    color: var(--green-dim);
    margin-bottom: 4px;
    padding-bottom: 3px;
    border-bottom: 1px solid #0d2016;
  }

  .ascii-panel.amber-ascii .ascii-panel-label {
    color: var(--amber-dim);
    border-color: #2a1800;
  }

  .ascii-art {
    font-family: var(--font);
    font-size: 9px;
    line-height: 1.35;
    color: var(--green);
    text-shadow: 0 0 8px #00e676;
    white-space: pre;
    animation: ascii-glow-pulse 3s ease-in-out infinite;
    position: relative;
    z-index: 1;
  }

  .ascii-art.amber-art {
    color: var(--amber);
    text-shadow: 0 0 8px #ffab00;
    animation: ascii-amber-pulse 2s ease-in-out infinite;
  }

  .ascii-art.in-progress-art {
    animation: ascii-amber-pulse 1.8s ease-in-out infinite;
  }

  /* =============================================
     COMPLETED TECHS PANEL â€” below tree
  ============================================= */
  #completed-panel {
    border-top: 1px solid var(--green-dim);
    background: #010a02;
    padding: 8px 12px;
    flex-shrink: 0;
    max-height: 130px;
    overflow-y: auto;
    scrollbar-width: thin;
    scrollbar-color: var(--green-dim) transparent;
  }

  .completed-panel-header {
    font-size: 9px;
    letter-spacing: 2px;
    text-transform: uppercase;
    color: var(--green);
    text-shadow: var(--glow);
    margin-bottom: 6px;
    display: flex;
    align-items: center;
    gap: 6px;
  }

  .completed-panel-header::before {
    content: '//';
    color: var(--green-dim);
  }

  .completed-tech-list {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
    gap: 3px 16px;
  }

  .completed-tech-row {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 10px;
    color: var(--green-text);
    padding: 2px 0;
    border-bottom: 1px solid #091608;
  }

  .ctr-id {
    color: var(--green-dim);
    letter-spacing: 1px;
    min-width: 38px;
    font-size: 9px;
  }

  .ctr-name {
    flex: 1;
    color: var(--green-text);
  }

  .ctr-bar {
    color: var(--green);
    text-shadow: var(--glow);
    font-size: 9px;
    white-space: nowrap;
  }

  .ctr-icon {
    font-family: var(--font);
    font-size: 9px;
    color: var(--green);
    text-shadow: 0 0 6px #00e676;
    min-width: 30px;
    text-align: right;
    white-space: pre;
  }

  /* =============================================
     LAB VISUALIZATION PANEL â€” bottom of left panel
  ============================================= */
  .lab-viz-panel {
    margin-top: 12px;
    border-top: 1px solid #0d2016;
    padding-top: 8px;
  }

  .lab-viz-header {
    font-size: 8px;
    letter-spacing: 2px;
    text-transform: uppercase;
    color: var(--green-dim);
    margin-bottom: 5px;
  }

  .lab-ascii {
    font-family: var(--font);
    font-size: 8px;
    line-height: 1.3;
    color: var(--green-mid);
    text-shadow: 0 0 6px #00994d60;
    white-space: pre;
    animation: ascii-glow-pulse 5s ease-in-out infinite;
  }

  /* =============================================
     ASCII ART IN RIGHT DETAIL PANEL
  ============================================= */
  #dt-ascii-wrap {
    margin-top: 10px;
  }

  .detail-ascii-label {
    font-size: 8px;
    letter-spacing: 2px;
    text-transform: uppercase;
    color: var(--green-dim);
    margin-bottom: 4px;
    padding-bottom: 3px;
    border-bottom: 1px solid #0d2016;
  }

  .detail-ascii-art {
    font-family: var(--font);
    font-size: 9px;
    line-height: 1.35;
    color: var(--green);
    text-shadow: 0 0 8px #00e676;
    white-space: pre;
    background: #010c03;
    border: 1px solid var(--green-dim);
    padding: 6px 8px;
    animation: ascii-glow-pulse 3.5s ease-in-out infinite;
    position: relative;
    overflow: hidden;
  }

  .detail-ascii-art.amber-detail {
    color: var(--amber);
    text-shadow: 0 0 8px #ffab00;
    border-color: var(--amber-dim);
    background: #0a0600;
    animation: ascii-amber-pulse 2s ease-in-out infinite;
  }

  .detail-ascii-art::after {
    content: '';
    position: absolute;
    inset: 0;
    background: repeating-linear-gradient(
      0deg,
      transparent,
      transparent 3px,
      rgba(0, 230, 118, 0.02) 3px,
      rgba(0, 230, 118, 0.02) 6px
    );
    pointer-events: none;
    animation: ascii-scanline-move 4s linear infinite;
  }

</style>
</head>
<body>

<div id="main-wrapper">

  <!-- ===== TOP BAR ===== -->
  <div id="top-bar">
    <div class="top-title">
      MOON IDLE <span>â€”</span> ì—°êµ¬Â·ê¸°ìˆ 
      <span class="cursor-blink"></span>
    </div>

    <div class="top-stats">
      <div class="stat-item">
        <div class="stat-label">ì‹œëŒ€</div>
        <div class="stat-value">ì¤€ê¶¤ë„</div>
      </div>
      <div class="stat-item">
        <div class="stat-label">ì—°êµ¬ í¬ì¸íŠ¸</div>
        <div class="stat-value">847 RP</div>
      </div>
      <div class="stat-item">
        <div class="stat-label">íšë“ë¥ </div>
        <div class="stat-value amber">+8 RP/min</div>
      </div>
      <div class="stat-item">
        <div class="stat-label">ì—°êµ¬ì†Œ</div>
        <div class="stat-value">2 ACTIVE</div>
      </div>
    </div>

    <div class="top-era">
      <div class="era-badge">PHASE 2</div>
      <div style="font-size:10px; color:var(--green-dim)">ì¤€ê¶¤ë„ ì‹œëŒ€</div>
    </div>
  </div>

  <!-- ===== TABS ===== -->
  <div id="tab-bar">
    <button class="tab" onclick="switchTab(this)">â—‹ ìƒì‚°/ìì›</button>
    <button class="tab active" onclick="switchTab(this)">â— ì—°êµ¬/ê¸°ìˆ </button>
    <button class="tab" onclick="switchTab(this)">â—‹ ë¡œì¼“ ì¡°ë¦½</button>
    <button class="tab" onclick="switchTab(this)">â—‹ ë°œì‚¬ ê´€ì œ</button>
  </div>

  <!-- ===== CONTENT ===== -->
  <div id="content">

    <!-- === LEFT PANEL === -->
    <div id="panel-left">
      <div class="panel-header">ì—°êµ¬ í˜„í™©</div>
      <div class="panel-scroll">

        <div class="research-queue-header">ì—°êµ¬ ì¤‘ [<span>2</span>/2 ìŠ¬ë¡¯]</div>

        <!-- Active Research 1 -->
        <div class="active-research-card" id="arc-s03">
          <div class="arc-title">S03 CFRP ì ì¸µ ê¸°ìˆ </div>
          <div class="arc-sub">êµ¬ì¡° ê¸°ìˆ  ë¸Œëœì¹˜</div>
          <div class="progress-bar-wrap">
            <div class="progress-bar-fill" style="width:67%"></div>
          </div>
          <div class="progress-label">
            <span>ì§„í–‰ë¥ </span>
            <span class="pct">67%</span>
          </div>
          <div class="arc-eta">ETA: <span style="color:var(--green);text-shadow:var(--glow)">47ë¶„</span></div>
          <!-- ASCII Art: CFRP Lamination -->
          <div class="ascii-panel">
            <div class="ascii-panel-label">CFRP ì ì¸µ ì‹œë®¬ë ˆì´ì…˜</div>
            <pre class="ascii-art in-progress-art">  ///////  â† 0Â° ply
 ///////
///////
=======  â† 90Â° ply
=======
=======
 \\\\\\\ â† Â±45Â° ply
  \\\\\\
[CURE 140Â°C â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 67%]</pre>
          </div>
          <button class="btn-cancel" onclick="cancelResearch('s03')">â—¼ ì·¨ì†Œ</button>
        </div>

        <!-- Active Research 2 -->
        <div class="active-research-card amber-card" id="arc-t02">
          <div class="arc-title amber">T02 ì‚­ë§ˆ ì½”íŒ…</div>
          <div class="arc-sub" style="color:var(--amber-dim)">ì—´ ê´€ë¦¬ ë¸Œëœì¹˜</div>
          <div class="progress-bar-wrap" style="border-color:var(--amber-dim)">
            <div class="progress-bar-fill amber-fill" style="width:45%"></div>
          </div>
          <div class="progress-label">
            <span style="color:var(--amber-dim)">ì§„í–‰ë¥ </span>
            <span class="pct amber">45%</span>
          </div>
          <div class="arc-eta" style="color:var(--amber-dim)">ETA: <span style="color:var(--amber);text-shadow:var(--amber-glow)">83ë¶„</span></div>
          <!-- ASCII Art: Ablative Coating -->
          <div class="ascii-panel amber-ascii">
            <div class="ascii-panel-label">ì‚­ë§ˆ ì—´ì°¨í ë„í¬</div>
            <pre class="ascii-art amber-art">   ___________
  /  RE-ENTRY  \
 |  >>>>>>>>>>>|â† heat flux
 |[=ABLATIVE==]|â† char layer
 |[============]â† virgin
 |  CAPSULE    |
  \___________/
 TEMP: 1,640Â°C â–²
[COAT 45%â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘]</pre>
          </div>
        </div>

        <!-- Empty queue slot -->
        <div class="empty-slot">
          ë¹ˆ ìŠ¬ë¡¯ â€” ì—°êµ¬ ì¶”ê°€ ê°€ëŠ¥<br>
          <span style="font-size:9px">[íŠ¸ë¦¬ì—ì„œ ê¸°ìˆ  ì„ íƒ]</span>
        </div>

        <!-- RP Sources -->
        <div class="rp-section">
          <div class="rp-section-title">RP ìƒì‚° í˜„í™©</div>
          <div class="lab-item">
            <span>ê¸°ì´ˆ ì—°êµ¬ì†Œ Lv.2</span>
            <span class="lab-rate">+5 RP/min</span>
          </div>
          <div class="lab-item">
            <span>ì¶”ì§„ ì—°êµ¬ì†Œ Lv.1</span>
            <span class="lab-rate">+3 RP/min</span>
          </div>
          <div class="total-rate">
            <span>TOTAL</span>
            <span>+8 RP/min</span>
          </div>
        </div>

        <!-- Consumed resources note -->
        <div style="margin-top:12px; border-top:1px solid #0d2016; padding-top:8px;">
          <div class="rp-section-title">ì†Œëª¨ ì¤‘ì¸ ìì›</div>
          <div class="lab-item">
            <span>CFRP 30kg</span>
            <span style="color:var(--amber);font-size:10px">S03ìš©</span>
          </div>
          <div class="lab-item">
            <span>RP 700</span>
            <span style="color:var(--amber-dim);font-size:10px">T02ìš©</span>
          </div>
        </div>

        <!-- Research Lab ASCII Visualization -->
        <div class="lab-viz-panel">
          <div class="lab-viz-header">RESEARCH LAB â€” SECTOR 3</div>
          <pre class="lab-ascii">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [TERMINAL]  [SCOPE]   â”‚
â”‚   ____        ____     â”‚
â”‚  |    |      (    )    â”‚
â”‚  |COMP|       )  (     â”‚
â”‚  |UTER|      (MICRO)   â”‚
â”‚  |____|      (SCOPE)   â”‚
â”‚                        â”‚
â”‚  ~~~~~~~~~~~~~~~~~~~~  â”‚
â”‚  POWER: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 94%   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</pre>
        </div>

      </div>
    </div>

    <!-- === CENTER PANEL â€” TECH TREE === -->
    <div id="panel-center">
      <div id="tree-container">

        <!-- Branch headers -->
        <div class="branch-headers">
          <div class="branch-header">êµ¬ì¡° ê¸°ìˆ </div>
          <div class="branch-header">ì¶”ì§„ ê¸°ìˆ </div>
          <div class="branch-header">í•­ì „ ê¸°ìˆ </div>
          <div class="branch-header">ì—´ ê´€ë¦¬</div>
          <div class="branch-header">ìš´ìš© ê¸°ìˆ </div>
          <div class="branch-header locked-branch">ë‹¬ ê¸°ìˆ  ???</div>
        </div>

        <!-- Tech Tree SVG -->
        <svg id="tree-svg" viewBox="0 0 900 760" xmlns="http://www.w3.org/2000/svg">
          <defs>
            <!-- Arrow marker for connections -->
            <marker id="arr-green" markerWidth="6" markerHeight="6" refX="5" refY="3" orient="auto">
              <path d="M0,0 L6,3 L0,6 Z" fill="#1a5c34"/>
            </marker>
            <marker id="arr-green-mid" markerWidth="6" markerHeight="6" refX="5" refY="3" orient="auto">
              <path d="M0,0 L6,3 L0,6 Z" fill="#00994d"/>
            </marker>
            <marker id="arr-amber" markerWidth="6" markerHeight="6" refX="5" refY="3" orient="auto">
              <path d="M0,0 L6,3 L0,6 Z" fill="#7a5100"/>
            </marker>
            <marker id="arr-locked" markerWidth="6" markerHeight="6" refX="5" refY="3" orient="auto">
              <path d="M0,0 L6,3 L0,6 Z" fill="#1a2a1a"/>
            </marker>
            <!-- CRT scan line effect on SVG -->
            <filter id="crt-glow">
              <feGaussianBlur stdDeviation="1.5" result="blur"/>
              <feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge>
            </filter>
            <filter id="glow-strong">
              <feGaussianBlur stdDeviation="3" result="blur"/>
              <feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge>
            </filter>
            <!-- Scanline pattern on SVG -->
            <pattern id="scanlines" x="0" y="0" width="1" height="4" patternUnits="userSpaceOnUse">
              <rect x="0" y="2" width="1" height="2" fill="rgba(0,0,0,0.12)"/>
            </pattern>
          </defs>

          <!-- ======================================================
               COLUMN X POSITIONS (centers):
               Col 1 (êµ¬ì¡°):  75
               Col 2 (ì¶”ì§„): 225
               Col 3 (í•­ì „): 375
               Col 4 (ì—´):   525
               Col 5 (ìš´ìš©): 675
               Col 6 (ë‹¬):   825
               Node width: 120, height: 52
               Node half-w: 60, half-h: 26
               Row Y positions (centers): R1=50, R2=130, R3=210, R4=290, R5=370, R6=450, R7=530, R8=610, R9=690
          ====================================================== -->

          <!-- ===================== CONNECTIONS ===================== -->
          <!-- Struct branch connections -->
          <line x1="75" y1="76"  x2="75"  y2="104" stroke="#00e676" stroke-width="1.5" marker-end="url(#arr-green-mid)" filter="url(#crt-glow)"/>
          <line x1="75" y1="156" x2="75"  y2="184" stroke="#00e676" stroke-width="1.5" marker-end="url(#arr-green-mid)" filter="url(#crt-glow)"/>
          <line x1="75" y1="236" x2="75"  y2="264" stroke="#ffab00" stroke-width="1.5" stroke-dasharray="4 2" marker-end="url(#arr-amber)"/>
          <!-- S02+S03 -> S04 (dual prereq) -->
          <line x1="75" y1="316" x2="75"  y2="344" stroke="#1a5c34" stroke-width="1" stroke-dasharray="3 3" marker-end="url(#arr-green)"/>
          <line x1="75" y1="396" x2="75"  y2="424" stroke="#1a2a1a" stroke-width="1" stroke-dasharray="2 4" marker-end="url(#arr-locked)"/>
          <line x1="75" y1="476" x2="75"  y2="504" stroke="#1a2a1a" stroke-width="1" stroke-dasharray="2 4" marker-end="url(#arr-locked)"/>
          <line x1="75" y1="556" x2="75"  y2="584" stroke="#1a2a1a" stroke-width="1" stroke-dasharray="2 4" marker-end="url(#arr-locked)"/>

          <!-- Propulsion connections -->
          <line x1="225" y1="76"  x2="225" y2="104" stroke="#00e676" stroke-width="1.5" marker-end="url(#arr-green-mid)" filter="url(#crt-glow)"/>
          <line x1="225" y1="156" x2="225" y2="184" stroke="#ffab00" stroke-width="1.5" stroke-dasharray="4 2" marker-end="url(#arr-amber)"/>
          <!-- P02 also -> P05 -->
          <line x1="225" y1="156" x2="225" y2="264" stroke="#1a5c34" stroke-width="1" stroke-dasharray="3 2" marker-end="url(#arr-green)" opacity="0.5"/>
          <line x1="225" y1="236" x2="225" y2="264" stroke="#1a5c34" stroke-width="1" stroke-dasharray="3 3" marker-end="url(#arr-green)"/>
          <line x1="225" y1="316" x2="225" y2="344" stroke="#1a2a1a" stroke-width="1" stroke-dasharray="2 4" marker-end="url(#arr-locked)"/>
          <line x1="225" y1="396" x2="225" y2="424" stroke="#1a2a1a" stroke-width="1" stroke-dasharray="2 4" marker-end="url(#arr-locked)"/>
          <line x1="225" y1="476" x2="225" y2="504" stroke="#1a2a1a" stroke-width="1" stroke-dasharray="2 4" marker-end="url(#arr-locked)"/>
          <line x1="225" y1="556" x2="225" y2="584" stroke="#1a2a1a" stroke-width="1" stroke-dasharray="2 4" marker-end="url(#arr-locked)"/>
          <line x1="225" y1="636" x2="225" y2="664" stroke="#1a2a1a" stroke-width="1" stroke-dasharray="2 4" marker-end="url(#arr-locked)"/>

          <!-- Avionics connections -->
          <line x1="375" y1="76"  x2="375" y2="104" stroke="#00e676" stroke-width="1.5" marker-end="url(#arr-green-mid)" filter="url(#crt-glow)"/>
          <line x1="375" y1="156" x2="375" y2="184" stroke="#1a2a1a" stroke-width="1" stroke-dasharray="2 4" marker-end="url(#arr-locked)"/>
          <line x1="375" y1="236" x2="375" y2="264" stroke="#1a2a1a" stroke-width="1" stroke-dasharray="2 4" marker-end="url(#arr-locked)"/>
          <line x1="375" y1="316" x2="375" y2="344" stroke="#1a2a1a" stroke-width="1" stroke-dasharray="2 4" marker-end="url(#arr-locked)"/>

          <!-- Thermal connections -->
          <line x1="525" y1="76"  x2="525" y2="104" stroke="#ffab00" stroke-width="1.5" stroke-dasharray="4 2" marker-end="url(#arr-amber)"/>
          <line x1="525" y1="156" x2="525" y2="184" stroke="#1a2a1a" stroke-width="1" stroke-dasharray="2 4" marker-end="url(#arr-locked)"/>
          <line x1="525" y1="236" x2="525" y2="264" stroke="#1a2a1a" stroke-width="1" stroke-dasharray="2 4" marker-end="url(#arr-locked)"/>
          <line x1="525" y1="316" x2="525" y2="344" stroke="#1a2a1a" stroke-width="1" stroke-dasharray="2 4" marker-end="url(#arr-locked)"/>

          <!-- Operations connections -->
          <line x1="675" y1="76"  x2="675" y2="104" stroke="#00e676" stroke-width="1.5" marker-end="url(#arr-green-mid)" filter="url(#crt-glow)"/>
          <line x1="675" y1="156" x2="675" y2="184" stroke="#1a5c34" stroke-width="1.5" marker-end="url(#arr-green)"/>
          <line x1="675" y1="236" x2="675" y2="264" stroke="#1a2a1a" stroke-width="1" stroke-dasharray="2 4" marker-end="url(#arr-locked)"/>
          <line x1="675" y1="316" x2="675" y2="344" stroke="#1a2a1a" stroke-width="1" stroke-dasharray="2 4" marker-end="url(#arr-locked)"/>

          <!-- Cross-branch: S02+S03 converge to S04 from side -->
          <line x1="75" y1="210" x2="60" y2="210" stroke="#ffab00" stroke-width="1" stroke-dasharray="2 3" opacity="0.4"/>
          <line x1="60" y1="210" x2="60" y2="290" stroke="#ffab00" stroke-width="1" stroke-dasharray="2 3" opacity="0.4"/>
          <line x1="60" y1="290" x2="15" y2="290" stroke="#ffab00" stroke-width="1" stroke-dasharray="2 3" opacity="0.4" marker-end="url(#arr-amber)"/>

          <!-- ===================== NODES ===================== -->

          <!-- ======= COLUMN 1: êµ¬ì¡° ê¸°ìˆ  ======= -->
          <!-- S01 COMPLETE -->
          <g class="tech-node" data-id="S01" onclick="selectTech('S01')" style="cursor:pointer">
            <rect x="15" y="24" width="120" height="52" fill="#011a0a" stroke="#00e676" stroke-width="1.5" filter="url(#crt-glow)"/>
            <rect x="15" y="24" width="120" height="3" fill="#00e676" opacity="0.3"/>
            <text x="75" y="41" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="9" fill="#1a5c34" letter-spacing="1">COMPLETE</text>
            <text x="75" y="56" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="11" fill="#00e676" filter="url(#crt-glow)" letter-spacing="1">S01 ê¸°ì´ˆ ìš©ì ‘ìˆ </text>
            <text x="125" y="40" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="14" fill="#00e676" filter="url(#glow-strong)">âœ“</text>
            <rect x="15" y="24" width="120" height="52" fill="url(#scanlines)" opacity="0.5"/>
          </g>

          <!-- S02 COMPLETE -->
          <g class="tech-node" data-id="S02" onclick="selectTech('S02')" style="cursor:pointer">
            <rect x="15" y="104" width="120" height="52" fill="#011a0a" stroke="#00e676" stroke-width="1.5" filter="url(#crt-glow)"/>
            <rect x="15" y="104" width="120" height="3" fill="#00e676" opacity="0.3"/>
            <text x="75" y="121" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="9" fill="#1a5c34" letter-spacing="1">COMPLETE</text>
            <text x="75" y="136" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="11" fill="#00e676" filter="url(#crt-glow)" letter-spacing="1">S02 ì•Œë£¨ë¯¸ëŠ„ ê°€ê³µ</text>
            <text x="125" y="120" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="14" fill="#00e676" filter="url(#glow-strong)">âœ“</text>
            <rect x="15" y="104" width="120" height="52" fill="url(#scanlines)" opacity="0.5"/>
          </g>

          <!-- S03 IN PROGRESS (67%) -->
          <g class="tech-node" data-id="S03" onclick="selectTech('S03')" style="cursor:pointer">
            <rect x="15" y="184" width="120" height="52" fill="#0a0700" stroke="#ffab00" stroke-width="1.5" stroke-dasharray="6 2"/>
            <text x="75" y="201" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="9" fill="#7a5100" letter-spacing="1">IN PROGRESS â–¶</text>
            <text x="75" y="214" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="10" fill="#ffab00" letter-spacing="1">S03 CFRP ì ì¸µ</text>
            <!-- progress bar inside node -->
            <rect x="19" y="220" width="112" height="6" fill="#1a0a00"/>
            <rect x="19" y="220" width="75" height="6" fill="#ffab00" opacity="0.8"/>
            <text x="75" y="231" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="8" fill="#ffab00">67%</text>
            <rect x="15" y="184" width="120" height="52" fill="url(#scanlines)" opacity="0.4"/>
          </g>

          <!-- S04 AVAILABLE -->
          <g class="tech-node" data-id="S04" onclick="selectTech('S04')" style="cursor:pointer">
            <rect x="15" y="264" width="120" height="52" fill="#010f04" stroke="#00994d" stroke-width="1.5"/>
            <rect x="15" y="264" width="120" height="3" fill="#00994d" opacity="0.2"/>
            <text x="75" y="281" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="9" fill="#00994d" letter-spacing="1">AVAILABLE</text>
            <text x="75" y="294" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="10.5" fill="#88cc99" letter-spacing="1">S04 í‹°íƒ€ëŠ„ ê°€ê³µ</text>
            <text x="75" y="307" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="9" fill="#00994d">500 RP</text>
            <rect x="15" y="264" width="120" height="52" fill="url(#scanlines)" opacity="0.4"/>
          </g>

          <!-- S05 LOCKED -->
          <g class="tech-node" data-id="S05" onclick="selectTech('S05')" style="cursor:pointer">
            <rect x="15" y="344" width="120" height="52" fill="#0a0f0a" stroke="#1a2a1a" stroke-width="1"/>
            <text x="65" y="368" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="18" fill="#2a3a2a">ğŸ”’</text>
            <text x="75" y="385" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="9.5" fill="#2a3a2a">S05 êµ¬ì¡° ê²½ëŸ‰í™” II</text>
            <rect x="15" y="344" width="120" height="52" fill="url(#scanlines)" opacity="0.3"/>
          </g>

          <!-- S06 LOCKED -->
          <g class="tech-node" data-id="S06" onclick="selectTech('S06')" style="cursor:pointer">
            <rect x="15" y="424" width="120" height="52" fill="#0a0f0a" stroke="#1a2a1a" stroke-width="1"/>
            <text x="65" y="448" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="18" fill="#2a3a2a">ğŸ”’</text>
            <text x="75" y="465" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="9.5" fill="#2a3a2a">S06 ë³µí•©ì¬ íŒ¨ë„</text>
            <rect x="15" y="424" width="120" height="52" fill="url(#scanlines)" opacity="0.3"/>
          </g>

          <!-- S07 LOCKED -->
          <g class="tech-node" data-id="S07" onclick="selectTech('S07')" style="cursor:pointer">
            <rect x="15" y="504" width="120" height="52" fill="#0a0f0a" stroke="#1a2a1a" stroke-width="1"/>
            <text x="65" y="528" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="18" fill="#2a3a2a">ğŸ”’</text>
            <text x="75" y="545" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="9" fill="#2a3a2a">S07 íƒ„ì†Œë‚˜ë…¸íŠœë¸Œ</text>
            <rect x="15" y="504" width="120" height="52" fill="url(#scanlines)" opacity="0.3"/>
          </g>

          <!-- ======= COLUMN 2: ì¶”ì§„ ê¸°ìˆ  ======= -->
          <!-- P01 COMPLETE -->
          <g class="tech-node" data-id="P01" onclick="selectTech('P01')" style="cursor:pointer">
            <rect x="165" y="24" width="120" height="52" fill="#011a0a" stroke="#00e676" stroke-width="1.5" filter="url(#crt-glow)"/>
            <rect x="165" y="24" width="120" height="3" fill="#00e676" opacity="0.3"/>
            <text x="225" y="41" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="9" fill="#1a5c34" letter-spacing="1">COMPLETE</text>
            <text x="225" y="56" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="10" fill="#00e676" filter="url(#crt-glow)" letter-spacing="1">P01 ê³ ì•• ì—°ì†Œì‹¤ I</text>
            <text x="275" y="40" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="14" fill="#00e676" filter="url(#glow-strong)">âœ“</text>
            <rect x="165" y="24" width="120" height="52" fill="url(#scanlines)" opacity="0.5"/>
          </g>

          <!-- P02 COMPLETE -->
          <g class="tech-node" data-id="P02" onclick="selectTech('P02')" style="cursor:pointer">
            <rect x="165" y="104" width="120" height="52" fill="#011a0a" stroke="#00e676" stroke-width="1.5" filter="url(#crt-glow)"/>
            <rect x="165" y="104" width="120" height="3" fill="#00e676" opacity="0.3"/>
            <text x="225" y="121" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="9" fill="#1a5c34" letter-spacing="1">COMPLETE</text>
            <text x="225" y="136" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="10" fill="#00e676" filter="url(#crt-glow)" letter-spacing="1">P02 í„°ë³´íŒí”„ ê¸°ì´ˆ</text>
            <text x="275" y="120" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="14" fill="#00e676" filter="url(#glow-strong)">âœ“</text>
            <rect x="165" y="104" width="120" height="52" fill="url(#scanlines)" opacity="0.5"/>
          </g>

          <!-- P03 IN PROGRESS (23%) -->
          <g class="tech-node" data-id="P03" onclick="selectTech('P03')" style="cursor:pointer">
            <rect x="165" y="184" width="120" height="52" fill="#0a0700" stroke="#ffab00" stroke-width="1.5" stroke-dasharray="6 2"/>
            <text x="225" y="201" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="9" fill="#7a5100" letter-spacing="1">IN PROGRESS â–¶</text>
            <text x="225" y="214" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="10" fill="#ffab00" letter-spacing="1">P03 ì¬ìƒ ëƒ‰ê° ë…¸ì¦</text>
            <rect x="169" y="220" width="112" height="6" fill="#1a0a00"/>
            <rect x="169" y="220" width="26" height="6" fill="#ffab00" opacity="0.8"/>
            <text x="225" y="231" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="8" fill="#ffab00">23%</text>
            <rect x="165" y="184" width="120" height="52" fill="url(#scanlines)" opacity="0.4"/>
          </g>

          <!-- P04 AVAILABLE -->
          <g class="tech-node" data-id="P04" onclick="selectTech('P04')" style="cursor:pointer">
            <rect x="165" y="264" width="120" height="52" fill="#010f04" stroke="#00994d" stroke-width="1.5"/>
            <rect x="165" y="264" width="120" height="3" fill="#00994d" opacity="0.2"/>
            <text x="225" y="281" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="9" fill="#00994d" letter-spacing="1">AVAILABLE</text>
            <text x="225" y="294" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="10" fill="#88cc99" letter-spacing="1">P04 í•€ì¹˜ ì—°ì†Œ</text>
            <text x="225" y="307" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="9" fill="#00994d">600 RP</text>
            <rect x="165" y="264" width="120" height="52" fill="url(#scanlines)" opacity="0.4"/>
          </g>

          <!-- P05 AVAILABLE -->
          <g class="tech-node" data-id="P05" onclick="selectTech('P05')" style="cursor:pointer">
            <rect x="165" y="344" width="120" height="52" fill="#010f04" stroke="#00994d" stroke-width="1.5"/>
            <rect x="165" y="344" width="120" height="3" fill="#00994d" opacity="0.2"/>
            <text x="225" y="361" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="9" fill="#00994d" letter-spacing="1">AVAILABLE</text>
            <text x="225" y="374" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="10" fill="#88cc99" letter-spacing="1">P05 ìŠ¤í…Œì´ì§€ ë¶„ë¦¬</text>
            <text x="225" y="387" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="9" fill="#00994d">450 RP</text>
            <rect x="165" y="344" width="120" height="52" fill="url(#scanlines)" opacity="0.4"/>
          </g>

          <!-- P06 LOCKED -->
          <g class="tech-node" data-id="P06" onclick="selectTech('P06')" style="cursor:pointer">
            <rect x="165" y="424" width="120" height="52" fill="#0a0f0a" stroke="#1a2a1a" stroke-width="1"/>
            <text x="215" y="448" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="18" fill="#2a3a2a">ğŸ”’</text>
            <text x="225" y="465" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="9.5" fill="#2a3a2a">P06 ë©”íƒ„ ì—”ì§„</text>
            <rect x="165" y="424" width="120" height="52" fill="url(#scanlines)" opacity="0.3"/>
          </g>

          <!-- P07~10 LOCKED (grouped) -->
          <g class="tech-node" data-id="P07" onclick="selectTech('P07')" style="cursor:pointer">
            <rect x="165" y="504" width="120" height="52" fill="#0a0f0a" stroke="#1a2a1a" stroke-width="1"/>
            <text x="215" y="528" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="18" fill="#2a3a2a">ğŸ”’</text>
            <text x="225" y="545" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="9" fill="#2a3a2a">P07~10 (Phase 4+)</text>
            <rect x="165" y="504" width="120" height="52" fill="url(#scanlines)" opacity="0.3"/>
          </g>

          <!-- ======= COLUMN 3: í•­ì „ ê¸°ìˆ  ======= -->
          <!-- A01 COMPLETE -->
          <g class="tech-node" data-id="A01" onclick="selectTech('A01')" style="cursor:pointer">
            <rect x="315" y="24" width="120" height="52" fill="#011a0a" stroke="#00e676" stroke-width="1.5" filter="url(#crt-glow)"/>
            <rect x="315" y="24" width="120" height="3" fill="#00e676" opacity="0.3"/>
            <text x="375" y="41" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="9" fill="#1a5c34" letter-spacing="1">COMPLETE</text>
            <text x="375" y="56" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="10" fill="#00e676" filter="url(#crt-glow)" letter-spacing="1">A01 ìì´ë¡œ ì•ˆì •í™”</text>
            <text x="425" y="40" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="14" fill="#00e676" filter="url(#glow-strong)">âœ“</text>
            <rect x="315" y="24" width="120" height="52" fill="url(#scanlines)" opacity="0.5"/>
          </g>

          <!-- A02 AVAILABLE -->
          <g class="tech-node" data-id="A02" onclick="selectTech('A02')" style="cursor:pointer">
            <rect x="315" y="104" width="120" height="52" fill="#010f04" stroke="#00994d" stroke-width="1.5"/>
            <rect x="315" y="104" width="120" height="3" fill="#00994d" opacity="0.2"/>
            <text x="375" y="121" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="9" fill="#00994d" letter-spacing="1">AVAILABLE</text>
            <text x="375" y="134" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="10" fill="#88cc99" letter-spacing="1">A02 ê´€ì„± í•­ë²•(INS)</text>
            <text x="375" y="147" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="9" fill="#00994d">350 RP + íšŒë¡œê¸°íŒ 5</text>
            <rect x="315" y="104" width="120" height="52" fill="url(#scanlines)" opacity="0.4"/>
          </g>

          <!-- A03 LOCKED -->
          <g class="tech-node" data-id="A03" onclick="selectTech('A03')" style="cursor:pointer">
            <rect x="315" y="184" width="120" height="52" fill="#0a0f0a" stroke="#1a2a1a" stroke-width="1"/>
            <text x="365" y="208" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="18" fill="#2a3a2a">ğŸ”’</text>
            <text x="375" y="225" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="9.5" fill="#2a3a2a">A03 GPS ë³´ì •</text>
            <rect x="315" y="184" width="120" height="52" fill="url(#scanlines)" opacity="0.3"/>
          </g>

          <!-- A04 LOCKED -->
          <g class="tech-node" data-id="A04" onclick="selectTech('A04')" style="cursor:pointer">
            <rect x="315" y="264" width="120" height="52" fill="#0a0f0a" stroke="#1a2a1a" stroke-width="1"/>
            <text x="365" y="288" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="18" fill="#2a3a2a">ğŸ”’</text>
            <text x="375" y="305" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="9.5" fill="#2a3a2a">A04 ììœ¨ ë¹„í–‰</text>
            <rect x="315" y="264" width="120" height="52" fill="url(#scanlines)" opacity="0.3"/>
          </g>

          <!-- ======= COLUMN 4: ì—´ ê´€ë¦¬ ======= -->
          <!-- T01 COMPLETE -->
          <g class="tech-node" data-id="T01" onclick="selectTech('T01')" style="cursor:pointer">
            <rect x="465" y="24" width="120" height="52" fill="#011a0a" stroke="#00e676" stroke-width="1.5" filter="url(#crt-glow)"/>
            <rect x="465" y="24" width="120" height="3" fill="#00e676" opacity="0.3"/>
            <text x="525" y="41" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="9" fill="#1a5c34" letter-spacing="1">COMPLETE</text>
            <text x="525" y="56" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="10" fill="#00e676" filter="url(#crt-glow)" letter-spacing="1">T01 ê¸°ì´ˆ ì ˆì—´ì¬</text>
            <text x="575" y="40" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="14" fill="#00e676" filter="url(#glow-strong)">âœ“</text>
            <rect x="465" y="24" width="120" height="52" fill="url(#scanlines)" opacity="0.5"/>
          </g>

          <!-- T02 IN PROGRESS (45%) -->
          <g class="tech-node" data-id="T02" onclick="selectTech('T02')" style="cursor:pointer">
            <rect x="465" y="104" width="120" height="52" fill="#0a0700" stroke="#ffab00" stroke-width="1.5" stroke-dasharray="6 2"/>
            <text x="525" y="121" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="9" fill="#7a5100" letter-spacing="1">IN PROGRESS â–¶</text>
            <text x="525" y="134" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="10" fill="#ffab00" letter-spacing="1">T02 ì‚­ë§ˆ ì½”íŒ…</text>
            <rect x="469" y="140" width="112" height="6" fill="#1a0a00"/>
            <rect x="469" y="140" width="50" height="6" fill="#ffab00" opacity="0.8"/>
            <text x="525" y="151" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="8" fill="#ffab00">45%</text>
            <rect x="465" y="104" width="120" height="52" fill="url(#scanlines)" opacity="0.4"/>
          </g>

          <!-- T03 LOCKED -->
          <g class="tech-node" data-id="T03" onclick="selectTech('T03')" style="cursor:pointer">
            <rect x="465" y="184" width="120" height="52" fill="#0a0f0a" stroke="#1a2a1a" stroke-width="1"/>
            <text x="515" y="208" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="18" fill="#2a3a2a">ğŸ”’</text>
            <text x="525" y="225" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="9.5" fill="#2a3a2a">T03 ëŠ¥ë™ ëƒ‰ê°</text>
            <rect x="465" y="184" width="120" height="52" fill="url(#scanlines)" opacity="0.3"/>
          </g>

          <!-- T04 LOCKED -->
          <g class="tech-node" data-id="T04" onclick="selectTech('T04')" style="cursor:pointer">
            <rect x="465" y="264" width="120" height="52" fill="#0a0f0a" stroke="#1a2a1a" stroke-width="1"/>
            <text x="515" y="288" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="18" fill="#2a3a2a">ğŸ”’</text>
            <text x="525" y="305" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="9.5" fill="#2a3a2a">T04 ì—´ì°¨í íƒ€ì¼</text>
            <rect x="465" y="264" width="120" height="52" fill="url(#scanlines)" opacity="0.3"/>
          </g>

          <!-- ======= COLUMN 5: ìš´ìš© ê¸°ìˆ  ======= -->
          <!-- O01 COMPLETE -->
          <g class="tech-node" data-id="O01" onclick="selectTech('O01')" style="cursor:pointer">
            <rect x="615" y="24" width="120" height="52" fill="#011a0a" stroke="#00e676" stroke-width="1.5" filter="url(#crt-glow)"/>
            <rect x="615" y="24" width="120" height="3" fill="#00e676" opacity="0.3"/>
            <text x="675" y="41" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="9" fill="#1a5c34" letter-spacing="1">COMPLETE</text>
            <text x="675" y="56" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="10" fill="#00e676" filter="url(#crt-glow)" letter-spacing="1">O01 ë°œì‚¬ ìë™í™” I</text>
            <text x="725" y="40" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="14" fill="#00e676" filter="url(#glow-strong)">âœ“</text>
            <rect x="615" y="24" width="120" height="52" fill="url(#scanlines)" opacity="0.5"/>
          </g>

          <!-- O02 COMPLETE -->
          <g class="tech-node" data-id="O02" onclick="selectTech('O02')" style="cursor:pointer">
            <rect x="615" y="104" width="120" height="52" fill="#011a0a" stroke="#00e676" stroke-width="1.5" filter="url(#crt-glow)"/>
            <rect x="615" y="104" width="120" height="3" fill="#00e676" opacity="0.3"/>
            <text x="675" y="121" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="9" fill="#1a5c34" letter-spacing="1">COMPLETE</text>
            <text x="675" y="136" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="10" fill="#00e676" filter="url(#crt-glow)" letter-spacing="1">O02 ì¹´ìš´íŠ¸ë‹¤ìš´</text>
            <text x="725" y="120" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="14" fill="#00e676" filter="url(#glow-strong)">âœ“</text>
            <rect x="615" y="104" width="120" height="52" fill="url(#scanlines)" opacity="0.5"/>
          </g>

          <!-- O03 AVAILABLE -->
          <g class="tech-node" data-id="O03" onclick="selectTech('O03')" style="cursor:pointer">
            <rect x="615" y="184" width="120" height="52" fill="#010f04" stroke="#00994d" stroke-width="1.5"/>
            <rect x="615" y="184" width="120" height="3" fill="#00994d" opacity="0.2"/>
            <text x="675" y="201" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="9" fill="#00994d" letter-spacing="1">AVAILABLE</text>
            <text x="675" y="214" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="10" fill="#88cc99" letter-spacing="1">O03 ë‚™í•˜ì‚° íšŒìˆ˜</text>
            <text x="675" y="227" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="9" fill="#00994d">400 RP</text>
            <rect x="615" y="184" width="120" height="52" fill="url(#scanlines)" opacity="0.4"/>
          </g>

          <!-- O04 LOCKED -->
          <g class="tech-node" data-id="O04" onclick="selectTech('O04')" style="cursor:pointer">
            <rect x="615" y="264" width="120" height="52" fill="#0a0f0a" stroke="#1a2a1a" stroke-width="1"/>
            <text x="665" y="288" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="18" fill="#2a3a2a">ğŸ”’</text>
            <text x="675" y="305" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="9.5" fill="#2a3a2a">O04 ì¬ì‚¬ìš© ë¡œì¼“</text>
            <rect x="615" y="264" width="120" height="52" fill="url(#scanlines)" opacity="0.3"/>
          </g>

          <!-- ======= COLUMN 6: ë‹¬ ê¸°ìˆ  (ALL LOCKED) ======= -->
          <!-- Lunar placeholder box -->
          <rect x="765" y="24" width="120" height="300" fill="#060908" stroke="#111a11" stroke-width="1" rx="0"/>
          <text x="825" y="80" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="22" fill="#111a11">???</text>
          <text x="825" y="110" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="9" fill="#111a11" letter-spacing="1">ë‹¬ íƒì‚¬ ê¸°ìˆ </text>
          <text x="825" y="126" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="9" fill="#0d1a0d">(Phase 4 í•„ìš”)</text>
          <text x="825" y="160" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="28" fill="#0d1a0d">ğŸ”’</text>
          <text x="825" y="200" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="8" fill="#0a120a">L01~L10</text>
          <text x="825" y="215" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="8" fill="#0a120a">ì ê¹€</text>
          <!-- Lunar sub-node hints -->
          <rect x="775" y="240" width="100" height="22" fill="#060908" stroke="#0d1a0d" stroke-width="1"/>
          <text x="825" y="255" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="8" fill="#0a120a">ë‹¬ ì°©ë¥™ì„  í”„ë ˆì„ ğŸ”’</text>
          <rect x="775" y="270" width="100" height="22" fill="#060908" stroke="#0d1a0d" stroke-width="1"/>
          <text x="825" y="285" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="8" fill="#0a120a">ISRU ìì› ì±„êµ´ ğŸ”’</text>
          <rect x="775" y="300" width="100" height="22" fill="#060908" stroke="#0d1a0d" stroke-width="1"/>
          <text x="825" y="315" text-anchor="middle" font-family="'Share Tech Mono',monospace" font-size="8" fill="#0a120a">ë‹¬ ì „ì§„ê¸°ì§€ ğŸ”’</text>

        </svg>

      </div>

      <!-- === COMPLETED TECHNOLOGIES ASCII PANEL === -->
      <div id="completed-panel">
        <div class="completed-panel-header">COMPLETED TECHNOLOGIES â€” 8 ê¸°ìˆ  ì™„ë£Œ</div>
        <div class="completed-tech-list">

          <div class="completed-tech-row">
            <span class="ctr-id">S01</span>
            <span class="ctr-name">ê¸°ì´ˆ ìš©ì ‘ìˆ </span>
            <span class="ctr-bar">â–“â–“â–“â–“â–“ DONE</span>
            <span class="ctr-icon"> /=\ </span>
          </div>
          <div class="completed-tech-row">
            <span class="ctr-id">S02</span>
            <span class="ctr-name">ì•Œë£¨ë¯¸ëŠ„ ê°€ê³µ</span>
            <span class="ctr-bar">â–“â–“â–“â–“â–“ DONE</span>
            <span class="ctr-icon"> [Al] </span>
          </div>
          <div class="completed-tech-row">
            <span class="ctr-id">P01</span>
            <span class="ctr-name">ê³ ì•• ì—°ì†Œì‹¤ I</span>
            <span class="ctr-bar">â–“â–“â–“â–“â–“ DONE</span>
            <span class="ctr-icon">)||(</span>
          </div>
          <div class="completed-tech-row">
            <span class="ctr-id">P02</span>
            <span class="ctr-name">í„°ë³´íŒí”„ ê¸°ì´ˆ</span>
            <span class="ctr-bar">â–“â–“â–“â–“â–“ DONE</span>
            <span class="ctr-icon"> &gt;&gt;&gt; </span>
          </div>
          <div class="completed-tech-row">
            <span class="ctr-id">A01</span>
            <span class="ctr-name">ìì´ë¡œìŠ¤ì½”í”„ ì•ˆì •í™”</span>
            <span class="ctr-bar">â–“â–“â–“â–“â–“ DONE</span>
            <span class="ctr-icon"> [â—‰] </span>
          </div>
          <div class="completed-tech-row">
            <span class="ctr-id">T01</span>
            <span class="ctr-name">ê¸°ì´ˆ ì ˆì—´ì¬</span>
            <span class="ctr-bar">â–“â–“â–“â–“â–“ DONE</span>
            <span class="ctr-icon"> â‰¡â‰¡â‰¡ </span>
          </div>
          <div class="completed-tech-row">
            <span class="ctr-id">O01</span>
            <span class="ctr-name">ë°œì‚¬ ìë™í™” I</span>
            <span class="ctr-bar">â–“â–“â–“â–“â–“ DONE</span>
            <span class="ctr-icon"> [â–¶] </span>
          </div>
          <div class="completed-tech-row">
            <span class="ctr-id">O02</span>
            <span class="ctr-name">ì¹´ìš´íŠ¸ë‹¤ìš´ ì‹œìŠ¤í…œ</span>
            <span class="ctr-bar">â–“â–“â–“â–“â–“ DONE</span>
            <span class="ctr-icon"> T-0 </span>
          </div>

          <!-- In-progress entries (partial) -->
          <div class="completed-tech-row" style="color:var(--amber-dim)">
            <span class="ctr-id" style="color:#5a3a00">S03</span>
            <span class="ctr-name" style="color:var(--amber-dim)">CFRP ì ì¸µ ê¸°ìˆ </span>
            <span class="ctr-bar" style="color:var(--amber)">â–“â–“â–“â–‘â–‘ 67%</span>
            <span class="ctr-icon" style="color:var(--amber);text-shadow:0 0 6px #ffab00"> /// </span>
          </div>
          <div class="completed-tech-row" style="color:var(--amber-dim)">
            <span class="ctr-id" style="color:#5a3a00">T02</span>
            <span class="ctr-name" style="color:var(--amber-dim)">ì‚­ë§ˆ ì½”íŒ…</span>
            <span class="ctr-bar" style="color:var(--amber)">â–“â–“â–‘â–‘â–‘ 45%</span>
            <span class="ctr-icon" style="color:var(--amber);text-shadow:0 0 6px #ffab00"> ~~~ </span>
          </div>

        </div>
      </div>

    </div>

    <!-- === RIGHT PANEL â€” TECH DETAIL === -->
    <div id="panel-right">
      <div class="panel-header">ê¸°ìˆ  ìƒì„¸</div>
      <div class="detail-scroll">

        <!-- DEFAULT: overview stats (visible when no tech selected) -->
        <div id="detail-overview">
          <div style="font-size:10px; letter-spacing:1px; color:var(--green-dim); margin-bottom:8px; padding-bottom:6px; border-bottom:1px solid #0d2016; text-transform:uppercase">
            > RESEARCH_OVERVIEW.DAT
          </div>

          <div class="overview-grid">
            <div class="ov-card">
              <div class="ov-num">8</div>
              <div class="ov-label">ì™„ë£Œ</div>
            </div>
            <div class="ov-card">
              <div class="ov-num amber">2</div>
              <div class="ov-label">ì§„í–‰ ì¤‘</div>
            </div>
            <div class="ov-card">
              <div class="ov-num">4</div>
              <div class="ov-label">í•´ê¸ˆ ê°€ëŠ¥</div>
            </div>
            <div class="ov-card">
              <div class="ov-num dim">24</div>
              <div class="ov-label">ì ê¹€</div>
            </div>
          </div>

          <div class="lunar-target">
            <div class="lt-num">29</div>
            <div class="lt-label">ë‹¬ ê¸°ìˆ ê¹Œì§€ ë‚¨ì€ ì—°êµ¬</div>
          </div>

          <div style="margin-top:14px; padding:8px; border:1px solid #0d2016; background:#010f04;">
            <div style="font-size:9px; letter-spacing:2px; color:var(--green-dim); text-transform:uppercase; margin-bottom:6px">ì´ ì—°êµ¬ ì†Œë¹„</div>
            <div class="detail-row">
              <span class="dr-key">ì´ RP ì§€ì¶œ</span>
              <span class="dr-val highlight">1,247 RP</span>
            </div>
            <div class="detail-row">
              <span class="dr-key">ì™„ë£Œìœ¨</span>
              <span class="dr-val">21%</span>
            </div>
            <div class="detail-row">
              <span class="dr-key">í™œì„± ì—°êµ¬ì†Œ</span>
              <span class="dr-val highlight">2ê°œ</span>
            </div>
          </div>

          <div style="margin-top:10px; font-size:10px; color:var(--green-dim); letter-spacing:1px; border:1px dashed #0d2016; padding:6px; text-align:center;">
            íŠ¸ë¦¬ì—ì„œ ê¸°ìˆ ì„ í´ë¦­í•˜ë©´<br>
            <span style="color:var(--green-text)">ìƒì„¸ ì •ë³´ê°€ í‘œì‹œë©ë‹ˆë‹¤.</span>
          </div>
        </div>

        <!-- TECH DETAIL (hidden by default, shown on click) -->
        <div id="detail-tech" class="detail-hidden">
          <div class="detail-tech-id" id="dt-id">S04</div>
          <div class="detail-tech-name" id="dt-name">í‹°íƒ€ëŠ„ ê°€ê³µ</div>
          <div class="detail-tech-en" id="dt-en">Ti-6Al-4V ALLOY PROCESSING</div>

          <hr class="detail-divider">

          <div class="detail-status-badge" id="dt-status-badge">AVAILABLE</div>

          <div class="detail-row">
            <span class="dr-key">ë¹„ìš©</span>
            <span class="dr-val highlight" id="dt-cost">â€”</span>
          </div>
          <div class="detail-row">
            <span class="dr-key">ì„ í–‰ ê¸°ìˆ </span>
            <span class="dr-val" id="dt-prereq">â€”</span>
          </div>
          <div class="detail-row" id="dt-eta-row" style="display:none">
            <span class="dr-key">ì˜ˆìƒ ì‹œê°„</span>
            <span class="dr-val" id="dt-eta">â€”</span>
          </div>

          <div class="detail-effects" id="dt-effects-wrap">
            <div class="effect-title">íš¨ê³¼</div>
            <div id="dt-effects"></div>
          </div>

          <div class="unlocks-section" id="dt-unlocks-wrap" style="display:none">
            <div class="unlocks-title">í•´ê¸ˆë˜ëŠ” ê±´ë¬¼/ê¸°ëŠ¥</div>
            <div id="dt-unlocks"></div>
          </div>

          <button class="btn-research" id="dt-btn" onclick="startResearch()">â–¶ ì—°êµ¬ ì‹œì‘</button>
          <div class="rp-check" id="dt-rp-check"></div>

          <!-- ASCII visualization for the selected tech -->
          <div id="dt-ascii-wrap" style="display:none">
            <div class="detail-ascii-label">// TECH VISUALIZATION</div>
            <pre class="detail-ascii-art" id="dt-ascii-art"></pre>
          </div>
        </div>

      </div>
    </div>

  </div><!-- end #content -->

  <!-- ===== BOTTOM BAR ===== -->
  <div id="bottom-bar">
    <div class="bb-item">RP ìˆ˜ì…: <span>+8/min</span></div>
    <div class="bb-item">ì´ RP ì§€ì¶œ: <span>1,247 RP</span></div>
    <div class="bb-hint">â˜… ì—°êµ¬ì†Œ ì—…ê·¸ë ˆì´ë“œ ì‹œ +5 RP/min ì¶”ê°€ íšë“ ê°€ëŠ¥</div>
    <div class="bb-item">ì™„ë£Œ ê¸°ìˆ : <span>8</span> / 38</div>
  </div>

</div><!-- end #main-wrapper -->

<!-- Tooltip -->
<div class="node-tooltip" id="tooltip"></div>

<script>
/* =============================================
   TECH DATA
============================================= */
const TECHS = {
  S01: {
    id: 'S01', name: 'ê¸°ì´ˆ ìš©ì ‘ìˆ ', en: 'BASIC WELDING',
    status: 'complete', branch: 'êµ¬ì¡° ê¸°ìˆ ',
    cost: '50 RP', prereq: 'ì—†ìŒ',
    effects: ['êµ¬ì¡° ê°•ë„ +15%', 'ê¸°ë³¸ ë¡œì¼“ í”„ë ˆì„ ì œì‘ í•´ê¸ˆ'],
    unlocks: [],
    eta: null, rp: 50
  },
  S02: {
    id: 'S02', name: 'ì•Œë£¨ë¯¸ëŠ„ ê°€ê³µ', en: 'AL-7075 PROCESSING',
    status: 'complete', branch: 'êµ¬ì¡° ê¸°ìˆ ',
    cost: '120 RP + Al-7075 50kg', prereq: 'S01 âœ“',
    effects: ['Al-7075 ì†Œëª¨ëŸ‰ -20%', 'ì¤‘ëŸ‰ êµ¬ì¡°ë¶€ ì œì‘ í•´ê¸ˆ'],
    unlocks: [],
    eta: null, rp: 120
  },
  S03: {
    id: 'S03', name: 'CFRP ì ì¸µ ê¸°ìˆ ', en: 'CFRP LAMINATION',
    status: 'progress', branch: 'êµ¬ì¡° ê¸°ìˆ ', pct: 67,
    cost: '300 RP + CFRP 30kg', prereq: 'S02 âœ“',
    effects: ['êµ¬ì¡° ì¤‘ëŸ‰ -25%', '1ë‹¨ íƒ‘ì¬ëŸ‰ ì¦ê°€', 'ê³ ê°•ë„ í˜ì–´ë§ í•´ê¸ˆ'],
    unlocks: [],
    eta: '47ë¶„', rp: 300
  },
  S04: {
    id: 'S04', name: 'í‹°íƒ€ëŠ„ ê°€ê³µ', en: 'Ti-6Al-4V ALLOY PROCESSING',
    status: 'available', branch: 'êµ¬ì¡° ê¸°ìˆ ',
    cost: '500 RP + Ti-Ore 100kg', prereq: 'S02 âœ“ + S03 (ì§„í–‰ì¤‘)',
    effects: ['ê³ ì˜¨ êµ¬ì¡°ë¬¼ ì œì‘ í•´ê¸ˆ', 'ì—”ì§„ ë§ˆìš´íŠ¸ í’ˆì§ˆ +30%', 'Ti-6Al-4V ì†Œëª¨ëŸ‰ -15%'],
    unlocks: ['ì •ë°€ ê¸°ê³„ ê°€ê³µì†Œ', 'ì¶”ì§„ ì—°êµ¬ì†Œ Lv.2'],
    eta: '~2ì‹œê°„ (S03 ì™„ë£Œ í›„)', rp: 500
  },
  S05: {
    id: 'S05', name: 'êµ¬ì¡° ê²½ëŸ‰í™” II', en: 'STRUCTURE LIGHTWEIGHTING II',
    status: 'locked', branch: 'êµ¬ì¡° ê¸°ìˆ ',
    cost: '800 RP', prereq: 'S04 + Phase 3',
    effects: ['êµ¬ì¡° ì´ì¤‘ëŸ‰ -35%', 'ì—°ë£Œ íƒ‘ì¬ ì—¬ìœ  +8%'],
    unlocks: [], eta: null, rp: 800
  },
  S06: {
    id: 'S06', name: 'ë³µí•©ì¬ ìƒŒë“œìœ„ì¹˜ íŒ¨ë„', en: 'COMPOSITE SANDWICH PANEL',
    status: 'locked', branch: 'êµ¬ì¡° ê¸°ìˆ ',
    cost: '1,200 RP', prereq: 'S05',
    effects: ['ê°•ì„± +50%', 'êµ¬ì¡° í”¼ë¡œ íŒŒê´´ ì €í•­ +40%'],
    unlocks: [], eta: null, rp: 1200
  },
  S07: {
    id: 'S07', name: 'íƒ„ì†Œ ë‚˜ë…¸íŠœë¸Œ ê°•í™”', en: 'CARBON NANOTUBE REINFORCEMENT',
    status: 'locked', branch: 'êµ¬ì¡° ê¸°ìˆ ',
    cost: '2,000 RP', prereq: 'S06 + Phase 4',
    effects: ['ê°•ë„ ìµœê³  ë“±ê¸‰ ë„ë‹¬', 'ë‹¬ êµ¬ì¡°ë¬¼ ì œì‘ í•´ê¸ˆ'],
    unlocks: [], eta: null, rp: 2000
  },

  P01: {
    id: 'P01', name: 'ê³ ì•• ì—°ì†Œì‹¤ I', en: 'HIGH-PRESSURE CHAMBER I',
    status: 'complete', branch: 'ì¶”ì§„ ê¸°ìˆ ',
    cost: '80 RP', prereq: 'ì—†ìŒ',
    effects: ['ì—°ì†Œ íš¨ìœ¨ +10%', 'ê¸°ë³¸ ì—”ì§„ ì œì‘ í•´ê¸ˆ'],
    unlocks: [], eta: null, rp: 80
  },
  P02: {
    id: 'P02', name: 'í„°ë³´íŒí”„ ê¸°ì´ˆ', en: 'TURBOPUMP FUNDAMENTALS',
    status: 'complete', branch: 'ì¶”ì§„ ê¸°ìˆ ',
    cost: '150 RP', prereq: 'P01 âœ“',
    effects: ['ì—°ë£Œ ê³µê¸‰ ì••ë ¥ +25%', 'í„°ë³´íŒí”„ ì—”ì§„ í•´ê¸ˆ'],
    unlocks: [], eta: null, rp: 150
  },
  P03: {
    id: 'P03', name: 'ì¬ìƒ ëƒ‰ê° ë…¸ì¦', en: 'REGENERATIVE COOLING NOZZLE',
    status: 'progress', branch: 'ì¶”ì§„ ê¸°ìˆ ', pct: 23,
    cost: '400 RP + Inconel-718 20kg', prereq: 'P02 âœ“',
    effects: ['ì—”ì§„ Isp +12%', 'ë…¸ì¦ ê³¼ì—´ í™•ë¥  -30%', 'ì—°ì† ì—°ì†Œ ì‹œê°„ +40%'],
    unlocks: [],
    eta: '~3ì‹œê°„ 12ë¶„', rp: 400
  },
  P04: {
    id: 'P04', name: 'í•€ì¹˜ ì—°ì†Œ ì‚¬ì´í´', en: 'PINTLE COMBUSTION CYCLE',
    status: 'available', branch: 'ì¶”ì§„ ê¸°ìˆ ',
    cost: '600 RP', prereq: 'P03 (ì§„í–‰ì¤‘)',
    effects: ['ì¶”ë ¥/ì¤‘ëŸ‰ë¹„ +18%', 'ìŠ¤ë¡œí‹€ ë²”ìœ„ 20~100%', 'ì°©ë¥™ ì—­ì¶”ì§„ í•´ê¸ˆ'],
    unlocks: ['ì¬ì°©ë¥™ ëª¨ë“ˆ'],
    eta: 'ì˜ˆìƒ 2ì‹œê°„', rp: 600
  },
  P05: {
    id: 'P05', name: 'ìŠ¤í…Œì´ì§€ ë¶„ë¦¬ ê¸°ìˆ ', en: 'STAGE SEPARATION',
    status: 'available', branch: 'ì¶”ì§„ ê¸°ìˆ ',
    cost: '450 RP', prereq: 'P02 âœ“',
    effects: ['ë‹¤ë‹¨ ë¡œì¼“ ì¡°ë¦½ í•´ê¸ˆ', 'í˜ì´ë¡œë“œ íš¨ìœ¨ +20%', '2ë‹¨ ë¡œì¼“ ë¯¸ì…˜ í•´ê¸ˆ'],
    unlocks: ['ì¡°ë¦½ë™ Lv.2', '2ë‹¨ ë¡œì¼“ ì„¤ê³„ë„'],
    eta: 'ì˜ˆìƒ 1ì‹œê°„ 30ë¶„', rp: 450
  },
  P06: {
    id: 'P06', name: 'ë©”íƒ„ ì—”ì§„', en: 'METHANE ENGINE',
    status: 'locked', branch: 'ì¶”ì§„ ê¸°ìˆ ',
    cost: '1,000 RP', prereq: 'P04 + Phase 3',
    effects: ['Isp +25% (vs ì¼€ë¡œì‹ )', 'ISRU ì—°ë£Œ í˜¸í™˜'],
    unlocks: [], eta: null, rp: 1000
  },
  P07: {
    id: 'P07', name: 'P07~10 (Phase 4+)', en: 'ADVANCED PROPULSION (LOCKED)',
    status: 'locked', branch: 'ì¶”ì§„ ê¸°ìˆ ',
    cost: '???', prereq: 'Phase 4 í•„ìš”',
    effects: ['ê³ ê¸‰ ì¶”ì§„ ê¸°ìˆ  ì˜ˆì •'],
    unlocks: [], eta: null, rp: 9999
  },

  A01: {
    id: 'A01', name: 'ìì´ë¡œìŠ¤ì½”í”„ ì•ˆì •í™”', en: 'GYROSCOPE STABILIZATION',
    status: 'complete', branch: 'í•­ì „ ê¸°ìˆ ',
    cost: '100 RP', prereq: 'ì—†ìŒ',
    effects: ['ë¹„í–‰ ì•ˆì •ì„± +20%', 'ìì„¸ ì œì–´ í•´ê¸ˆ', 'ì‹¤íŒ¨ìœ¨ -5%'],
    unlocks: [], eta: null, rp: 100
  },
  A02: {
    id: 'A02', name: 'ê´€ì„± í•­ë²• ì‹œìŠ¤í…œ', en: 'INERTIAL NAVIGATION SYSTEM',
    status: 'available', branch: 'í•­ì „ ê¸°ìˆ ',
    cost: '350 RP + íšŒë¡œê¸°íŒ 5ea', prereq: 'A01 âœ“',
    effects: ['ìœ ë„ ì •ë°€ë„ +40%', 'ì‹¤íŒ¨ìœ¨ -15%', 'ëª©í‘œ ê¶¤ë„ í¸ì°¨ -60%'],
    unlocks: ['GPS ìˆ˜ì‹ ê¸° (A03 ì „ì œ)'],
    eta: 'ì˜ˆìƒ 1ì‹œê°„ 10ë¶„', rp: 350
  },
  A03: {
    id: 'A03', name: 'GPS ë³´ì •', en: 'GPS CORRECTION',
    status: 'locked', branch: 'í•­ì „ ê¸°ìˆ ',
    cost: '550 RP', prereq: 'A02 + Phase 3',
    effects: ['ê¶¤ë„ ì •ë°€ë„ +30%', 'ì¬ì§„ì… ëª©í‘œì  ì •í™•ë„ +50%'],
    unlocks: [], eta: null, rp: 550
  },
  A04: {
    id: 'A04', name: 'ììœ¨ ë¹„í–‰', en: 'AUTONOMOUS FLIGHT',
    status: 'locked', branch: 'í•­ì „ ê¸°ìˆ ',
    cost: '900 RP', prereq: 'A03',
    effects: ['ë¬´ì¸ ë¯¸ì…˜ í•´ê¸ˆ', 'ì¡°ì¢…ì‚¬ ì—†ì´ ë°œì‚¬ ê°€ëŠ¥'],
    unlocks: [], eta: null, rp: 900
  },

  T01: {
    id: 'T01', name: 'ê¸°ì´ˆ ì ˆì—´ì¬', en: 'BASIC THERMAL INSULATION',
    status: 'complete', branch: 'ì—´ ê´€ë¦¬',
    cost: '90 RP', prereq: 'ì—†ìŒ',
    effects: ['ì—”ì§„ ê³¼ì—´ í™•ë¥  -10%', 'ë‹¨ì—´ ì½”íŒ… í•´ê¸ˆ'],
    unlocks: [], eta: null, rp: 90
  },
  T02: {
    id: 'T02', name: 'ì‚­ë§ˆ ì½”íŒ…', en: 'ABLATIVE THERMAL COATING',
    status: 'progress', branch: 'ì—´ ê´€ë¦¬', pct: 45,
    cost: '700 RP', prereq: 'T01 âœ“',
    effects: ['ì¬ì§„ì… ìƒì¡´ìœ¨ +35%', 'ì—´ ì°¨í ì†Œëª¨ ê°ì†Œ', 'ê³ ì† ì¬ì§„ì… í—ˆìš©'],
    unlocks: [],
    eta: '83ë¶„', rp: 700
  },
  T03: {
    id: 'T03', name: 'ëŠ¥ë™ ëƒ‰ê°', en: 'ACTIVE COOLING',
    status: 'locked', branch: 'ì—´ ê´€ë¦¬',
    cost: '850 RP', prereq: 'T02 + Phase 3',
    effects: ['ì—°ì† ì—°ì†Œ ì‹œê°„ 2ë°°', 'ì—”ì§„ ìˆ˜ëª… +50%'],
    unlocks: [], eta: null, rp: 850
  },
  T04: {
    id: 'T04', name: 'ì—´ì°¨í íƒ€ì¼', en: 'THERMAL PROTECTION TILES',
    status: 'locked', branch: 'ì—´ ê´€ë¦¬',
    cost: '1,500 RP', prereq: 'T03',
    effects: ['ì™„ì „ ì¬ì‚¬ìš© ì—´ì°¨í í•´ê¸ˆ', 'ì¬ì§„ì… ìƒì¡´ìœ¨ +60%'],
    unlocks: [], eta: null, rp: 1500
  },

  O01: {
    id: 'O01', name: 'ë°œì‚¬ ìë™í™” I', en: 'LAUNCH AUTOMATION I',
    status: 'complete', branch: 'ìš´ìš© ê¸°ìˆ ',
    cost: '70 RP', prereq: 'ì—†ìŒ',
    effects: ['ë°œì‚¬ ì¤€ë¹„ ì‹œê°„ -20%', 'ì²´í¬ë¦¬ìŠ¤íŠ¸ ìë™í™”'],
    unlocks: [], eta: null, rp: 70
  },
  O02: {
    id: 'O02', name: 'ì¹´ìš´íŠ¸ë‹¤ìš´ ì‹œìŠ¤í…œ', en: 'COUNTDOWN SYSTEM',
    status: 'complete', branch: 'ìš´ìš© ê¸°ìˆ ',
    cost: '130 RP', prereq: 'O01 âœ“',
    effects: ['ë°œì‚¬ ì‹ ë¢°ë„ +10%', 'ìë™ T-0 ì‹œí€€ìŠ¤ í•´ê¸ˆ'],
    unlocks: [], eta: null, rp: 130
  },
  O03: {
    id: 'O03', name: 'ë‚™í•˜ì‚° íšŒìˆ˜ ì‹œìŠ¤í…œ', en: 'PARACHUTE RECOVERY',
    status: 'available', branch: 'ìš´ìš© ê¸°ìˆ ',
    cost: '400 RP', prereq: 'O02 âœ“',
    effects: ['1ë‹¨ íšŒìˆ˜ ì‹œìŠ¤í…œ í•´ê¸ˆ', 'ë¡œì¼“ ì¬ì‚¬ìš© ë¹„ìš© -40%', 'íšŒìˆ˜ ì„±ê³µë¥  65%'],
    unlocks: ['íšŒìˆ˜ ê¸°ì§€ ê±´ì„¤', 'ë°œì‚¬ì²´ ì¬ì‚¬ìš© ì •ë¹„ì†Œ'],
    eta: 'ì˜ˆìƒ 1ì‹œê°„ 20ë¶„', rp: 400
  },
  O04: {
    id: 'O04', name: 'ì¬ì‚¬ìš© ë¡œì¼“', en: 'REUSABLE ROCKET',
    status: 'locked', branch: 'ìš´ìš© ê¸°ìˆ ',
    cost: '1,100 RP', prereq: 'O03 + Phase 3',
    effects: ['ì™„ì „ ì¬ì‚¬ìš© ë°œì‚¬ì²´ í•´ê¸ˆ', 'ë°œì‚¬ ë¹„ìš© -60%'],
    unlocks: [], eta: null, rp: 1100
  },
};

const CURRENT_RP = 847;
let selectedTech = null;

/* =============================================
   ASCII ART VISUALIZATIONS PER TECH
============================================= */
const TECH_ASCII = {
  S01: `     ___
    /   \\      WELD
   / ~~~ \\   ARC
  |  ))) |  ~~~~~
  |  ))) |â”€â”€[JOINT]
   \\     /
    \\___/
  [STRUCT BOND OK]`,

  S02: `  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Al-7075  â”‚
  â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   â”‚ â† billet
  â”‚  â”‚â”‚â”‚â”‚    â”‚
  â”‚  MILL    â”‚
  â”‚  â”€â”€â”€â”€    â”‚
  â”‚  PART    â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  -20% MATERIAL USE`,

  S03: `  ///////  â† 0Â° ply
 ///////
///////
=======  â† 90Â° ply
=======
 \\\\\\\\  â† Â±45Â° ply
  \\\\\\\\
[CURE 140Â°C â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 67%]`,

  S04: `  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Ti-6Al-4Vâ”‚
  â”‚   _____  â”‚
  â”‚  /FORGE\\ â”‚ â† 1,200Â°C
  â”‚ |_PRESS_|â”‚
  â”‚   â”‚â”‚â”‚   â”‚
  â”‚  MOUNT   â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  [HIGH-TEMP OK]`,

  S05: `  â•”â•â•â•â•â•â•â•â•â•â•â•—
  â•‘ FRAME    â•‘
  â•‘  â–‘â–‘â–‘â–‘â–‘â–‘  â•‘ â† lattice
  â•‘ â–‘â–‘â–“â–‘â–‘â–‘â–‘  â•‘   cutout
  â•‘  â–‘â–‘â–‘â–‘â–‘â–‘  â•‘
  â•‘ LIGHTENEDâ•‘
  â•šâ•â•â•â•â•â•â•â•â•â•â•
  -35% MASS`,

  S06: `  â”€â”€â”€â”€â”€â”€â”€â”€â”€
  â–’â–’â–’â–’â–’â–’â–’â–’â–’ â† face sheet
  â•â•â•â•â•â•â•â•â•
  â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â† core
  â•â•â•â•â•â•â•â•â•
  â–’â–’â–’â–’â–’â–’â–’â–’â–’ â† face sheet
  â”€â”€â”€â”€â”€â”€â”€â”€â”€
  [SANDWICH PANEL]`,

  S07: `    â‰ˆâ‰ˆâ‰ˆâ‰ˆâ‰ˆâ‰ˆâ‰ˆ
   â‰ˆCNT TUBEâ‰ˆ
    â‰ˆâ‰ˆâ‰ˆâ‰ˆâ‰ˆâ‰ˆâ‰ˆ
   /â”‚â”‚â”‚â”‚â”‚â”‚â”‚\\
  [ NANOTUBE ]
   \\â”‚â”‚â”‚â”‚â”‚â”‚â”‚/
  TENSILE: +500%
  [LUNAR GRADE]`,

  P01: `    ___________
   /           \\
  |  COMBUSTION |
  |   CHAMBER   |
  |  ___   ___  |
  | | O | | O | |â† injectors
  | |___| |___| |
  |   \\_____/   |
  |    NOZZLE    |
   \\___________/
        |||
       /|||\\
      //|||\\\\`,

  P02: `   ___
  /   \\â”€â”€[LOX IN]
 | >>> |  (turbine)
  \\___/â”€â”€[HIGH P]
    â”‚
  â”€â”€â”´â”€â”€
 |PUMP |
  â”€â”€â”¬â”€â”€
    â”‚
 [THRUST â†‘]`,

  P03: `  â•”â•â•â•â•â•â•â•â•â•â•—
  â•‘FUEL CHAN.â•‘â† coolant
  â• â•â•â•â•â•â•â•â•â•â•£
  â•‘ CHAMBER â•‘â† 3500Â°C
  â• â•â•â•â•â•â•â•â•â•â•£
  â•‘RE-GEN   â•‘â† cooling
  â•šâ•â•â•â•â•¤â•â•â•â•â•
       â”‚
   â•”â•â•â•â•§â•â•â•â•—
   â•‘ NOZZLE â•‘
   â•šâ•â•â•â•â•â•â•â•
  [Isp +12%]`,

  P04: `    â”Œâ”€â”€â”€â”€â”€â”€â”
    â”‚PINTLEâ”‚â† injector
    â”‚  â•±â•²  â”‚
    â”‚ â•±  â•² â”‚â† spray
    â”‚â•±    â•²â”‚
    â”‚FLAME â”‚
    â””â”€â”€â”¬â”€â”€â”€â”˜
  20%â”€â”€â”´â”€â”€100%
   THROTTLE OK`,

  P05: `  â”Œâ”€â”€â”€â”€â”€â”
  â”‚STAGEâ”‚ 1st
  â”‚  1  â”‚
  â””â”€â”€â”¬â”€â”€â”˜
  â•â•â•â•ªâ•â•â• â† sep ring
  â”Œâ”€â”€â”´â”€â”€â”
  â”‚STAGEâ”‚ 2nd
  â”‚  2  â”‚
  â””â”€â”€â”€â”€â”€â”˜
  [PAYLOAD +20%]`,

  P06: `  [CH4 + LOX]
   â†“       â†“
  â•”â•â•â•â•â•â•â•â•â•â•—
  â•‘METHANE  â•‘
  â•‘ ENGINE  â•‘
  â•šâ•â•â•â•â•¤â•â•â•â•â•
       â•‘
   â•”â•â•â•â•§â•â•â•â•—
   â•‘EXHAUST â•‘
   â•šâ•â•â•â•â•â•â•â•
  Isp +25%`,

  A01: `     ___
    /   \\
   | oâ”€o |   â† X axis
   |  â”‚  |
   | â”€â”¼â”€ |   â† Y axis
   |  â”‚  |
    \\___/
   Zâ”€â”€â•¯
  [GYRO LOCK 3-AXIS]`,

  A02: `  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  INS     â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”  â”‚
  â”‚  â”‚ACCELâ”‚  â”‚â† 3-axis
  â”‚  â””â”€â”€â”€â”€â”˜  â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”  â”‚
  â”‚  â”‚GYROâ”‚  â”‚â† rate
  â”‚  â””â”€â”€â”€â”€â”˜  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  POSITION Â±0.1m`,

  A03: `  â•”â•â•â•â•â•â•â•â•â•—
  â•‘ GPS RX â•‘
  â•‘ â”Œâ”€â”€â”€â”€â” â•‘â† satellite
  â•‘ â”‚â–²â–²â–²â–²â”‚ â•‘  lock
  â•‘ â””â”€â”€â”€â”€â”˜ â•‘
  â•‘Î”POS:   â•‘
  â•‘ -60%   â•‘
  â•šâ•â•â•â•â•â•â•â•â•`,

  A04: `  [FLIGHT COMPUTER]
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ AI PILOT â”‚
   â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â”‚â† neural
   â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â”‚  net
   â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
    AUTONOMOUS
   [NO CREW REQ]`,

  T01: `  â•‘â•‘â•‘â•‘â•‘â•‘â•‘â•‘â•‘ â† insulation
  â”€â”€â”€â”€â”€â”€â”€â”€â”€
  â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â† MLI layer
  â”€â”€â”€â”€â”€â”€â”€â”€â”€
  â–“â–“â–“â–“â–“â–“â–“â–“â–“ â† structure
  -10% OVERHEAT`,

  T02: `   ___________
  /  RE-ENTRY  \\
 |  >>>>>>>>>>>|â† heat flux
 |[=ABLATIVE==]|â† char layer
 |[============]â† virgin
 |  CAPSULE    |
  \\___________/
 TEMP: 1,640Â°C â–²
 [COAT 45%â–ˆâ–ˆâ–ˆâ–ˆâ–‘]`,

  T03: `  [FUEL]â”€â”€[PUMP]
     â”‚
  â•”â•â•â•§â•â•â•â•â•â•â•—
  â•‘  COOLING â•‘â† active
  â•‘  CHANNEL â•‘  circuit
  â• â•â•â•â•â•â•â•â•â•â•â•£
  â•‘  ENGINE  â•‘
  â•šâ•â•â•¤â•â•â•â•â•â•â•â•
     â”‚
  [EXHAUST]
  BURN TIME Ã—2`,

  T04: `  â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“
  â–’â–’â–’TILESâ–’â–’â–’ â† TPS
  â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  BODY   â”‚
  â”‚ STRUCT  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  1,600Â°C OK
  [FULLY REUSABLE]`,

  O01: `  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ LAUNCH SEQ   â”‚
  â”‚ T-120: INIT  â”‚
  â”‚  T-60: FUEL  â”‚
  â”‚  T-30: PRESS â”‚
  â”‚  T-10: ARM   â”‚
  â”‚   T-0: FIRE  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  PREP TIME -20%`,

  O02: `  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•—
  â•‘ T-00:00:00 â•‘â† live
  â•‘ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â•‘
  â•‘            â•‘
  â•‘  IGNITION  â•‘
  â•‘  SEQUENCE  â•‘
  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•
  AUTO T-0 OK`,

  O03: `      _____
     /     \\
    | CHUTE |â† drogue
     \\     /
      â”‚ â”‚ â”‚
   â”€â”€â”€â”´â”€â”´â”€â”´â”€â”€â”€
   [ CAPSULE ]
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  RECOVERY 65%`,

  O04: `  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ BOOSTER  â”‚
  â”‚    â†“â†“â†“   â”‚â† retro burn
  â”‚  â•â•â•â•â•â•â• â”‚â† grid fins
  â”‚   â–ˆâ–ˆâ–ˆâ–ˆ   â”‚
  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
   â•â•â•â•â•§â•â•â•â•  â† landing pad
  [REUSE -60%$]`,
};


/* =============================================
   TECH SELECTION & DETAIL PANEL
============================================= */
function selectTech(id) {
  const tech = TECHS[id];
  if (!tech) return;

  selectedTech = id;

  // Highlight selected node
  document.querySelectorAll('.tech-node rect:first-child').forEach(r => {
    r.style.filter = '';
  });

  // Show detail panel
  document.getElementById('detail-overview').style.display = 'none';
  document.getElementById('detail-tech').classList.remove('detail-hidden');

  // Populate fields
  document.getElementById('dt-id').textContent = tech.id + ' â€” ' + tech.branch;
  document.getElementById('dt-name').textContent = tech.name;
  document.getElementById('dt-en').textContent = tech.en;

  // Status badge
  const badge = document.getElementById('dt-status-badge');
  badge.textContent = {
    complete: 'âœ“ ì—°êµ¬ ì™„ë£Œ',
    progress: 'â–¶ ì—°êµ¬ ì§„í–‰ì¤‘',
    available: 'â—‹ ì—°êµ¬ ê°€ëŠ¥',
    locked: 'ğŸ”’ ì ê¸ˆ'
  }[tech.status] || tech.status.toUpperCase();
  badge.className = 'detail-status-badge status-' + tech.status;

  document.getElementById('dt-cost').textContent = tech.cost;
  document.getElementById('dt-prereq').textContent = tech.prereq;

  // ETA row
  const etaRow = document.getElementById('dt-eta-row');
  if (tech.eta) {
    etaRow.style.display = 'flex';
    document.getElementById('dt-eta').textContent = tech.eta;
  } else {
    etaRow.style.display = 'none';
  }

  // Effects
  const efxEl = document.getElementById('dt-effects');
  efxEl.innerHTML = '';
  tech.effects.forEach(e => {
    const div = document.createElement('div');
    div.className = 'effect-item';
    div.textContent = e;
    efxEl.appendChild(div);
  });

  // Unlocks
  const unlockWrap = document.getElementById('dt-unlocks-wrap');
  const unlockEl = document.getElementById('dt-unlocks');
  if (tech.unlocks && tech.unlocks.length > 0) {
    unlockWrap.style.display = 'block';
    unlockEl.innerHTML = '';
    tech.unlocks.forEach(u => {
      const div = document.createElement('div');
      div.className = 'unlock-item';
      div.textContent = u;
      unlockEl.appendChild(div);
    });
  } else {
    unlockWrap.style.display = 'none';
  }

  // Research button
  const btn = document.getElementById('dt-btn');
  const rpCheck = document.getElementById('dt-rp-check');

  if (tech.status === 'complete') {
    btn.textContent = 'âœ“ ì´ë¯¸ ì™„ë£Œëœ ê¸°ìˆ ';
    btn.className = 'btn-research disabled';
    rpCheck.innerHTML = '';
  } else if (tech.status === 'progress') {
    btn.textContent = 'â–¶ ì—°êµ¬ ì§„í–‰ ì¤‘...';
    btn.className = 'btn-research disabled';
    rpCheck.innerHTML = '<span style="color:var(--amber)">' + (tech.pct || 0) + '% ì™„ë£Œ â€” ETA ' + (tech.eta || '?') + '</span>';
  } else if (tech.status === 'locked') {
    btn.textContent = 'ğŸ”’ ì ê¸ˆ í•´ì œ ë¶ˆê°€';
    btn.className = 'btn-research disabled';
    rpCheck.innerHTML = '<span style="color:var(--locked-text)">ì„ í–‰ ê¸°ìˆ  ë˜ëŠ” Phase ì¡°ê±´ ë¯¸ì¶©ì¡±</span>';
  } else if (tech.status === 'available') {
    btn.textContent = 'â–¶ ì—°êµ¬ ì‹œì‘';
    btn.className = 'btn-research';
    const canAfford = CURRENT_RP >= tech.rp;
    const rpNum = tech.rp;
    rpCheck.innerHTML = 'RP: ' + CURRENT_RP + '/' + rpNum + ' ' +
      (canAfford ? '<span class="ok">âœ“ ê°€ëŠ¥</span>' : '<span class="fail">âœ— RP ë¶€ì¡±</span>');
    if (!canAfford) {
      btn.className = 'btn-research disabled';
    }
  }

  // ASCII art visualization
  const asciiWrap = document.getElementById('dt-ascii-wrap');
  const asciiArt = document.getElementById('dt-ascii-art');
  const asciiDef = TECH_ASCII[id];
  if (asciiDef) {
    asciiWrap.style.display = 'block';
    asciiArt.textContent = asciiDef;
    // Apply amber style for in-progress or thermal techs
    if (tech.status === 'progress' || id.startsWith('T')) {
      asciiArt.className = 'detail-ascii-art amber-detail';
    } else {
      asciiArt.className = 'detail-ascii-art';
    }
  } else {
    asciiWrap.style.display = 'none';
  }
}

function startResearch() {
  const tech = selectedTech ? TECHS[selectedTech] : null;
  if (!tech || tech.status !== 'available') return;

  const btn = document.getElementById('dt-btn');
  const orig = btn.textContent;
  btn.textContent = 'âŸ³ ì—°êµ¬ ì‹œì‘ë¨!';
  btn.style.background = '#011a0a';
  btn.style.borderColor = 'var(--green)';
  btn.style.boxShadow = 'var(--glow-strong)';

  setTimeout(() => {
    btn.textContent = orig;
    btn.style.background = '';
    btn.style.borderColor = '';
    btn.style.boxShadow = '';
  }, 1500);
}

/* =============================================
   TAB SWITCHING
============================================= */
function switchTab(el) {
  document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
  el.classList.add('active');
}

/* =============================================
   PROGRESS BAR ANIMATION
============================================= */
function animateProgressBars() {
  // S03 â€” 67%, count up to simulate
  const fills = document.querySelectorAll('.progress-bar-fill');
  fills.forEach(f => {
    const target = parseFloat(f.style.width);
    let current = 0;
    const step = target / 40;
    const timer = setInterval(() => {
      current = Math.min(current + step, target);
      f.style.width = current + '%';
      if (current >= target) clearInterval(timer);
    }, 20);
  });
}

/* =============================================
   LIVE CLOCK
============================================= */
function updateClock() {
  const now = new Date();
  const h = String(now.getHours()).padStart(2, '0');
  const m = String(now.getMinutes()).padStart(2, '0');
  const s = String(now.getSeconds()).padStart(2, '0');
  // Insert clock display into title area if desired
}

/* =============================================
   HOVER EFFECTS ON SVG NODES
============================================= */
document.querySelectorAll('.tech-node').forEach(node => {
  const id = node.getAttribute('data-id');
  const tech = TECHS[id];

  node.addEventListener('mouseenter', function(e) {
    if (!tech) return;
    const rect = node.querySelector('rect');
    if (rect && tech.status !== 'locked') {
      rect.style.filter = 'url(#glow-strong)';
    }
  });

  node.addEventListener('mouseleave', function() {
    const rect = node.querySelector('rect');
    if (rect) rect.style.filter = '';
  });
});

/* =============================================
   RP TICKER â€” simulates RP increment
============================================= */
let currentRP = 847;
setInterval(() => {
  currentRP += Math.random() > 0.7 ? 1 : 0; // random slow increment visual
  // Could update a live RP counter element here
}, 7500);

/* =============================================
   ETÃ€ COUNTDOWN â€” simulated
============================================= */
let eta1Min = 47, eta1Sec = 0;
let eta2Min = 83, eta2Sec = 0;

setInterval(() => {
  if (eta1Min === 0 && eta1Sec === 0) return;
  if (eta1Sec === 0) { eta1Min--; eta1Sec = 59; }
  else eta1Sec--;

  if (eta2Min === 0 && eta2Sec === 0) return;
  if (eta2Sec === 0) { eta2Min--; eta2Sec = 59; }
  else eta2Sec--;
}, 1000);

/* =============================================
   INIT
============================================= */
animateProgressBars();
setInterval(updateClock, 1000);

</script>
</body>
</html>
