<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MOON IDLE ‚Äî MISSION PROGRESS</title>
<link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">
<style>
  /* ==============================================
     RESET & BASE
  ============================================== */
  *, *::before, *::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }

  :root {
    --bg:           #010800;
    --panel-bg:     #020d04;
    --green:        #00e676;
    --green-dim:    #1a5c34;
    --green-mid:    #00994d;
    --green-dark:   #021508;
    --amber:        #ffab00;
    --amber-dim:    #7a5100;
    --red:          #ff1744;
    --red-dim:      #5c0015;
    --locked-color: #1a3a20;
    --locked-text:  #2a5c35;
    --font:         'Share Tech Mono', monospace;
    --border:       1px solid #1a5c34;
    --border-dim:   1px solid #0a2e14;
    --glow:         0 0 6px #00e67680;
    --glow-strong:  0 0 12px #00e676, 0 0 24px #00e67650;
    --glow-amber:   0 0 8px #ffab0080;
  }

  html, body {
    width: 100%;
    height: 100%;
    background: var(--bg);
    color: var(--green);
    font-family: var(--font);
    font-size: 13px;
    line-height: 1.5;
    overflow: hidden;
  }

  /* ==============================================
     CRT OVERLAY
  ============================================== */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background: repeating-linear-gradient(
      0deg,
      transparent,
      transparent 2px,
      rgba(0,0,0,0.17) 2px,
      rgba(0,0,0,0.17) 4px
    );
    pointer-events: none;
    z-index: 9999;
  }

  body::after {
    content: '';
    position: fixed;
    inset: 0;
    background: radial-gradient(ellipse at center, transparent 55%, rgba(0,0,0,0.75) 100%);
    pointer-events: none;
    z-index: 9998;
  }

  /* ==============================================
     KEYFRAMES
  ============================================== */
  @keyframes crt-flicker {
    0%   { opacity: 1; }
    92%  { opacity: 1; }
    93%  { opacity: 0.87; }
    94%  { opacity: 1; }
    96%  { opacity: 0.91; }
    97%  { opacity: 1; }
    100% { opacity: 1; }
  }

  @keyframes blink {
    0%, 49%  { opacity: 1; }
    50%, 100% { opacity: 0; }
  }

  @keyframes pulse-amber {
    0%, 100% { color: var(--amber); text-shadow: var(--glow-amber); }
    50%      { color: #7a5100; text-shadow: none; }
  }

  @keyframes pulse-green {
    0%, 100% { opacity: 1; }
    50%      { opacity: 0.45; }
  }

  @keyframes scan-move {
    0%   { background-position: 0 0; }
    100% { background-position: 0 80px; }
  }

  @keyframes phase-progress-fill {
    from { width: 0%; }
    to   { width: var(--target-width); }
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(4px); }
    to   { opacity: 1; transform: translateY(0); }
  }

  @keyframes progress-pulse {
    0%, 100% { box-shadow: 0 0 4px var(--amber); }
    50%      { box-shadow: 0 0 12px var(--amber), 0 0 20px #ffab0050; }
  }

  /* ==============================================
     MAIN WRAPPER
  ============================================== */
  #main-wrapper {
    display: flex;
    flex-direction: column;
    width: 100%;
    height: 100%;
    animation: crt-flicker 9s infinite;
  }

  /* ==============================================
     TOP BAR
  ============================================== */
  #top-bar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    background: var(--panel-bg);
    border-bottom: 2px solid var(--green-dim);
    padding: 6px 16px;
    flex-shrink: 0;
    box-shadow: var(--glow-strong);
    z-index: 100;
    gap: 16px;
  }

  #top-bar .title-block {
    display: flex;
    align-items: center;
    gap: 12px;
  }

  #top-bar .title {
    font-size: 15px;
    letter-spacing: 4px;
    text-transform: uppercase;
    text-shadow: var(--glow-strong);
    color: var(--green);
    white-space: nowrap;
  }

  #top-bar .title-sep {
    color: var(--green-dim);
    font-size: 13px;
  }

  #top-bar .screen-label {
    font-size: 11px;
    letter-spacing: 3px;
    color: var(--green-mid);
    text-shadow: var(--glow);
    white-space: nowrap;
  }

  #top-bar .status-chips {
    display: flex;
    align-items: center;
    gap: 20px;
    font-size: 11px;
    letter-spacing: 1.5px;
  }

  .chip {
    display: flex;
    align-items: center;
    gap: 5px;
    color: var(--green-mid);
  }

  .chip .chip-label {
    color: #2a7a4a;
  }

  .chip .chip-val {
    color: var(--green);
    text-shadow: var(--glow);
  }

  .chip .chip-val.amber {
    color: var(--amber);
    text-shadow: var(--glow-amber);
    animation: pulse-amber 2.5s ease-in-out infinite;
  }

  #top-bar .clock {
    font-size: 18px;
    letter-spacing: 3px;
    text-shadow: 0 0 10px var(--green);
    color: var(--green);
    white-space: nowrap;
  }

  .cursor-blink {
    display: inline-block;
    width: 8px;
    height: 14px;
    background: var(--green);
    vertical-align: middle;
    animation: blink 1s step-end infinite;
    box-shadow: var(--glow);
  }

  /* ==============================================
     MAIN NAV TABS
  ============================================== */
  #nav-tabs {
    display: flex;
    background: #010d03;
    border-bottom: 2px solid var(--green-dim);
    flex-shrink: 0;
    overflow: hidden;
  }

  .nav-tab {
    padding: 7px 22px;
    font-family: var(--font);
    font-size: 11px;
    letter-spacing: 2px;
    text-transform: uppercase;
    color: var(--green-dim);
    background: transparent;
    border: none;
    border-right: var(--border);
    cursor: pointer;
    transition: color 0.15s, background 0.15s;
    white-space: nowrap;
  }

  .nav-tab:hover {
    color: var(--green-mid);
    background: #010f05;
  }

  .nav-tab.active {
    color: var(--green);
    background: var(--panel-bg);
    text-shadow: var(--glow);
    border-bottom: 2px solid var(--green);
    margin-bottom: -2px;
  }

  .nav-tab.mission-tab {
    margin-left: auto;
    border-right: none;
    border-left: var(--border);
    color: var(--amber-dim);
  }

  .nav-tab.mission-tab.active {
    color: var(--amber);
    text-shadow: var(--glow-amber);
    border-bottom: 2px solid var(--amber);
  }

  /* ==============================================
     CONTENT AREA
  ============================================== */
  #content-area {
    flex: 1;
    overflow: hidden;
    display: flex;
    flex-direction: column;
  }

  .screen {
    display: none;
    flex-direction: column;
    height: 100%;
    animation: fadeIn 0.2s ease;
  }

  .screen.active {
    display: flex;
  }

  /* ==============================================
     MISSION SCREEN SUB-TABS
  ============================================== */
  #mission-sub-tabs {
    display: flex;
    background: #010a02;
    border-bottom: var(--border);
    flex-shrink: 0;
    padding: 0 16px;
  }

  .sub-tab {
    padding: 5px 16px;
    font-family: var(--font);
    font-size: 10px;
    letter-spacing: 2px;
    text-transform: uppercase;
    color: var(--green-dim);
    background: transparent;
    border: none;
    border-bottom: 2px solid transparent;
    cursor: pointer;
    transition: color 0.15s;
  }

  .sub-tab:hover { color: var(--green-mid); }

  .sub-tab.active {
    color: var(--green);
    border-bottom-color: var(--green);
    text-shadow: var(--glow);
  }

  /* ==============================================
     SUB-SCREEN
  ============================================== */
  .sub-screen {
    display: none;
    flex: 1;
    overflow: hidden;
    flex-direction: column;
    animation: fadeIn 0.2s ease;
  }

  .sub-screen.active {
    display: flex;
  }

  /* ==============================================
     ÏßÑÌñâ Îã®Í≥Ñ ‚Äî PHASE TIMELINE
  ============================================== */
  #phases-screen {
    display: flex;
    flex-direction: column;
    height: 100%;
  }

  /* PHASE TIMELINE STRIP */
  #timeline-zone {
    flex-shrink: 0;
    background: #010d03;
    border-bottom: 2px solid var(--green-dim);
    padding: 14px 24px 16px;
    position: relative;
    overflow: hidden;
  }

  #timeline-zone .zone-label {
    font-size: 9px;
    letter-spacing: 3px;
    color: var(--green-dim);
    margin-bottom: 10px;
  }

  /* Timeline row */
  #timeline-row {
    display: flex;
    align-items: center;
    position: relative;
    height: 80px;
  }

  .phase-connector {
    flex: 1;
    height: 2px;
    background: var(--green-dim);
    position: relative;
  }

  .phase-connector.complete {
    background: var(--green);
    box-shadow: 0 0 6px var(--green);
  }

  .phase-connector.partial {
    background: linear-gradient(to right, var(--green) 60%, var(--green-dim) 60%);
  }

  .phase-connector.locked {
    background: #0a1e0e;
  }

  .phase-node {
    display: flex;
    flex-direction: column;
    align-items: center;
    position: relative;
    cursor: pointer;
    gap: 0;
  }

  .phase-dot {
    width: 36px;
    height: 36px;
    border: 2px solid var(--green-dim);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 13px;
    background: var(--bg);
    position: relative;
    z-index: 2;
    transition: transform 0.15s;
  }

  .phase-node:hover .phase-dot {
    transform: scale(1.1);
  }

  .phase-dot.complete {
    border-color: var(--green);
    background: #010f05;
    box-shadow: var(--glow-strong);
    color: var(--green);
    text-shadow: var(--glow-strong);
  }

  .phase-dot.in-progress {
    border-color: var(--amber);
    background: #0a0500;
    box-shadow: 0 0 10px var(--amber), 0 0 20px #ffab0060;
    color: var(--amber);
    animation: progress-pulse 2s ease-in-out infinite;
  }

  .phase-dot.locked {
    border-color: #0a2010;
    background: #010800;
    color: #1a3a20;
  }

  .phase-info {
    position: absolute;
    top: 44px;
    left: 50%;
    transform: translateX(-50%);
    text-align: center;
    white-space: nowrap;
    pointer-events: none;
  }

  .phase-name {
    font-size: 10px;
    letter-spacing: 1.5px;
    display: block;
    margin-bottom: 2px;
  }

  .phase-name.complete { color: var(--green); text-shadow: var(--glow); }
  .phase-name.in-progress { color: var(--amber); text-shadow: var(--glow-amber); }
  .phase-name.locked { color: var(--locked-text); }

  .phase-status-text {
    font-size: 9px;
    letter-spacing: 1px;
    display: block;
  }

  .phase-status-text.complete { color: var(--green-mid); }
  .phase-status-text.in-progress { color: #7a5100; }
  .phase-status-text.locked { color: #1a3a20; }

  .phase-sub {
    font-size: 8px;
    letter-spacing: 0.5px;
    margin-top: 2px;
    display: block;
  }

  .phase-sub.complete { color: #2a7a4a; }
  .phase-sub.in-progress { color: var(--amber-dim); }
  .phase-sub.locked { color: #0f2514; }

  /* Progress bar inside timeline */
  .phase-mini-progress {
    position: absolute;
    bottom: -6px;
    left: 50%;
    transform: translateX(-50%);
    width: 60px;
  }

  .phase-mini-bar {
    width: 100%;
    height: 3px;
    background: #0a2010;
    position: relative;
  }

  .phase-mini-fill {
    height: 100%;
    background: var(--amber);
    box-shadow: 0 0 4px var(--amber);
    width: 60%;
    animation: phase-progress-fill 1.5s ease-out;
  }

  /* ==============================================
     MIDDLE ZONE ‚Äî 2 columns
  ============================================== */
  #mid-zone {
    display: flex;
    flex: 1;
    overflow: hidden;
  }

  /* LEFT ‚Äî Current Phase Detail */
  #phase-detail-col {
    width: 44%;
    border-right: 2px solid var(--green-dim);
    display: flex;
    flex-direction: column;
    overflow: hidden;
  }

  #phase-detail-col .col-header {
    background: var(--green-dark);
    border-bottom: 2px solid var(--green-dim);
    padding: 5px 12px;
    font-size: 10px;
    letter-spacing: 3px;
    color: var(--green-mid);
    flex-shrink: 0;
  }

  #phase-detail-col .col-header::before {
    content: '// ';
    color: var(--green-dim);
  }

  #phase-detail-scroll {
    flex: 1;
    overflow-y: auto;
    padding: 12px;
  }

  #phase-detail-scroll::-webkit-scrollbar {
    width: 4px;
  }
  #phase-detail-scroll::-webkit-scrollbar-track {
    background: #010a02;
  }
  #phase-detail-scroll::-webkit-scrollbar-thumb {
    background: var(--green-dim);
  }

  /* Phase 2 main card */
  .phase-card {
    border: 1px solid var(--green-dim);
    background: #010e03;
    margin-bottom: 10px;
    position: relative;
    overflow: hidden;
  }

  .phase-card::before {
    content: '';
    position: absolute;
    inset: 0;
    background: repeating-linear-gradient(
      0deg,
      transparent,
      transparent 14px,
      rgba(0, 230, 118, 0.015) 14px,
      rgba(0, 230, 118, 0.015) 15px
    );
    pointer-events: none;
  }

  .phase-card.active-phase {
    border-color: var(--amber);
    box-shadow: 0 0 12px #ffab0040, inset 0 0 20px #ffab0010;
  }

  .phase-card.completed-phase {
    border-color: var(--green-dim);
    opacity: 0.75;
  }

  .phase-card-header {
    padding: 8px 12px;
    border-bottom: 1px solid;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .phase-card.active-phase .phase-card-header {
    border-color: var(--amber-dim);
    background: #0a0500;
  }

  .phase-card.completed-phase .phase-card-header {
    border-color: var(--green-dim);
    background: #010f05;
  }

  .phase-card-title {
    font-size: 12px;
    letter-spacing: 2px;
  }

  .phase-card.active-phase .phase-card-title { color: var(--amber); text-shadow: var(--glow-amber); }
  .phase-card.completed-phase .phase-card-title { color: var(--green); text-shadow: var(--glow); }

  .phase-card-badge {
    font-size: 9px;
    letter-spacing: 1.5px;
    padding: 2px 7px;
    border: 1px solid;
  }

  .phase-card.active-phase .phase-card-badge {
    border-color: var(--amber);
    color: var(--amber);
    background: #1a0a00;
  }

  .phase-card.completed-phase .phase-card-badge {
    border-color: var(--green);
    color: var(--green);
    background: #010f05;
  }

  .phase-card-body {
    padding: 10px 12px;
  }

  .phase-subtitle {
    font-size: 11px;
    color: var(--green-dim);
    margin-bottom: 10px;
    letter-spacing: 1px;
  }

  /* Altitude progress within phase card */
  .altitude-display {
    display: flex;
    justify-content: space-between;
    align-items: flex-end;
    margin-bottom: 6px;
  }

  .altitude-current {
    font-size: 22px;
    letter-spacing: 2px;
    color: var(--amber);
    text-shadow: var(--glow-amber);
    line-height: 1;
  }

  .altitude-unit {
    font-size: 11px;
    color: var(--amber-dim);
    margin-left: 4px;
  }

  .altitude-target {
    font-size: 11px;
    color: var(--green-dim);
    text-align: right;
  }

  .altitude-target span {
    display: block;
    font-size: 9px;
    color: #1a5c34;
  }

  .progress-bar-wrap {
    width: 100%;
    height: 10px;
    background: #040f06;
    border: 1px solid #0a2e14;
    margin-bottom: 4px;
    position: relative;
    overflow: hidden;
  }

  .progress-fill {
    height: 100%;
    background: var(--amber);
    box-shadow: 0 0 8px var(--amber);
    transition: width 1.5s ease-out;
    position: relative;
  }

  .progress-fill::after {
    content: '';
    position: absolute;
    right: 0;
    top: 0;
    height: 100%;
    width: 3px;
    background: #fff;
    opacity: 0.7;
  }

  .progress-fill.green-fill {
    background: var(--green);
    box-shadow: 0 0 8px var(--green);
  }

  .progress-label {
    display: flex;
    justify-content: space-between;
    font-size: 9px;
    color: var(--green-dim);
    margin-bottom: 10px;
  }

  .progress-label .pct {
    color: var(--amber);
  }

  /* Condition checklist */
  .check-list {
    list-style: none;
    margin: 8px 0;
  }

  .check-list li {
    font-size: 11px;
    padding: 3px 0;
    display: flex;
    align-items: flex-start;
    gap: 8px;
    border-bottom: 1px solid #060e07;
  }

  .check-list li:last-child { border-bottom: none; }

  .check-icon {
    flex-shrink: 0;
    width: 14px;
  }

  .check-icon.done { color: var(--green); text-shadow: var(--glow); }
  .check-icon.fail { color: var(--red); }
  .check-icon.warn { color: var(--amber); animation: pulse-amber 2s ease-in-out infinite; }

  .check-text.done { color: var(--green-mid); }
  .check-text.fail { color: #4a3030; }

  /* Phase requirement list */
  .req-list {
    list-style: none;
    margin-top: 6px;
  }

  .req-list li {
    font-size: 10px;
    color: var(--red);
    padding: 2px 0;
    padding-left: 14px;
    position: relative;
  }

  .req-list li::before {
    content: '¬∑';
    position: absolute;
    left: 4px;
    color: var(--red);
  }

  .req-list li .sub-val {
    color: #5c2020;
    margin-top: 1px;
    display: block;
    padding-left: 8px;
    font-size: 9px;
  }

  /* Compact completed phase card */
  .phase-card-compact {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 6px 12px;
    border: 1px solid var(--green-dim);
    background: #010d03;
    margin-bottom: 6px;
    opacity: 0.65;
    font-size: 11px;
  }

  .phase-card-compact .compact-title {
    color: var(--green);
    letter-spacing: 1.5px;
  }

  .phase-card-compact .compact-date {
    color: var(--green-dim);
    font-size: 9px;
  }

  .phase-card-compact .compact-check {
    color: var(--green);
    text-shadow: var(--glow);
    font-size: 13px;
  }

  .compact-bonus-list {
    font-size: 9px;
    color: #2a7a4a;
    margin-top: 3px;
    letter-spacing: 0.5px;
  }

  /* Divider label */
  .section-divider {
    font-size: 9px;
    letter-spacing: 3px;
    color: var(--green-dim);
    margin: 12px 0 6px;
    border-bottom: 1px solid #0a1e0e;
    padding-bottom: 3px;
  }

  /* ==============================================
     RIGHT ‚Äî MILESTONE TRACKER
  ============================================== */
  #milestone-col {
    flex: 1;
    display: flex;
    flex-direction: column;
    overflow: hidden;
  }

  #milestone-col .col-header {
    background: var(--green-dark);
    border-bottom: 2px solid var(--green-dim);
    padding: 5px 12px;
    font-size: 10px;
    letter-spacing: 3px;
    color: var(--green-mid);
    flex-shrink: 0;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  #milestone-col .col-header::before {
    content: '// ';
    color: var(--green-dim);
  }

  .milestone-count {
    font-size: 9px;
    color: var(--green-dim);
    letter-spacing: 2px;
  }

  #milestone-scroll {
    flex: 1;
    overflow-y: auto;
    padding: 8px;
  }

  #milestone-scroll::-webkit-scrollbar {
    width: 4px;
  }
  #milestone-scroll::-webkit-scrollbar-track {
    background: #010a02;
  }
  #milestone-scroll::-webkit-scrollbar-thumb {
    background: var(--green-dim);
  }

  .milestone-phase-header {
    font-size: 9px;
    letter-spacing: 3px;
    padding: 4px 6px;
    color: var(--green-dim);
    background: #010d03;
    border: 1px solid #0a1e0e;
    margin-bottom: 4px;
    margin-top: 8px;
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .milestone-phase-header:first-child { margin-top: 0; }

  .milestone-phase-header .ph-badge {
    font-size: 8px;
    padding: 1px 6px;
    border: 1px solid;
  }

  .milestone-phase-header .ph-badge.done {
    border-color: var(--green);
    color: var(--green);
    background: #010f05;
  }

  .milestone-phase-header .ph-badge.active {
    border-color: var(--amber);
    color: var(--amber);
    background: #0a0500;
  }

  .milestone-phase-header .ph-badge.locked {
    border-color: var(--locked-color);
    color: var(--locked-text);
    background: transparent;
  }

  /* Milestone item */
  .ms-item {
    display: flex;
    align-items: flex-start;
    gap: 8px;
    padding: 5px 6px;
    border: 1px solid #0a1e0e;
    background: #010a02;
    margin-bottom: 3px;
    cursor: pointer;
    transition: background 0.15s, border-color 0.15s;
    position: relative;
  }

  .ms-item:hover {
    background: #020f04;
    border-color: var(--green-dim);
  }

  .ms-item.ms-complete {
    border-color: #0d3520;
    background: #010c03;
  }

  .ms-item.ms-next {
    border-color: var(--amber-dim);
    background: #050200;
    box-shadow: 0 0 6px #ffab0030;
  }

  .ms-item.ms-locked {
    opacity: 0.4;
    cursor: default;
  }

  .ms-item.ms-locked:hover {
    background: #010a02;
    border-color: #0a1e0e;
  }

  .ms-icon {
    font-size: 14px;
    flex-shrink: 0;
    width: 18px;
    text-align: center;
    margin-top: 1px;
  }

  .ms-icon.done { filter: drop-shadow(0 0 4px var(--green)); }

  .ms-body {
    flex: 1;
    min-width: 0;
  }

  .ms-name {
    font-size: 11px;
    letter-spacing: 1px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .ms-item.ms-complete .ms-name { color: var(--green); }
  .ms-item.ms-next .ms-name { color: var(--amber); text-shadow: var(--glow-amber); }
  .ms-item.ms-available .ms-name { color: var(--green-mid); }
  .ms-item.ms-locked .ms-name { color: var(--locked-text); }

  .ms-cond {
    font-size: 9px;
    color: var(--green-dim);
    margin-top: 1px;
  }

  .ms-item.ms-locked .ms-cond { color: #1a3a20; }

  /* Progress mini-bar for near milestones */
  .ms-mini-progress {
    margin-top: 4px;
  }

  .ms-mini-bar {
    width: 100%;
    height: 4px;
    background: #040f06;
    border: 1px solid #0a1e0e;
  }

  .ms-mini-fill {
    height: 100%;
    background: var(--amber);
    box-shadow: 0 0 4px var(--amber);
  }

  .ms-mini-label {
    font-size: 8px;
    color: var(--amber-dim);
    margin-top: 2px;
  }

  .ms-right {
    text-align: right;
    flex-shrink: 0;
    min-width: 60px;
  }

  .ms-date {
    font-size: 9px;
    color: var(--green-dim);
  }

  .ms-reward {
    font-size: 9px;
    color: var(--green-mid);
  }

  .ms-item.ms-next .ms-reward {
    color: var(--amber);
  }

  /* ==============================================
     STATS STRIP (bottom)
  ============================================== */
  #stats-strip {
    flex-shrink: 0;
    background: #010d03;
    border-top: 2px solid var(--green-dim);
    padding: 5px 16px;
    display: flex;
    align-items: center;
    gap: 0;
    font-size: 10px;
    letter-spacing: 1.5px;
    overflow: hidden;
  }

  .stat-item {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 0 14px;
    border-right: 1px solid #0a2e14;
  }

  .stat-item:first-child { padding-left: 0; }
  .stat-item:last-child { border-right: none; }

  .stat-label {
    color: #2a7a4a;
    white-space: nowrap;
  }

  .stat-value {
    color: var(--green);
    text-shadow: var(--glow);
    white-space: nowrap;
  }

  .stat-value.amber {
    color: var(--amber);
    text-shadow: var(--glow-amber);
  }

  /* ==============================================
     PLACEHOLDER SCREENS (other main tabs)
  ============================================== */
  .placeholder-screen {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 16px;
    color: var(--green-dim);
    font-size: 12px;
    letter-spacing: 3px;
    text-transform: uppercase;
  }

  .placeholder-screen .ph-icon {
    font-size: 32px;
    opacity: 0.4;
  }

  .placeholder-screen .ph-label {
    opacity: 0.5;
  }

  /* ==============================================
     MILESTONE FULL-GRID SUB-SCREEN
  ============================================== */
  #milestone-grid-scroll {
    flex: 1;
    overflow-y: auto;
    padding: 16px;
    display: flex;
    flex-direction: column;
    gap: 20px;
  }

  #milestone-grid-scroll::-webkit-scrollbar {
    width: 4px;
  }
  #milestone-grid-scroll::-webkit-scrollbar-thumb {
    background: var(--green-dim);
  }

  .ms-grid-phase-block {
    border: 1px solid #0a1e0e;
    background: #010a02;
  }

  .ms-grid-phase-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 6px 14px;
    background: #010e03;
    border-bottom: 1px solid #0a1e0e;
  }

  .ms-grid-phase-title {
    font-size: 11px;
    letter-spacing: 2.5px;
    color: var(--green);
  }

  .ms-grid-phase-title.amber { color: var(--amber); text-shadow: var(--glow-amber); }
  .ms-grid-phase-title.locked { color: var(--locked-text); }

  .ms-grid-phase-count {
    font-size: 9px;
    color: var(--green-dim);
    letter-spacing: 2px;
  }

  .ms-grid-cards {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
    gap: 8px;
    padding: 10px;
  }

  .ms-card {
    border: 1px solid #0a1e0e;
    background: #010c03;
    padding: 8px 10px;
    cursor: pointer;
    transition: background 0.15s;
  }

  .ms-card:hover { background: #020f04; border-color: var(--green-dim); }

  .ms-card.card-complete { border-color: #1a5c34; }
  .ms-card.card-next { border-color: var(--amber-dim); box-shadow: 0 0 8px #ffab0020; }
  .ms-card.card-locked { opacity: 0.35; cursor: default; }
  .ms-card.card-locked:hover { background: #010c03; border-color: #0a1e0e; }

  .ms-card-name {
    font-size: 11px;
    letter-spacing: 1px;
    margin-bottom: 4px;
  }

  .ms-card.card-complete .ms-card-name { color: var(--green); }
  .ms-card.card-next .ms-card-name { color: var(--amber); text-shadow: var(--glow-amber); }
  .ms-card.card-locked .ms-card-name { color: var(--locked-text); }
  .ms-card.card-available .ms-card-name { color: var(--green-mid); }

  .ms-card-cond {
    font-size: 9px;
    color: var(--green-dim);
    margin-bottom: 5px;
  }

  .ms-card.card-locked .ms-card-cond { color: #1a3a20; }

  .ms-card-reward {
    font-size: 9px;
    padding: 2px 6px;
    display: inline-block;
    border: 1px solid;
    letter-spacing: 1px;
  }

  .ms-card.card-complete .ms-card-reward {
    border-color: var(--green-dim);
    color: var(--green-mid);
  }

  .ms-card.card-next .ms-card-reward {
    border-color: var(--amber-dim);
    color: var(--amber-dim);
  }

  .ms-card.card-locked .ms-card-reward {
    border-color: #0a1e0e;
    color: #1a3a20;
  }

  .ms-card-date {
    font-size: 9px;
    color: var(--green-dim);
    margin-top: 4px;
  }

  .ms-card-progress {
    margin-top: 5px;
  }

  .ms-card-bar {
    width: 100%;
    height: 5px;
    background: #040f06;
    border: 1px solid #0a2010;
    margin-bottom: 2px;
  }

  .ms-card-bar-fill {
    height: 100%;
    background: var(--amber);
    box-shadow: 0 0 4px var(--amber);
  }

  .ms-card-bar-label {
    font-size: 8px;
    color: var(--amber-dim);
  }

  /* ==============================================
     ACHIEVEMENT SUB-SCREEN
  ============================================== */
  #achievement-scroll {
    flex: 1;
    overflow-y: auto;
    padding: 16px;
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 10px;
    align-content: start;
  }

  #achievement-scroll::-webkit-scrollbar {
    width: 4px;
  }
  #achievement-scroll::-webkit-scrollbar-thumb {
    background: var(--green-dim);
  }

  .ach-card {
    border: 1px solid #0a1e0e;
    background: #010c03;
    padding: 10px 12px;
    display: flex;
    gap: 12px;
    align-items: flex-start;
  }

  .ach-card.earned {
    border-color: #1a5c34;
    background: #010f04;
    box-shadow: inset 0 0 10px #00e67610;
  }

  .ach-card.locked {
    opacity: 0.45;
  }

  .ach-icon {
    font-size: 20px;
    flex-shrink: 0;
    filter: drop-shadow(0 0 6px var(--amber));
  }

  .ach-card.locked .ach-icon {
    filter: none;
    opacity: 0.4;
  }

  .ach-body { flex: 1; }

  .ach-name {
    font-size: 12px;
    letter-spacing: 1.5px;
    margin-bottom: 3px;
  }

  .ach-card.earned .ach-name { color: var(--amber); text-shadow: var(--glow-amber); }
  .ach-card.locked .ach-name { color: var(--locked-text); }

  .ach-desc {
    font-size: 10px;
    color: var(--green-dim);
    margin-bottom: 5px;
  }

  .ach-card.locked .ach-desc { color: #1a3a20; }

  .ach-date {
    font-size: 9px;
    color: var(--green-mid);
  }

  .ach-card.locked .ach-date {
    color: #1a3a20;
  }

  /* ==============================================
     PRESTIGE SUB-SCREEN
  ============================================== */
  #prestige-content {
    flex: 1;
    overflow-y: auto;
    padding: 20px;
    display: flex;
    flex-direction: column;
    gap: 16px;
  }

  #prestige-content::-webkit-scrollbar {
    width: 4px;
  }
  #prestige-content::-webkit-scrollbar-thumb {
    background: var(--green-dim);
  }

  .prestige-header-card {
    border: 2px solid var(--green-dim);
    background: #010e03;
    padding: 16px 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .prestige-title {
    font-size: 14px;
    letter-spacing: 3px;
    color: var(--green);
    text-shadow: var(--glow);
    margin-bottom: 4px;
  }

  .prestige-subtitle {
    font-size: 10px;
    color: var(--green-dim);
    letter-spacing: 2px;
  }

  .prestige-season-badge {
    border: 2px solid var(--amber);
    color: var(--amber);
    text-shadow: var(--glow-amber);
    padding: 8px 16px;
    font-size: 18px;
    letter-spacing: 3px;
    box-shadow: 0 0 12px #ffab0030;
  }

  .prestige-blocked-notice {
    border: 1px solid var(--red-dim);
    background: #05010a;
    padding: 10px 14px;
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 11px;
    color: #703030;
  }

  .prestige-blocked-notice .notice-icon {
    color: var(--red);
    font-size: 16px;
    flex-shrink: 0;
    animation: pulse-green 2s ease-in-out infinite;
  }

  .prestige-blocked-cond {
    color: var(--red);
    font-size: 10px;
    margin-top: 3px;
    letter-spacing: 1px;
  }

  .prestige-two-col {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 14px;
  }

  .prestige-list-card {
    border: 1px solid #0a1e0e;
    background: #010a02;
  }

  .prestige-list-header {
    padding: 6px 12px;
    border-bottom: 1px solid #0a1e0e;
    font-size: 10px;
    letter-spacing: 2px;
    display: flex;
    align-items: center;
    gap: 6px;
  }

  .prestige-list-header.reset-header { color: var(--red); }
  .prestige-list-header.keep-header { color: var(--green); text-shadow: var(--glow); }

  .prestige-list-body {
    padding: 8px 12px;
    list-style: none;
  }

  .prestige-list-body li {
    font-size: 10px;
    padding: 3px 0;
    border-bottom: 1px solid #06100a;
    display: flex;
    align-items: center;
    gap: 6px;
  }

  .prestige-list-body li:last-child { border-bottom: none; }

  .prestige-list-body.reset-list li { color: #703030; }
  .prestige-list-body.reset-list li::before { content: '‚úó'; color: var(--red); }

  .prestige-list-body.keep-list li { color: var(--green-mid); }
  .prestige-list-body.keep-list li::before { content: '‚úì'; color: var(--green); }

  /* Prestige star tree */
  .star-tree-card {
    border: 1px solid #0a1e0e;
    background: #010a02;
  }

  .star-tree-header {
    padding: 6px 12px;
    border-bottom: 1px solid #0a1e0e;
    font-size: 10px;
    letter-spacing: 2px;
    color: var(--amber);
    text-shadow: var(--glow-amber);
  }

  .star-tree-body {
    padding: 16px;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 12px;
    flex-wrap: wrap;
  }

  .star-slot {
    width: 60px;
    height: 60px;
    border: 2px solid #0a2010;
    background: #010800;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
    gap: 2px;
    cursor: not-allowed;
    position: relative;
  }

  .star-slot .slot-icon {
    font-size: 20px;
    color: #1a3a20;
  }

  .star-slot .slot-label {
    font-size: 7px;
    color: #1a3a20;
    letter-spacing: 1px;
  }

  .star-connector {
    width: 24px;
    height: 2px;
    background: #0a2010;
  }

  /* History block */
  .prestige-history-card {
    border: 1px solid #0a1e0e;
    background: #010a02;
  }

  .history-header {
    padding: 6px 12px;
    border-bottom: 1px solid #0a1e0e;
    font-size: 10px;
    letter-spacing: 2px;
    color: var(--green-dim);
  }

  .history-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 6px 12px;
    font-size: 10px;
    border-bottom: 1px solid #060e07;
  }

  .history-row:last-child { border-bottom: none; }

  .history-row .h-season { color: var(--green); letter-spacing: 2px; }
  .history-row .h-start { color: var(--green-dim); }
  .history-row .h-status {
    font-size: 9px;
    color: var(--amber);
    border: 1px solid var(--amber-dim);
    padding: 1px 6px;
    letter-spacing: 1px;
  }

  /* ==============================================
     MODAL
  ============================================== */
  #modal-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.82);
    z-index: 1000;
    display: none;
    align-items: center;
    justify-content: center;
  }

  #modal-overlay.open {
    display: flex;
  }

  #modal-box {
    background: var(--panel-bg);
    border: 2px solid var(--green-dim);
    box-shadow: var(--glow-strong), 0 0 40px rgba(0,0,0,0.9);
    width: 480px;
    max-width: 90vw;
    max-height: 80vh;
    overflow-y: auto;
    position: relative;
    animation: fadeIn 0.2s ease;
  }

  #modal-box::-webkit-scrollbar {
    width: 4px;
  }
  #modal-box::-webkit-scrollbar-thumb {
    background: var(--green-dim);
  }

  #modal-header {
    background: var(--green-dark);
    border-bottom: 2px solid var(--green-dim);
    padding: 8px 14px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    position: sticky;
    top: 0;
  }

  #modal-title {
    font-size: 12px;
    letter-spacing: 2px;
    color: var(--green);
    text-shadow: var(--glow);
  }

  #modal-close {
    background: transparent;
    border: 1px solid var(--green-dim);
    color: var(--green);
    font-family: var(--font);
    font-size: 11px;
    padding: 2px 8px;
    cursor: pointer;
    letter-spacing: 1px;
    transition: background 0.15s;
  }

  #modal-close:hover {
    background: #0a3020;
  }

  #modal-body {
    padding: 14px;
  }

  .modal-field {
    margin-bottom: 10px;
  }

  .modal-field-label {
    font-size: 9px;
    letter-spacing: 2px;
    color: var(--green-dim);
    margin-bottom: 3px;
  }

  .modal-field-value {
    font-size: 11px;
    color: var(--green);
    padding-left: 8px;
  }

  .modal-field-value.amber { color: var(--amber); text-shadow: var(--glow-amber); }
  .modal-field-value.red { color: var(--red); }

  .modal-divider {
    border: none;
    border-top: 1px solid #0a2e14;
    margin: 10px 0;
  }

  /* ==============================================
     ASCII ART SCENE PANELS
  ============================================== */
  .ascii-scene-wrap {
    margin-bottom: 10px;
    border: 1px solid #0a2e14;
    background: #010800;
    position: relative;
  }

  .ascii-scene-wrap.active-scene {
    border-color: var(--amber-dim);
    box-shadow: 0 0 8px #ffab0020, inset 0 0 16px #0a0500;
  }

  .ascii-scene-wrap.complete-scene {
    border-color: var(--green-dim);
    box-shadow: 0 0 4px #00e67620, inset 0 0 12px #010f05;
  }

  .ascii-scene-wrap.locked-scene {
    border-color: #06120a;
    opacity: 0.45;
  }

  .ascii-scene-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 4px 10px;
    border-bottom: 1px solid #0a2e14;
    font-size: 9px;
    letter-spacing: 2px;
    cursor: pointer;
    user-select: none;
  }

  .ascii-scene-wrap.active-scene .ascii-scene-header { color: var(--amber); border-color: var(--amber-dim); }
  .ascii-scene-wrap.complete-scene .ascii-scene-header { color: var(--green-mid); }
  .ascii-scene-wrap.locked-scene .ascii-scene-header { color: #1a3a20; border-color: #06120a; }

  .ascii-scene-toggle {
    font-size: 9px;
    color: inherit;
    letter-spacing: 1px;
  }

  .ascii-scene-body {
    overflow: hidden;
    transition: max-height 0.3s ease;
    max-height: 400px;
  }

  .ascii-scene-body.collapsed {
    max-height: 0;
  }

  pre.ascii-art {
    font-family: 'Share Tech Mono', monospace;
    font-size: 10px;
    line-height: 1.45;
    padding: 10px 12px;
    margin: 0;
    white-space: pre;
    color: var(--green);
    text-shadow: 0 0 4px #00e67650;
    overflow-x: auto;
  }

  .ascii-scene-wrap.active-scene pre.ascii-art {
    color: var(--amber);
    text-shadow: 0 0 5px #ffab0050;
  }

  .ascii-scene-wrap.complete-scene pre.ascii-art {
    color: var(--green-mid);
    text-shadow: 0 0 4px #00994d40;
  }

  .ascii-scene-wrap.locked-scene pre.ascii-art {
    color: #1a3a20;
    text-shadow: none;
  }

  /* ASCII Timeline strip */
  #ascii-timeline-strip {
    margin-top: 12px;
    padding: 8px 0 2px;
    border-top: 1px solid #0a2e14;
  }

  pre.ascii-timeline {
    font-family: 'Share Tech Mono', monospace;
    font-size: 9px;
    line-height: 1.5;
    color: var(--green-dim);
    text-shadow: none;
    white-space: pre;
    overflow-x: auto;
    margin: 0;
  }

  pre.ascii-timeline .tl-done   { color: var(--green);     text-shadow: 0 0 5px #00e67660; }
  pre.ascii-timeline .tl-active { color: var(--amber);     text-shadow: 0 0 5px #ffab0060; }
  pre.ascii-timeline .tl-lock   { color: #1a3a20;          text-shadow: none; }

  /* Animated moon dot */
  .moon-phase-dot {
    display: inline-block;
    font-size: 13px;
    line-height: 1;
    vertical-align: middle;
  }

  /* Milestone ASCII icon prefix */
  .ms-ascii-icon {
    font-family: 'Share Tech Mono', monospace;
    font-size: 10px;
    flex-shrink: 0;
    width: 28px;
    text-align: center;
    color: var(--green-dim);
    margin-top: 1px;
    letter-spacing: 0;
  }

  .ms-item.ms-complete .ms-ascii-icon { color: var(--green); text-shadow: 0 0 4px #00e67650; }
  .ms-item.ms-next    .ms-ascii-icon { color: var(--amber); text-shadow: 0 0 4px #ffab0060; }
  .ms-item.ms-locked  .ms-ascii-icon { color: #1a3a20; }
</style>
</head>
<body>
<div id="main-wrapper">

  <!-- ============================================================
       TOP BAR
  ============================================================ -->
  <div id="top-bar">
    <div class="title-block">
      <span class="title">MOON IDLE</span>
      <span class="title-sep">‚Äî</span>
      <span class="screen-label">ÏûÑÎ¨¥ ÌòÑÌô©</span>
    </div>

    <div class="status-chips">
      <div class="chip">
        <span class="chip-label">SEASON</span>
        <span class="chip-val">01</span>
      </div>
      <div class="chip">
        <span class="chip-label">ERA</span>
        <span class="chip-val amber">Ï§ÄÍ∂§ÎèÑ (60%)</span>
      </div>
      <div class="chip">
        <span class="chip-label">DAY</span>
        <span class="chip-val">D+52</span>
      </div>
      <div class="chip">
        <span class="chip-label">ALTITUDE.MAX</span>
        <span class="chip-val">89.4km</span>
      </div>
    </div>

    <div class="clock" id="clock">00:00:00 <span class="cursor-blink"></span></div>
  </div>

  <!-- ============================================================
       MAIN NAV TABS
  ============================================================ -->
  <div id="nav-tabs">
    <button class="nav-tab" onclick="switchMainTab('production')">‚óã ÏÉùÏÇ∞/ÏûêÏõê</button>
    <button class="nav-tab" onclick="switchMainTab('research')">‚óã Ïó∞Íµ¨/Í∏∞Ïà†</button>
    <button class="nav-tab" onclick="switchMainTab('assembly')">‚óã Î°úÏºì Ï°∞Î¶Ω</button>
    <button class="nav-tab" onclick="switchMainTab('launch')">‚óã Î∞úÏÇ¨ Í¥ÄÏ†ú</button>
    <button class="nav-tab mission-tab active" onclick="switchMainTab('mission')">‚ñ∂ ÏûÑÎ¨¥ ÌòÑÌô©</button>
  </div>

  <!-- ============================================================
       CONTENT AREA
  ============================================================ -->
  <div id="content-area">

    <!-- PLACEHOLDER SCREENS -->
    <div class="screen placeholder-screen" id="screen-production">
      <div class="ph-icon">‚öô</div>
      <div class="ph-label">ÏÉùÏÇ∞/ÏûêÏõê ÌôîÎ©¥</div>
    </div>
    <div class="screen placeholder-screen" id="screen-research">
      <div class="ph-icon">üî¨</div>
      <div class="ph-label">Ïó∞Íµ¨/Í∏∞Ïà† ÌôîÎ©¥</div>
    </div>
    <div class="screen placeholder-screen" id="screen-assembly">
      <div class="ph-icon">üöÄ</div>
      <div class="ph-label">Î°úÏºì Ï°∞Î¶Ω ÌôîÎ©¥</div>
    </div>
    <div class="screen placeholder-screen" id="screen-launch">
      <div class="ph-icon">üì°</div>
      <div class="ph-label">Î∞úÏÇ¨ Í¥ÄÏ†ú ÌôîÎ©¥</div>
    </div>

    <!-- ========================================================
         MISSION PROGRESS SCREEN
    ======================================================== -->
    <div class="screen active" id="screen-mission" style="flex-direction: column;">

      <!-- Sub-tabs -->
      <div id="mission-sub-tabs">
        <button class="sub-tab active" onclick="switchSubTab('phases')">‚óè ÏßÑÌñâ Îã®Í≥Ñ</button>
        <button class="sub-tab" onclick="switchSubTab('milestones')">‚óã ÎßàÏùºÏä§ÌÜ§</button>
        <button class="sub-tab" onclick="switchSubTab('achievements')">‚óã ÏóÖÏ†Å</button>
        <button class="sub-tab" onclick="switchSubTab('prestige')">‚óã ÌîÑÎ†àÏä§Ìã∞ÏßÄ</button>
      </div>

      <!-- ======================================================
           SUB-SCREEN: ÏßÑÌñâ Îã®Í≥Ñ
      ====================================================== -->
      <div class="sub-screen active" id="subscreen-phases" style="flex-direction: column; flex: 1; overflow: hidden;">

        <!-- PHASE TIMELINE ZONE -->
        <div id="timeline-zone">
          <div class="zone-label">// PHASE PROGRESSION TIMELINE</div>
          <div id="timeline-row">

            <!-- Phase 1 -->
            <div class="phase-node" onclick="showPhaseModal(1)" title="Phase 1: ÌîÑÎ°úÌÜ†ÌÉÄÏûÖ ÏóêÎùº">
              <div class="phase-dot complete">‚úì</div>
              <div class="phase-info">
                <span class="phase-name complete">ÌîÑÎ°úÌÜ†ÌÉÄÏûÖ ÏóêÎùº</span>
                <span class="phase-status-text complete">COMPLETE</span>
                <span class="phase-sub complete">D+07 ~ D+35</span>
              </div>
            </div>

            <div class="phase-connector complete"></div>

            <!-- Phase 2 -->
            <div class="phase-node" onclick="showPhaseModal(2)" title="Phase 2: Ï§ÄÍ∂§ÎèÑ ÏóêÎùº">
              <div class="phase-dot in-progress">‚ñ∂</div>
              <div class="phase-info">
                <span class="phase-name in-progress">Ï§ÄÍ∂§ÎèÑ ÏóêÎùº</span>
                <span class="phase-status-text in-progress">IN PROGRESS ‚ñ∂</span>
                <span class="phase-sub in-progress">89.4km / 100km</span>
                <div class="phase-mini-progress">
                  <div class="phase-mini-bar">
                    <div class="phase-mini-fill"></div>
                  </div>
                </div>
              </div>
            </div>

            <div class="phase-connector partial"></div>

            <!-- Phase 3 -->
            <div class="phase-node" onclick="showPhaseModal(3)" title="Phase 3: Í∂§ÎèÑ ÏóêÎùº">
              <div class="phase-dot locked">üîí</div>
              <div class="phase-info">
                <span class="phase-name locked">Í∂§ÎèÑ ÏóêÎùº</span>
                <span class="phase-status-text locked">LOCKED</span>
                <span class="phase-sub locked">100km Îã¨ÏÑ± ÌïÑÏöî</span>
              </div>
            </div>

            <div class="phase-connector locked"></div>

            <!-- Phase 4 -->
            <div class="phase-node" onclick="showPhaseModal(4)" title="Phase 4: ÏãúÏä§Î£®ÎÇò ÏóêÎùº">
              <div class="phase-dot locked">üîí</div>
              <div class="phase-info">
                <span class="phase-name locked">ÏãúÏä§Î£®ÎÇò ÏóêÎùº</span>
                <span class="phase-status-text locked">LOCKED</span>
                <span class="phase-sub locked">Îã¨ Í∂§Ï†Å Í≥ÑÏÇ∞ Í∏∞Ïà† ÌïÑÏöî</span>
              </div>
            </div>

            <div class="phase-connector locked"></div>

            <!-- Phase 5 -->
            <div class="phase-node" onclick="showPhaseModal(5)" title="Phase 5: Îã¨ ÌëúÎ©¥ ÏóêÎùº">
              <div class="phase-dot locked">üîí</div>
              <div class="phase-info">
                <span class="phase-name locked">Îã¨ ÌëúÎ©¥ ÏóêÎùº</span>
                <span class="phase-status-text locked">LOCKED</span>
                <span class="phase-sub locked">ISRU Í∏∞Ï¥à Í∏∞Ïà† ÌïÑÏöî</span>
              </div>
            </div>

          </div><!-- #timeline-row -->

          <!-- ASCII MISSION TIMELINE STRIP -->
          <div id="ascii-timeline-strip">
            <pre class="ascii-timeline" id="ascii-timeline-pre"></pre>
          </div>

        </div><!-- #timeline-zone -->

        <!-- MIDDLE ZONE -->
        <div id="mid-zone">

          <!-- LEFT: Phase Detail -->
          <div id="phase-detail-col">
            <div class="col-header">ÌòÑÏû¨ ÏóêÎùº ÏÉÅÏÑ∏</div>
            <div id="phase-detail-scroll">

              <!-- ================================================
                   ASCII PHASE SCENE PANELS
              ================================================ -->

              <!-- Phase 5 scene (LOCKED) -->
              <div class="ascii-scene-wrap locked-scene" id="ascii-scene-5" style="display:none;">
                <div class="ascii-scene-header" onclick="toggleAsciiScene(5)">
                  <span>// PHASE 5 ‚Äî LUNAR SURFACE</span>
                  <span class="ascii-scene-toggle" id="ascii-toggle-5">[‚àí]</span>
                </div>
                <div class="ascii-scene-body" id="ascii-body-5">
<pre class="ascii-art">        ___
    ___/   \___    ‚Üê Moon surface horizon
   /   crater  \
  /_____________\

    /\     /\      ‚Üê Landing legs
   /  \___/  \
  | LUNAR BASE |
   \__________/
  ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë
  [REQUIRES: Îã¨ Ï†ÑÏù¥ Í∂§ÎèÑ]</pre>
                </div>
              </div>

              <!-- Phase 4 scene (LOCKED) -->
              <div class="ascii-scene-wrap locked-scene" id="ascii-scene-4" style="display:none;">
                <div class="ascii-scene-header" onclick="toggleAsciiScene(4)">
                  <span>// PHASE 4 ‚Äî CISLUNAR OPS</span>
                  <span class="ascii-scene-toggle" id="ascii-toggle-4">[‚àí]</span>
                </div>
                <div class="ascii-scene-body" id="ascii-body-4">
<pre class="ascii-art">    .  *  .  .  *           Stars/space
  *    .    .    *
       .  (  )  .           Moon silhouette
      .  (    )  .
        (  <span class="moon-phase-dot" id="moon-dot">‚óã</span>  )
         (  )
          ()
  ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë
  [REQUIRES: Í∂§ÎèÑ ÏïàÏ†ïÌôî]</pre>
                </div>
              </div>

              <!-- Phase 3 scene (LOCKED) -->
              <div class="ascii-scene-wrap locked-scene" id="ascii-scene-3" style="display:none;">
                <div class="ascii-scene-header" onclick="toggleAsciiScene(3)">
                  <span>// PHASE 3 ‚Äî ORBITAL COMPLEX</span>
                  <span class="ascii-scene-toggle" id="ascii-toggle-3">[‚àí]</span>
                </div>
                <div class="ascii-scene-body" id="ascii-body-3">
<pre class="ascii-art">  ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë
  ‚ñë  ‚îå‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îê ‚ñë   (dim, locked state)
  ‚ñë  ‚îÇ  ‚îÇ  ‚îÇ      ‚îÇ  ‚îÇ  ‚îÇ ‚ñë
  ‚ñë  ‚îî‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îò ‚ñë
  ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë
       [REQUIRES: Ïπ¥Î•¥ÎßåÏÑ† ÎèåÌåå]</pre>
                </div>
              </div>

              <!-- Phase 2 scene (ACTIVE) -->
              <div class="ascii-scene-wrap active-scene" id="ascii-scene-2" style="display:none;">
                <div class="ascii-scene-header" onclick="toggleAsciiScene(2)">
                  <span>// PHASE 2 ‚Äî SUBORBITAL FACILITY  [ACTIVE]</span>
                  <span class="ascii-scene-toggle" id="ascii-toggle-2">[‚àí]</span>
                </div>
                <div class="ascii-scene-body" id="ascii-body-2">
<pre class="ascii-art">  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
  ‚îÇ  FORGE   ‚îÇ   ‚îÇ ASSEMBLY ‚îÇ   Established factory
  ‚îÇ  ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë  ‚îÇ   ‚îÇ   ‚ñà‚ñà‚ñà‚ñà   ‚îÇ
  ‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ  ‚îÇ   ‚îÇ   ‚ñà‚ñà‚ñà‚ñà   ‚îÇ
  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                    ‚ïë
                 ‚îÄ‚îÄ‚îÄ‚ï´‚îÄ‚îÄ‚îÄ   ‚Üê launch rail
                    ‚ïë
                 /‚îÄ‚îÄ‚î¥‚îÄ‚îÄ\
                / BETA  \
               /__mk.2___\
                 | | |</pre>
                </div>
              </div>

              <!-- Phase 1 scene (COMPLETE) -->
              <div class="ascii-scene-wrap complete-scene" id="ascii-scene-1" style="display:none;">
                <div class="ascii-scene-header" onclick="toggleAsciiScene(1)">
                  <span>// PHASE 1 ‚Äî PROTOTYPE LAB  [COMPLETE ‚úì]</span>
                  <span class="ascii-scene-toggle" id="ascii-toggle-1">[‚àí]</span>
                </div>
                <div class="ascii-scene-body" id="ascii-body-1">
<pre class="ascii-art">      /\
     /  \         Simple tent/shed structure
    /____\
   | LAB  |       Small makeshift rocket on stand:
   |______|
                     |
               /‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\
              |   ALPHA      |
              |   mk.1       |
              |______________|
                   | | |</pre>
                </div>
              </div>

              <!-- ACTIVE PHASE 2 CARD -->
              <div class="phase-card active-phase">
                <div class="phase-card-header">
                  <span class="phase-card-title">PHASE 2: Ï§ÄÍ∂§ÎèÑ ÏóêÎùº</span>
                  <span class="phase-card-badge">IN PROGRESS</span>
                </div>
                <div class="phase-card-body">
                  <div class="phase-subtitle">"Ïπ¥Î•¥Îßå ÏÑ†ÏùÑ ÎÑòÏñ¥Îùº"</div>

                  <!-- Altitude display -->
                  <div class="altitude-display">
                    <div>
                      <span class="altitude-current">89.4<span class="altitude-unit">km</span></span>
                    </div>
                    <div class="altitude-target">
                      Î™©Ìëú: <strong>100km</strong>
                      <span>K√°rm√°n Line</span>
                      <span style="color: var(--amber-dim);">ÏûîÏó¨ 10.6km</span>
                    </div>
                  </div>

                  <!-- Progress bar -->
                  <div class="progress-bar-wrap">
                    <div class="progress-fill" style="width: 60%;"></div>
                  </div>
                  <div class="progress-label">
                    <span>ÏóêÎùº ÏßÑÌñâ</span>
                    <span class="pct">60%</span>
                  </div>

                  <!-- Phase 2 conditions -->
                  <div class="section-divider">ÏóêÎùº Ï°∞Í±¥</div>
                  <ul class="check-list">
                    <li>
                      <span class="check-icon done">[‚úì]</span>
                      <span class="check-text done">ÏïåÎ£®ÎØ∏ÎäÑ ÏÉùÏÇ∞ ÏïàÏ†ïÌôî</span>
                    </li>
                    <li>
                      <span class="check-icon done">[‚úì]</span>
                      <span class="check-text done">Ï≤´ Ïπ¥Î•¥ÎßåÏÑ† ÏãúÎèÑ ÏôÑÎ£å (89.4km Ï§ÄÏÑ±Í≥µ)</span>
                    </li>
                    <li>
                      <span class="check-icon fail">[‚úó]</span>
                      <span class="check-text fail">Ïπ¥Î•¥ÎßåÏÑ† 100km Îã¨ÏÑ± (ÎØ∏ÏôÑ)</span>
                    </li>
                    <li>
                      <span class="check-icon fail">[‚úó]</span>
                      <span class="check-text fail">ÌÑ∞Î≥¥ÌéåÌîÑ ÏÇ¨Ïù¥ÌÅ¥ Ïó∞Íµ¨ ÏôÑÎ£å (ÎØ∏ÏôÑ)</span>
                    </li>
                  </ul>

                  <!-- Phase 3 entry conditions -->
                  <div class="section-divider" style="color: var(--red); border-color: var(--red-dim);">Phase 3 ÏßÑÏûÖ Ï°∞Í±¥ ÎØ∏Îã¨</div>
                  <ul class="req-list">
                    <li>100km Îã¨ÏÑ± ÌïÑÏöî (ÌòÑÏû¨ 89.4km)</li>
                    <li>ÌÑ∞Î≥¥ÌéåÌîÑ ÏÇ¨Ïù¥ÌÅ¥ Ïó∞Íµ¨ ÌïÑÏöî</li>
                    <li>
                      ÏûêÍ∏à ‚Ç©50,000,000 ÌïÑÏöî
                      <span class="sub-val">ÌòÑÏû¨: ‚Ç©2,847,000 (5.7%)</span>
                    </li>
                  </ul>

                  <!-- Mini fund progress -->
                  <div style="margin-top: 8px;">
                    <div class="progress-bar-wrap" style="height: 6px;">
                      <div class="progress-fill" style="width: 5.7%; background: var(--red); box-shadow: 0 0 6px var(--red);"></div>
                    </div>
                    <div class="progress-label" style="margin-bottom: 0;">
                      <span style="color: #703030;">ÏûêÍ∏à Îã¨ÏÑ±ÎèÑ</span>
                      <span style="color: var(--red);">5.7%</span>
                    </div>
                  </div>
                </div>
              </div>

              <!-- COMPLETED PHASE 1 COMPACT CARD -->
              <div class="section-divider">ÏôÑÎ£åÎêú ÏóêÎùº</div>

              <div class="phase-card completed-phase" style="margin-bottom: 0;">
                <div class="phase-card-header">
                  <span class="phase-card-title">PHASE 1: ÌîÑÎ°úÌÜ†ÌÉÄÏûÖ ÏóêÎùº</span>
                  <span class="phase-card-badge">COMPLETE ‚úì</span>
                </div>
                <div class="phase-card-body">
                  <div style="font-size: 10px; color: var(--green-dim); margin-bottom: 6px; letter-spacing: 1px;">
                    "Ï≤´ Î∞úÏÇ¨ÎåÄÏóêÏÑú ÌïòÎäòÎ°ú" ‚Äî D+07 ~ D+35
                  </div>
                  <div style="font-size: 10px; color: var(--green-mid); margin-bottom: 4px; letter-spacing: 1px;">ÏµúÍ≥† Îã¨ÏÑ± Í≥†ÎèÑ</div>
                  <div style="display: flex; gap: 16px; margin-bottom: 8px;">
                    <div>
                      <div style="font-size: 18px; color: var(--green); text-shadow: var(--glow); letter-spacing: 2px;">39km</div>
                      <div style="font-size: 9px; color: var(--green-dim);">Felix Line</div>
                    </div>
                    <div>
                      <div style="font-size: 18px; color: var(--green); text-shadow: var(--glow); letter-spacing: 2px;">10km</div>
                      <div style="font-size: 9px; color: var(--green-dim);">Í≥µÏãù Îã¨ÏÑ±</div>
                    </div>
                  </div>
                  <div style="font-size: 10px; color: var(--green-dim); margin-bottom: 4px; letter-spacing: 1px;">ÌöçÎìù Î≥¥ÎÑàÏä§</div>
                  <ul style="list-style: none; font-size: 10px; color: var(--green-mid);">
                    <li style="padding: 1px 0;">‚óè Íµ¨Ï°∞ Í∞ïÎèÑ +10%</li>
                    <li style="padding: 1px 0;">‚óè Í∏∞Ï¥à Ïó∞Íµ¨ÏÜçÎèÑ +5%</li>
                  </ul>
                </div>
              </div>

            </div><!-- phase-detail-scroll -->
          </div><!-- phase-detail-col -->

          <!-- RIGHT: Milestone Tracker -->
          <div id="milestone-col">
            <div class="col-header">
              ÎßàÏùºÏä§ÌÜ§ Ìä∏ÎûòÏª§
              <span class="milestone-count">7 / 25 Îã¨ÏÑ±</span>
            </div>
            <div id="milestone-scroll">

              <!-- Phase 1 milestones -->
              <div class="milestone-phase-header">
                <span>PHASE 1: ÌîÑÎ°úÌÜ†ÌÉÄÏûÖ ÏóêÎùº</span>
                <span class="ph-badge done">5/5 ÏôÑÎ£å</span>
              </div>

              <div class="ms-item ms-complete" onclick="showMilestoneModal('first-ignition')">
                <span class="ms-icon done">‚úì</span>
                <span class="ms-ascii-icon">/|\</span>
                <div class="ms-body">
                  <div class="ms-name">First Ignition</div>
                  <div class="ms-cond">Ï≤´ ÏóîÏßÑ Ï†êÌôî ÏÑ±Í≥µ</div>
                </div>
                <div class="ms-right">
                  <div class="ms-date">D+07</div>
                  <div class="ms-reward">RP +50</div>
                </div>
              </div>

              <div class="ms-item ms-complete" onclick="showMilestoneModal('1km-club')">
                <span class="ms-icon done">‚úì</span>
                <span class="ms-ascii-icon">/|\</span>
                <div class="ms-body">
                  <div class="ms-name">1km Club</div>
                  <div class="ms-cond">Í≥†ÎèÑ 1km ÎèåÌåå</div>
                </div>
                <div class="ms-right">
                  <div class="ms-date">D+07</div>
                  <div class="ms-reward">RP +75</div>
                </div>
              </div>

              <div class="ms-item ms-complete" onclick="showMilestoneModal('boundary-pusher')">
                <span class="ms-icon done">‚úì</span>
                <span class="ms-ascii-icon">‚Üë10</span>
                <div class="ms-body">
                  <div class="ms-name">Boundary Pusher</div>
                  <div class="ms-cond">Í≥†ÎèÑ 10km ÎèåÌåå</div>
                </div>
                <div class="ms-right">
                  <div class="ms-date">D+14</div>
                  <div class="ms-reward">RP +100</div>
                </div>
              </div>

              <div class="ms-item ms-complete" onclick="showMilestoneModal('stratosphere')">
                <span class="ms-icon done">‚úì</span>
                <span class="ms-ascii-icon">‚Üë20</span>
                <div class="ms-body">
                  <div class="ms-name">Stratosphere</div>
                  <div class="ms-cond">Í≥†ÎèÑ 20km ÎèåÌåå (ÏÑ±Ï∏µÍ∂å)</div>
                </div>
                <div class="ms-right">
                  <div class="ms-date">D+18</div>
                  <div class="ms-reward">RP +150</div>
                </div>
              </div>

              <div class="ms-item ms-complete" onclick="showMilestoneModal('felix-line')">
                <span class="ms-icon done">‚úì</span>
                <span class="ms-ascii-icon">‚Üë39</span>
                <div class="ms-body">
                  <div class="ms-name">Felix Line</div>
                  <div class="ms-cond">Í≥†ÎèÑ 39km ÎèåÌåå (Ìé†Î¶≠Ïä§ ÎùºÏù∏)</div>
                </div>
                <div class="ms-right">
                  <div class="ms-date">D+25</div>
                  <div class="ms-reward">RP +200</div>
                </div>
              </div>

              <!-- Phase 2 milestones -->
              <div class="milestone-phase-header">
                <span>PHASE 2: Ï§ÄÍ∂§ÎèÑ ÏóêÎùº</span>
                <span class="ph-badge active">2/5 ÏßÑÌñâ Ï§ë</span>
              </div>

              <div class="ms-item ms-complete" onclick="showMilestoneModal('mesosphere')">
                <span class="ms-icon done">‚úì</span>
                <span class="ms-ascii-icon">‚Üë50</span>
                <div class="ms-body">
                  <div class="ms-name">Mesosphere Entry</div>
                  <div class="ms-cond">Í≥†ÎèÑ 50km ÎèåÌåå (Ï§ëÍ∞ÑÍ∂å)</div>
                </div>
                <div class="ms-right">
                  <div class="ms-date">D+35</div>
                  <div class="ms-reward">RP +300</div>
                </div>
              </div>

              <div class="ms-item ms-complete" onclick="showMilestoneModal('weather-eye')">
                <span class="ms-icon done">‚úì</span>
                <span class="ms-ascii-icon">/|\</span>
                <div class="ms-body">
                  <div class="ms-name">Weather Eye</div>
                  <div class="ms-cond">200km Í∂§ÎèÑ Ï§ÄÏÑ±Í≥µ Ïù∏Ï†ï</div>
                </div>
                <div class="ms-right">
                  <div class="ms-date">D+35</div>
                  <div class="ms-reward">RP +250</div>
                </div>
              </div>

              <div class="ms-item ms-next" onclick="showMilestoneModal('karman-line')">
                <span class="ms-icon" style="color: var(--amber);">‚ñ∂</span>
                <span class="ms-ascii-icon" style="color:var(--amber);">‚ïê‚ïê‚ïê</span>
                <div class="ms-body">
                  <div class="ms-name">K√°rm√°n Line</div>
                  <div class="ms-cond">Í≥†ÎèÑ Ï†ïÌôïÌûà 100km ÎèåÌåå</div>
                  <div class="ms-mini-progress">
                    <div class="ms-mini-bar">
                      <div class="ms-mini-fill" style="width: 89.4%;"></div>
                    </div>
                    <div class="ms-mini-label">89.4 / 100km</div>
                  </div>
                </div>
                <div class="ms-right">
                  <div class="ms-reward">RP +500</div>
                  <div style="font-size: 8px; color: var(--amber-dim); margin-top: 2px;">Îã§Ïùå Î™©Ìëú</div>
                </div>
              </div>

              <div class="ms-item ms-available" onclick="showMilestoneModal('tourist-alt')">
                <span class="ms-icon" style="color: var(--green-dim);">‚óã</span>
                <span class="ms-ascii-icon">‚óã</span>
                <div class="ms-body">
                  <div class="ms-name">Tourist Altitude</div>
                  <div class="ms-cond">Í≥†ÎèÑ 120km Îã¨ÏÑ± (Ïö∞Ï£ºÍ¥ÄÍ¥ë Í≥†ÎèÑ)</div>
                </div>
                <div class="ms-right">
                  <div class="ms-reward">RP +400</div>
                </div>
              </div>

              <div class="ms-item ms-available" onclick="showMilestoneModal('suborbital-return')">
                <span class="ms-icon" style="color: var(--green-dim);">‚óã</span>
                <span class="ms-ascii-icon">/|\</span>
                <div class="ms-body">
                  <div class="ms-name">Suborbital Return</div>
                  <div class="ms-cond">Ï§ÄÍ∂§ÎèÑ ÎπÑÌñâ ÌõÑ ÌöåÏàò ÏÑ±Í≥µ</div>
                </div>
                <div class="ms-right">
                  <div class="ms-reward">RP +600</div>
                </div>
              </div>

              <!-- Phase 3-5 milestones (locked) -->
              <div class="milestone-phase-header">
                <span>PHASE 3: Í∂§ÎèÑ ÏóêÎùº</span>
                <span class="ph-badge locked">0/5 Ïû†Í∏à</span>
              </div>

              <div class="ms-item ms-locked">
                <span class="ms-icon">üîí</span>
                <span class="ms-ascii-icon">‚óã</span>
                <div class="ms-body">
                  <div class="ms-name">First Orbit</div>
                  <div class="ms-cond">LEO Í∂§ÎèÑ ÏßÑÏûÖ ÏÑ±Í≥µ</div>
                </div>
                <div class="ms-right"><div class="ms-reward">RP +1000</div></div>
              </div>
              <div class="ms-item ms-locked">
                <span class="ms-icon">üîí</span>
                <span class="ms-ascii-icon">‚óã</span>
                <div class="ms-body">
                  <div class="ms-name">Orbital Decay</div>
                  <div class="ms-cond">Í∂§ÎèÑ Ïú†ÏßÄ 3ÌöåÏ†Ñ ÏÑ±Í≥µ</div>
                </div>
                <div class="ms-right"><div class="ms-reward">RP +800</div></div>
              </div>
              <div class="ms-item ms-locked">
                <span class="ms-icon">üîí</span>
                <span class="ms-ascii-icon">‚óã</span>
                <div class="ms-body">
                  <div class="ms-name">Deorbit Master</div>
                  <div class="ms-cond">Ï†ïÎ∞Ä Ïû¨ÏßÑÏûÖ Î∞è ÌöåÏàò</div>
                </div>
                <div class="ms-right"><div class="ms-reward">RP +1200</div></div>
              </div>
              <div class="ms-item ms-locked">
                <span class="ms-icon">üîí</span>
                <span class="ms-ascii-icon">/|\</span>
                <div class="ms-body">
                  <div class="ms-name">Payload Delivery</div>
                  <div class="ms-cond">ÏúÑÏÑ± ÌÉëÏû¨Ï≤¥ LEO Ìà¨ÏûÖ</div>
                </div>
                <div class="ms-right"><div class="ms-reward">RP +1500</div></div>
              </div>
              <div class="ms-item ms-locked">
                <span class="ms-icon">üîí</span>
                <span class="ms-ascii-icon">‚óã</span>
                <div class="ms-body">
                  <div class="ms-name">Rendezvous</div>
                  <div class="ms-cond">Í∂§ÎèÑ ÎûëÎç∞Î∂Ä ÏÑ±Í≥µ</div>
                </div>
                <div class="ms-right"><div class="ms-reward">RP +2000</div></div>
              </div>

              <div class="milestone-phase-header">
                <span>PHASE 4: ÏãúÏä§Î£®ÎÇò ÏóêÎùº</span>
                <span class="ph-badge locked">0/5 Ïû†Í∏à</span>
              </div>
              <div class="ms-item ms-locked">
                <span class="ms-icon">üîí</span>
                <span class="ms-ascii-icon">/|\</span>
                <div class="ms-body">
                  <div class="ms-name">Lunar Transfer</div>
                  <div class="ms-cond">Îã¨ Ï†ÑÏù¥ Í∂§ÎèÑ ÏßÑÏûÖ</div>
                </div>
                <div class="ms-right"><div class="ms-reward">RP +3000</div></div>
              </div>
              <div class="ms-item ms-locked">
                <span class="ms-icon">üîí</span>
                <span class="ms-ascii-icon">(C)</span>
                <div class="ms-body">
                  <div class="ms-name">Lunar Flyby</div>
                  <div class="ms-cond">Îã¨ ÌîåÎùºÏù¥Î∞îÏù¥ ÏôÑÎ£å</div>
                </div>
                <div class="ms-right"><div class="ms-reward">RP +3500</div></div>
              </div>
              <div class="ms-item ms-locked">
                <span class="ms-icon">üîí</span>
                <span class="ms-ascii-icon">( )</span>
                <div class="ms-body">
                  <div class="ms-name">Lunar Orbit</div>
                  <div class="ms-cond">Îã¨ Í∂§ÎèÑ ÏßÑÏûÖ Î∞è Ïú†ÏßÄ</div>
                </div>
                <div class="ms-right"><div class="ms-reward">RP +5000</div></div>
              </div>
              <div class="ms-item ms-locked">
                <span class="ms-icon">üîí</span>
                <span class="ms-ascii-icon">(C)</span>
                <div class="ms-body">
                  <div class="ms-name">Far Side</div>
                  <div class="ms-cond">Îã¨ Îí∑Î©¥ ÌÉêÏÇ¨ ÏôÑÎ£å</div>
                </div>
                <div class="ms-right"><div class="ms-reward">RP +4000</div></div>
              </div>
              <div class="ms-item ms-locked">
                <span class="ms-icon">üîí</span>
                <span class="ms-ascii-icon">/|\</span>
                <div class="ms-body">
                  <div class="ms-name">Cislunar Return</div>
                  <div class="ms-cond">ÏßÄÍµ¨-Îã¨ ÏôïÎ≥µ ÏÑ±Í≥µ</div>
                </div>
                <div class="ms-right"><div class="ms-reward">RP +6000</div></div>
              </div>

              <div class="milestone-phase-header">
                <span>PHASE 5: Îã¨ ÌëúÎ©¥ ÏóêÎùº</span>
                <span class="ph-badge locked">0/5 Ïû†Í∏à</span>
              </div>
              <div class="ms-item ms-locked">
                <span class="ms-icon">üîí</span>
                <span class="ms-ascii-icon">[+]</span>
                <div class="ms-body">
                  <div class="ms-name">Touchdown</div>
                  <div class="ms-cond">Îã¨ Ï∞©Î•ô ÏÑ±Í≥µ (Ï≤´ ÌÑ∞ÏπòÎã§Ïö¥)</div>
                </div>
                <div class="ms-right"><div class="ms-reward">RP +10000</div></div>
              </div>
              <div class="ms-item ms-locked">
                <span class="ms-icon">üîí</span>
                <span class="ms-ascii-icon">[*]</span>
                <div class="ms-body">
                  <div class="ms-name">Surface Sample</div>
                  <div class="ms-cond">Îã¨ ÌëúÎ©¥ ÏÉòÌîå Ï±ÑÏ∑®</div>
                </div>
                <div class="ms-right"><div class="ms-reward">RP +8000</div></div>
              </div>
              <div class="ms-item ms-locked">
                <span class="ms-icon">üîí</span>
                <span class="ms-ascii-icon">[#]</span>
                <div class="ms-body">
                  <div class="ms-name">ISRU Pioneer</div>
                  <div class="ms-cond">ÌòÑÏßÄ ÏûêÏõê ÌôúÏö© ÏÑ±Í≥µ</div>
                </div>
                <div class="ms-right"><div class="ms-reward">RP +12000</div></div>
              </div>
              <div class="ms-item ms-locked">
                <span class="ms-icon">üîí</span>
                <span class="ms-ascii-icon">[B]</span>
                <div class="ms-body">
                  <div class="ms-name">Lunar Base Alpha</div>
                  <div class="ms-cond">Îã¨ Í∏∞ÏßÄ Í±¥ÏÑ§ ÏôÑÎ£å</div>
                </div>
                <div class="ms-right"><div class="ms-reward">RP +20000</div></div>
              </div>
              <div class="ms-item ms-locked" style="border-color: #1a3a20;">
                <span class="ms-icon">üîí</span>
                <span class="ms-ascii-icon" style="color:#1a3a20;">[!]</span>
                <div class="ms-body">
                  <div class="ms-name" style="color: #2a5c35; font-size: 12px; letter-spacing: 2px;">Ïù∏Î•òÏùò ÎèÑÏïΩ</div>
                  <div class="ms-cond" style="color: #1a3a20;">Îã¨ Ï†ïÏ∞©ÏßÄ Ïö¥Ïö© Í∞úÏãú ‚Äî ÏµúÏ¢Ö ÎßàÏùºÏä§ÌÜ§</div>
                </div>
                <div class="ms-right"><div class="ms-reward" style="color: #2a5c35; border-color: #1a3a20;">RP +50000</div></div>
              </div>

            </div><!-- #milestone-scroll -->
          </div><!-- #milestone-col -->

        </div><!-- #mid-zone -->

        <!-- STATS STRIP -->
        <div id="stats-strip">
          <div class="stat-item">
            <span class="stat-label">Ï¥ù Î∞úÏÇ¨ ÏãúÎèÑ</span>
            <span class="stat-value">3Ìöå</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">ÏµúÍ≥† Í≥†ÎèÑ</span>
            <span class="stat-value amber">89.4km</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Ï¥ù ÎπÑÌñâÏãúÍ∞Ñ</span>
            <span class="stat-value">847s</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">ÌöçÎìù RP</span>
            <span class="stat-value">2,094</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">ÏÜåÎ™® ÏûêÍ∏à</span>
            <span class="stat-value">‚Ç©3.2M</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">ÌòÑÏû¨ ÏãúÏ¶å</span>
            <span class="stat-value">1</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">ÌîÑÎ†àÏä§Ìã∞ÏßÄ</span>
            <span class="stat-value">0Ìöå</span>
          </div>
          <div class="stat-item" style="margin-left: auto; border-right: none; border-left: 1px solid #0a2e14;">
            <span class="stat-label">ÏûêÎèôÍ¥ÄÎ¶¨Ïûê</span>
            <span class="stat-value">3Î™Ö ÌôúÏÑ±</span>
          </div>
          <div class="stat-item" style="border-right: none;">
            <span class="stat-label">Ïò§ÌîÑÎùºÏù∏ Ìö®Ïú®</span>
            <span class="stat-value">70%</span>
          </div>
        </div>

      </div><!-- subscreen-phases -->

      <!-- ======================================================
           SUB-SCREEN: ÎßàÏùºÏä§ÌÜ§ (full grid)
      ====================================================== -->
      <div class="sub-screen" id="subscreen-milestones">
        <div id="milestone-grid-scroll">

          <!-- Phase 1 Block -->
          <div class="ms-grid-phase-block">
            <div class="ms-grid-phase-header">
              <span class="ms-grid-phase-title">PHASE 1: ÌîÑÎ°úÌÜ†ÌÉÄÏûÖ ÏóêÎùº</span>
              <span class="ms-grid-phase-count">5 / 5 ÏôÑÎ£å</span>
            </div>
            <div class="ms-grid-cards">

              <div class="ms-card card-complete" onclick="showMilestoneModal('first-ignition')">
                <div class="ms-card-name">First Ignition</div>
                <div class="ms-card-cond">Ï≤´ ÏóîÏßÑ Ï†êÌôî ÏÑ±Í≥µ</div>
                <span class="ms-card-reward">RP +50</span>
                <div class="ms-card-date">Îã¨ÏÑ±: D+07</div>
              </div>

              <div class="ms-card card-complete" onclick="showMilestoneModal('1km-club')">
                <div class="ms-card-name">1km Club</div>
                <div class="ms-card-cond">Í≥†ÎèÑ 1km ÎèåÌåå</div>
                <span class="ms-card-reward">RP +75</span>
                <div class="ms-card-date">Îã¨ÏÑ±: D+07</div>
              </div>

              <div class="ms-card card-complete" onclick="showMilestoneModal('boundary-pusher')">
                <div class="ms-card-name">Boundary Pusher</div>
                <div class="ms-card-cond">Í≥†ÎèÑ 10km ÎèåÌåå</div>
                <span class="ms-card-reward">RP +100 ¬∑ Ï≤†Í¥ëÏÑù ÏûêÎèôÌôî Ìï¥Í∏à</span>
                <div class="ms-card-date">Îã¨ÏÑ±: D+14</div>
              </div>

              <div class="ms-card card-complete" onclick="showMilestoneModal('stratosphere')">
                <div class="ms-card-name">Stratosphere</div>
                <div class="ms-card-cond">Í≥†ÎèÑ 20km (ÏÑ±Ï∏µÍ∂å)</div>
                <span class="ms-card-reward">RP +150</span>
                <div class="ms-card-date">Îã¨ÏÑ±: D+18</div>
              </div>

              <div class="ms-card card-complete" onclick="showMilestoneModal('felix-line')">
                <div class="ms-card-name">Felix Line</div>
                <div class="ms-card-cond">Í≥†ÎèÑ 39km (Ìé†Î¶≠Ïä§ ÎùºÏù∏)</div>
                <span class="ms-card-reward">RP +200 ¬∑ VAB Lv.2 Ìï¥Í∏à</span>
                <div class="ms-card-date">Îã¨ÏÑ±: D+25</div>
              </div>

            </div>
          </div>

          <!-- Phase 2 Block -->
          <div class="ms-grid-phase-block">
            <div class="ms-grid-phase-header">
              <span class="ms-grid-phase-title amber">PHASE 2: Ï§ÄÍ∂§ÎèÑ ÏóêÎùº</span>
              <span class="ms-grid-phase-count">2 / 5 ÏßÑÌñâ Ï§ë</span>
            </div>
            <div class="ms-grid-cards">

              <div class="ms-card card-complete" onclick="showMilestoneModal('mesosphere')">
                <div class="ms-card-name">Mesosphere Entry</div>
                <div class="ms-card-cond">Í≥†ÎèÑ 50km (Ï§ëÍ∞ÑÍ∂å)</div>
                <span class="ms-card-reward">RP +300</span>
                <div class="ms-card-date">Îã¨ÏÑ±: D+35</div>
              </div>

              <div class="ms-card card-complete" onclick="showMilestoneModal('weather-eye')">
                <div class="ms-card-name">Weather Eye</div>
                <div class="ms-card-cond">200km Ï§ÄÏÑ±Í≥µ Ïù∏Ï†ï</div>
                <span class="ms-card-reward">RP +250</span>
                <div class="ms-card-date">Îã¨ÏÑ±: D+35</div>
              </div>

              <div class="ms-card card-next" onclick="showMilestoneModal('karman-line')">
                <div class="ms-card-name">K√°rm√°n Line</div>
                <div class="ms-card-cond">Í≥†ÎèÑ Ï†ïÌôïÌûà 100km ÎèåÌåå</div>
                <span class="ms-card-reward">RP +500</span>
                <div class="ms-card-progress">
                  <div class="ms-card-bar">
                    <div class="ms-card-bar-fill" style="width: 89.4%;"></div>
                  </div>
                  <div class="ms-card-bar-label">89.4 / 100km</div>
                </div>
              </div>

              <div class="ms-card card-available" onclick="showMilestoneModal('tourist-alt')">
                <div class="ms-card-name">Tourist Altitude</div>
                <div class="ms-card-cond">Í≥†ÎèÑ 120km (Ïö∞Ï£ºÍ¥ÄÍ¥ë Í≥†ÎèÑ)</div>
                <span class="ms-card-reward">RP +400</span>
              </div>

              <div class="ms-card card-available" onclick="showMilestoneModal('suborbital-return')">
                <div class="ms-card-name">Suborbital Return</div>
                <div class="ms-card-cond">Ï§ÄÍ∂§ÎèÑ ÎπÑÌñâ ÌõÑ ÌöåÏàò ÏÑ±Í≥µ</div>
                <span class="ms-card-reward">RP +600</span>
              </div>

            </div>
          </div>

          <!-- Phase 3 Block -->
          <div class="ms-grid-phase-block">
            <div class="ms-grid-phase-header">
              <span class="ms-grid-phase-title locked">PHASE 3: Í∂§ÎèÑ ÏóêÎùº</span>
              <span class="ms-grid-phase-count">0 / 5 Ïû†Í∏à</span>
            </div>
            <div class="ms-grid-cards">
              <div class="ms-card card-locked"><div class="ms-card-name">First Orbit</div><div class="ms-card-cond">LEO Í∂§ÎèÑ ÏßÑÏûÖ ÏÑ±Í≥µ</div><span class="ms-card-reward">RP +1000</span></div>
              <div class="ms-card card-locked"><div class="ms-card-name">Orbital Decay</div><div class="ms-card-cond">Í∂§ÎèÑ Ïú†ÏßÄ 3ÌöåÏ†Ñ</div><span class="ms-card-reward">RP +800</span></div>
              <div class="ms-card card-locked"><div class="ms-card-name">Deorbit Master</div><div class="ms-card-cond">Ï†ïÎ∞Ä Ïû¨ÏßÑÏûÖ Î∞è ÌöåÏàò</div><span class="ms-card-reward">RP +1200</span></div>
              <div class="ms-card card-locked"><div class="ms-card-name">Payload Delivery</div><div class="ms-card-cond">ÏúÑÏÑ± ÌÉëÏû¨Ï≤¥ LEO Ìà¨ÏûÖ</div><span class="ms-card-reward">RP +1500</span></div>
              <div class="ms-card card-locked"><div class="ms-card-name">Rendezvous</div><div class="ms-card-cond">Í∂§ÎèÑ ÎûëÎç∞Î∂Ä ÏÑ±Í≥µ</div><span class="ms-card-reward">RP +2000</span></div>
            </div>
          </div>

          <!-- Phase 4 Block -->
          <div class="ms-grid-phase-block">
            <div class="ms-grid-phase-header">
              <span class="ms-grid-phase-title locked">PHASE 4: ÏãúÏä§Î£®ÎÇò ÏóêÎùº</span>
              <span class="ms-grid-phase-count">0 / 5 Ïû†Í∏à</span>
            </div>
            <div class="ms-grid-cards">
              <div class="ms-card card-locked"><div class="ms-card-name">Lunar Transfer</div><div class="ms-card-cond">Îã¨ Ï†ÑÏù¥ Í∂§ÎèÑ ÏßÑÏûÖ</div><span class="ms-card-reward">RP +3000</span></div>
              <div class="ms-card card-locked"><div class="ms-card-name">Lunar Flyby</div><div class="ms-card-cond">Îã¨ ÌîåÎùºÏù¥Î∞îÏù¥ ÏôÑÎ£å</div><span class="ms-card-reward">RP +3500</span></div>
              <div class="ms-card card-locked"><div class="ms-card-name">Lunar Orbit</div><div class="ms-card-cond">Îã¨ Í∂§ÎèÑ ÏßÑÏûÖ Î∞è Ïú†ÏßÄ</div><span class="ms-card-reward">RP +5000</span></div>
              <div class="ms-card card-locked"><div class="ms-card-name">Far Side</div><div class="ms-card-cond">Îã¨ Îí∑Î©¥ ÌÉêÏÇ¨</div><span class="ms-card-reward">RP +4000</span></div>
              <div class="ms-card card-locked"><div class="ms-card-name">Cislunar Return</div><div class="ms-card-cond">ÏßÄÍµ¨-Îã¨ ÏôïÎ≥µ ÏÑ±Í≥µ</div><span class="ms-card-reward">RP +6000</span></div>
            </div>
          </div>

          <!-- Phase 5 Block -->
          <div class="ms-grid-phase-block">
            <div class="ms-grid-phase-header">
              <span class="ms-grid-phase-title locked">PHASE 5: Îã¨ ÌëúÎ©¥ ÏóêÎùº</span>
              <span class="ms-grid-phase-count">0 / 5 Ïû†Í∏à</span>
            </div>
            <div class="ms-grid-cards">
              <div class="ms-card card-locked"><div class="ms-card-name">Touchdown</div><div class="ms-card-cond">Îã¨ Ï∞©Î•ô ÏÑ±Í≥µ</div><span class="ms-card-reward">RP +10000</span></div>
              <div class="ms-card card-locked"><div class="ms-card-name">Surface Sample</div><div class="ms-card-cond">Îã¨ ÌëúÎ©¥ ÏÉòÌîå Ï±ÑÏ∑®</div><span class="ms-card-reward">RP +8000</span></div>
              <div class="ms-card card-locked"><div class="ms-card-name">ISRU Pioneer</div><div class="ms-card-cond">ÌòÑÏßÄ ÏûêÏõê ÌôúÏö© ÏÑ±Í≥µ</div><span class="ms-card-reward">RP +12000</span></div>
              <div class="ms-card card-locked"><div class="ms-card-name">Lunar Base Alpha</div><div class="ms-card-cond">Îã¨ Í∏∞ÏßÄ Í±¥ÏÑ§ ÏôÑÎ£å</div><span class="ms-card-reward">RP +20000</span></div>
              <div class="ms-card card-locked" style="border-color: #1a3a20;"><div class="ms-card-name" style="color: #2a5c35; letter-spacing: 2px;">Ïù∏Î•òÏùò ÎèÑÏïΩ</div><div class="ms-card-cond" style="color: #1a3a20;">Îã¨ Ï†ïÏ∞©ÏßÄ Ïö¥Ïö© Í∞úÏãú ‚Äî ÏµúÏ¢Ö</div><span class="ms-card-reward" style="border-color: #1a3a20; color: #2a5c35;">RP +50000</span></div>
            </div>
          </div>

        </div><!-- milestone-grid-scroll -->
      </div><!-- subscreen-milestones -->

      <!-- ======================================================
           SUB-SCREEN: ÏóÖÏ†Å
      ====================================================== -->
      <div class="sub-screen" id="subscreen-achievements">
        <div id="achievement-scroll">

          <!-- Earned -->
          <div class="ach-card earned" onclick="showAchModal('learn-from-failure')">
            <div class="ach-icon">üèÜ</div>
            <div class="ach-body">
              <div class="ach-name">"Ïã§Ìå®ÏóêÏÑú Î∞∞Ïö¥Îã§"</div>
              <div class="ach-desc">5Î≤à Ïã§Ìå® ÌõÑ Ï≤´ Ï§ÄÏÑ±Í≥µ ‚Äî Ìè¨Í∏∞ÌïòÏßÄ ÏïäÎäî ÏûêÏóêÍ≤å Ï£ºÏñ¥ÏßÄÎäî ÌõàÏû•</div>
              <div class="ach-date">Îã¨ÏÑ±: D+35</div>
            </div>
          </div>

          <div class="ach-card earned" onclick="showAchModal('stratosphere-conqueror')">
            <div class="ach-icon">üèÜ</div>
            <div class="ach-body">
              <div class="ach-name">"ÏÑ±Ï∏µÍ∂å Ï†ïÎ≥µÏûê"</div>
              <div class="ach-desc">Felix Line 39km Îã¨ÏÑ± ‚Äî ÏÑ±Ï∏µÍ∂å ÎÑàÎ®∏Î•º Î∞îÎùºÎ≥∏ Í∞úÏ≤ôÏûê</div>
              <div class="ach-date">Îã¨ÏÑ±: D+25</div>
            </div>
          </div>

          <div class="ach-card earned" onclick="showAchModal('data-collector')">
            <div class="ach-icon">üèÜ</div>
            <div class="ach-body">
              <div class="ach-name">"Îç∞Ïù¥ÌÑ∞ ÏàòÏßëÍ∞Ä"</div>
              <div class="ach-desc">Î∞úÏÇ¨ Îç∞Ïù¥ÌÑ∞ 10 units ÌöçÎìù ‚Äî Î™®Îì† Ïã§Ìå®Îäî Îç∞Ïù¥ÌÑ∞Îã§</div>
              <div class="ach-date">Îã¨ÏÑ±: D+40</div>
            </div>
          </div>

          <!-- Locked -->
          <div class="ach-card locked" onclick="showAchModal('karman-club')">
            <div class="ach-icon" style="font-size: 20px; opacity: 0.4;">‚òÜ</div>
            <div class="ach-body">
              <div class="ach-name">"Ïπ¥Î•¥Îßå ÌÅ¥ÎüΩ"</div>
              <div class="ach-desc">100km Îã¨ÏÑ± ‚Äî Í≥µÏãùÏ†ÅÏúºÎ°ú Ïö∞Ï£ºÏóê ÎèÑÎã¨ÌïòÎã§</div>
              <div class="ach-date">ÎØ∏Îã¨ÏÑ± ‚Äî ÏßÑÌñâ: 89.4 / 100km</div>
            </div>
          </div>

          <div class="ach-card locked">
            <div class="ach-icon" style="font-size: 20px; opacity: 0.4;">‚òÜ</div>
            <div class="ach-body">
              <div class="ach-name">"Í∂§ÎèÑ ÏóîÏßÄÎãàÏñ¥"</div>
              <div class="ach-desc">Ï≤´ LEO Í∂§ÎèÑ Îã¨ÏÑ±</div>
              <div class="ach-date">ÎØ∏Îã¨ÏÑ± ‚Äî Phase 3 ÌïÑÏöî</div>
            </div>
          </div>

          <div class="ach-card locked">
            <div class="ach-icon" style="font-size: 20px; opacity: 0.4;">‚òÜ</div>
            <div class="ach-body">
              <div class="ach-name">"Îã¨ Ïó¨ÌñâÏûê"</div>
              <div class="ach-desc">Îã¨ Í∂§ÎèÑ ÏßÑÏûÖ Îã¨ÏÑ±</div>
              <div class="ach-date">ÎØ∏Îã¨ÏÑ± ‚Äî Phase 4 ÌïÑÏöî</div>
            </div>
          </div>

          <div class="ach-card locked" style="border-color: #1a3a20; grid-column: 1 / -1;">
            <div class="ach-icon" style="font-size: 24px; opacity: 0.35;">‚òÜ</div>
            <div class="ach-body">
              <div class="ach-name" style="font-size: 14px; letter-spacing: 3px; color: #2a5c35;">"Ïù∏Î•òÏùò ÎèÑÏïΩ"</div>
              <div class="ach-desc" style="color: #1a3a20;">Îã¨ Ï∞©Î•ô ÏÑ±Í≥µ ‚Äî Í≤åÏûÑ ÏµúÏ¢Ö ÏóÖÏ†Å. Ïù∏Î•ò Ïó≠ÏÇ¨Ïùò ÌéòÏù¥ÏßÄÎ•º Î∞îÍæ∏Îã§.</div>
              <div class="ach-date" style="color: #1a3a20;">ÎØ∏Îã¨ÏÑ± ‚Äî Phase 5 Îã¨ÏÑ± ÌïÑÏöî</div>
            </div>
          </div>

        </div><!-- achievement-scroll -->
      </div><!-- subscreen-achievements -->

      <!-- ======================================================
           SUB-SCREEN: ÌîÑÎ†àÏä§Ìã∞ÏßÄ
      ====================================================== -->
      <div class="sub-screen" id="subscreen-prestige">
        <div id="prestige-content">

          <!-- Header Card -->
          <div class="prestige-header-card">
            <div>
              <div class="prestige-title">ÏÉà Î∞úÏÇ¨ ÏãúÏ¶å</div>
              <div class="prestige-subtitle">PRESTIGE SYSTEM ‚Äî ÏÉàÎ°úÏö¥ ÏãúÏ¶åÏúºÎ°ú Îçî Í∞ïÌï¥ÏßÄÎã§</div>
            </div>
            <div class="prestige-season-badge">SEASON 1</div>
          </div>

          <!-- Blocked Notice -->
          <div class="prestige-blocked-notice">
            <span class="notice-icon">‚ö†</span>
            <div>
              <div>ÌîÑÎ†àÏä§Ìã∞ÏßÄ Ïû†Í∏à ‚Äî Îã§Ïùå Ï°∞Í±¥ ÎØ∏Îã¨ÏÑ±</div>
              <div class="prestige-blocked-cond">‚ñ∂ Ïπ¥Î•¥ÎßåÏÑ† 100km Îã¨ÏÑ± ÌïÑÏöî (ÌòÑÏû¨ 89.4km)</div>
            </div>
          </div>

          <!-- Reset vs Keep -->
          <div class="prestige-two-col">
            <div class="prestige-list-card">
              <div class="prestige-list-header reset-header">
                ‚úó ÌîÑÎ†àÏä§Ìã∞ÏßÄ Ïãú Ï¥àÍ∏∞Ìôî
              </div>
              <ul class="prestige-list-body reset-list">
                <li>Î™®Îì† ÏûêÏõê (Í¥ëÎ¨º, Ï∂îÏßÑÏ†ú Îì±)</li>
                <li>ÏÉùÏÇ∞ ÏãúÏÑ§ (Í¥ëÏÇ∞, Ï†ïÏ†úÏÜå Îì±)</li>
                <li>Î°úÏºì Î∂ÄÌíà Ïû¨Í≥†</li>
                <li>ÌòÑÏû¨ ÏûêÍ∏à (‚Ç©2,847,000)</li>
                <li>Ï°∞Î¶Ω ÏßÑÌñâ ÏÉÅÌô©</li>
                <li>ÏûêÎèôÌôî Í¥ÄÎ¶¨Ïûê Ïä¨Î°Ø (Ïû¨Íµ¨Îß§ ÌïÑÏöî)</li>
              </ul>
            </div>
            <div class="prestige-list-card">
              <div class="prestige-list-header keep-header">
                ‚úì ÌîÑÎ†àÏä§Ìã∞ÏßÄ Ïãú Î≥¥Ï°¥
              </div>
              <ul class="prestige-list-body keep-list">
                <li>Í∏∞Ïà† Ìä∏Î¶¨ Ï†ÑÏ≤¥ (Ïó∞Íµ¨ ÏôÑÎ£å Ìï≠Î™©)</li>
                <li>Î∞úÏÇ¨ Îç∞Ïù¥ÌÑ∞ (ÌòÑÏû¨ ÏàòÏßëÎüâ Ïú†ÏßÄ)</li>
                <li>Î™ÖÏÑ± Ìè¨Ïù∏Ìä∏ (RP)</li>
                <li>ÎßàÏùºÏä§ÌÜ§ Îã¨ÏÑ± Í∏∞Î°ù</li>
                <li>ÏóÖÏ†Å Î≥¥Í¥ÄÌï®</li>
                <li>ÌîÑÎ†àÏä§Ìã∞ÏßÄ Î≥¥ÎÑàÏä§ Ìä∏Î¶¨ ÏÑ†ÌÉù</li>
              </ul>
            </div>
          </div>

          <!-- Star Tree -->
          <div class="star-tree-card">
            <div class="star-tree-header">
              ‚òÜ ÌîÑÎ†àÏä§Ìã∞ÏßÄ Î≥¥ÎÑàÏä§ Ìä∏Î¶¨ ‚Äî Season 1 (ÎØ∏ÏÑ†ÌÉù)
            </div>
            <div class="star-tree-body">
              <div class="star-slot">
                <span class="slot-icon">‚òÜ</span>
                <span class="slot-label">SLOT 1</span>
              </div>
              <div class="star-connector"></div>
              <div class="star-slot">
                <span class="slot-icon">‚òÜ</span>
                <span class="slot-label">SLOT 2</span>
              </div>
              <div class="star-connector"></div>
              <div class="star-slot">
                <span class="slot-icon">‚òÜ</span>
                <span class="slot-label">SLOT 3</span>
              </div>
              <div class="star-connector"></div>
              <div class="star-slot">
                <span class="slot-icon">‚òÜ</span>
                <span class="slot-label">SLOT 4</span>
              </div>
              <div class="star-connector"></div>
              <div class="star-slot">
                <span class="slot-icon">‚òÜ</span>
                <span class="slot-label">SLOT 5</span>
              </div>
            </div>
            <div style="padding: 0 16px 12px; font-size: 9px; color: #1a3a20; letter-spacing: 1.5px; text-align: center;">
              Ïπ¥Î•¥ÎßåÏÑ† Îã¨ÏÑ± ÌõÑ Ï≤´ ÌîÑÎ†àÏä§Ìã∞ÏßÄ Ïãú Î≥¥ÎÑàÏä§ ÏÑ†ÌÉù Í∞ÄÎä•
            </div>
          </div>

          <!-- Season History -->
          <div class="prestige-history-card">
            <div class="history-header">Î∞úÏÇ¨ ÏãúÏ¶å Í∏∞Î°ù</div>
            <div class="history-row">
              <span class="h-season">SEASON 1</span>
              <span class="h-start">ÏãúÏûë: D+00 (ÌòÑÏû¨ ÏßÑÌñâ Ï§ë)</span>
              <span class="h-status">ÏßÑÌñâ Ï§ë</span>
            </div>
          </div>

        </div><!-- prestige-content -->
      </div><!-- subscreen-prestige -->

    </div><!-- screen-mission -->

  </div><!-- content-area -->

</div><!-- main-wrapper -->

<!-- ============================================================
     MODAL
============================================================ -->
<div id="modal-overlay" onclick="closeModal(event)">
  <div id="modal-box">
    <div id="modal-header">
      <span id="modal-title">MILESTONE DETAIL</span>
      <button id="modal-close" onclick="closeModalBtn()">[ CLOSE ]</button>
    </div>
    <div id="modal-body"></div>
  </div>
</div>

<script>
  // ============================================================
  //   CLOCK
  // ============================================================
  function updateClock() {
    const now = new Date();
    const h = String(now.getHours()).padStart(2,'0');
    const m = String(now.getMinutes()).padStart(2,'0');
    const s = String(now.getSeconds()).padStart(2,'0');
    const el = document.getElementById('clock');
    // preserve cursor blink element
    el.childNodes[0].textContent = `${h}:${m}:${s} `;
  }
  setInterval(updateClock, 1000);
  updateClock();

  // ============================================================
  //   MAIN TAB SWITCHING
  // ============================================================
  function switchMainTab(tabId) {
    document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));

    event.currentTarget.classList.add('active');
    const screen = document.getElementById('screen-' + tabId);
    if (screen) {
      screen.classList.add('active');
      if (tabId === 'mission') screen.style.display = 'flex';
    }
  }

  // ============================================================
  //   SUB-TAB SWITCHING
  // ============================================================
  function switchSubTab(subId) {
    document.querySelectorAll('.sub-tab').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('.sub-screen').forEach(s => s.classList.remove('active'));

    event.currentTarget.classList.add('active');
    event.currentTarget.textContent = event.currentTarget.textContent.replace('‚óã','‚óè');
    document.querySelectorAll('.sub-tab').forEach(t => {
      if (!t.classList.contains('active')) {
        t.textContent = t.textContent.replace('‚óè','‚óã');
      }
    });

    const ss = document.getElementById('subscreen-' + subId);
    if (ss) ss.classList.add('active');
  }

  // ============================================================
  //   MILESTONE DATA
  // ============================================================
  const milestoneData = {
    'first-ignition': {
      name: 'First Ignition',
      phase: 'Phase 1: ÌîÑÎ°úÌÜ†ÌÉÄÏûÖ ÏóêÎùº',
      condition: 'Ï≤´ ÏóîÏßÑ Ï†êÌôî ÏÑ±Í≥µ',
      status: 'COMPLETE',
      date: 'D+07',
      reward: 'RP +50',
      desc: 'ÏµúÏ¥àÏùò ÏóîÏßÑ Ï†êÌôî. Î™®Îì† ÏúÑÎåÄÌïú Ïó¨Ï†ïÏùò Ï≤´ Î∂àÍΩÉ.'
    },
    '1km-club': {
      name: '1km Club',
      phase: 'Phase 1: ÌîÑÎ°úÌÜ†ÌÉÄÏûÖ ÏóêÎùº',
      condition: 'Í≥†ÎèÑ 1km ÎèåÌåå',
      status: 'COMPLETE',
      date: 'D+07',
      reward: 'RP +75',
      desc: 'ÏßÄÏÉÅ 1km. ÏûëÏßÄÎßå ÏùòÎØ∏ÏûàÎäî Ï≤´ Î≤àÏß∏ Í≥†ÎèÑ Í∏∞Î°ù.'
    },
    'boundary-pusher': {
      name: 'Boundary Pusher',
      phase: 'Phase 1: ÌîÑÎ°úÌÜ†ÌÉÄÏûÖ ÏóêÎùº',
      condition: 'Í≥†ÎèÑ 10km ÎèåÌåå',
      status: 'COMPLETE',
      date: 'D+14',
      reward: 'RP +100 + Ï≤†Í¥ëÏÑù ÏûêÎèôÌôî Ìï¥Í∏à',
      desc: 'ÎåÄÎ•òÍ∂åÍ≥º ÏÑ±Ï∏µÍ∂åÏùò Í≤ΩÍ≥Ñ. ÎØºÍ∞Ñ Ìï≠Í≥µÍ∏∞Ïùò ÏàúÌï≠ Í≥†ÎèÑÎ•º ÎèåÌååÌñàÎã§.'
    },
    'stratosphere': {
      name: 'Stratosphere',
      phase: 'Phase 1: ÌîÑÎ°úÌÜ†ÌÉÄÏûÖ ÏóêÎùº',
      condition: 'Í≥†ÎèÑ 20km ÎèåÌåå',
      status: 'COMPLETE',
      date: 'D+18',
      reward: 'RP +150',
      desc: 'ÏÑ±Ï∏µÍ∂å ÍπäÏàôÏù¥. Ïò§Ï°¥Ï∏µÏù¥ Ïó¨Í∏∞ ÏûàÎã§.'
    },
    'felix-line': {
      name: 'Felix Line',
      phase: 'Phase 1: ÌîÑÎ°úÌÜ†ÌÉÄÏûÖ ÏóêÎùº',
      condition: 'Í≥†ÎèÑ 39km ÎèåÌåå (Ìé†Î¶≠Ïä§ ÎùºÏù∏)',
      status: 'COMPLETE',
      date: 'D+25',
      reward: 'RP +200 + VAB Lv.2 Ìï¥Í∏à',
      desc: 'Felix BaumgartnerÍ∞Ä Ïä§Ïπ¥Ïù¥Îã§Ïù¥ÎπôÌïú Í≥†ÎèÑ. ÏßÄÍµ¨Ïùò Í≥°Î•†Ïù¥ Î≥¥Ïù¥Í∏∞ ÏãúÏûëÌïúÎã§.'
    },
    'mesosphere': {
      name: 'Mesosphere Entry',
      phase: 'Phase 2: Ï§ÄÍ∂§ÎèÑ ÏóêÎùº',
      condition: 'Í≥†ÎèÑ 50km ÎèåÌåå',
      status: 'COMPLETE',
      date: 'D+35',
      reward: 'RP +300',
      desc: 'Ï§ëÍ∞ÑÍ∂å ÏßÑÏûÖ. ÎåÄÍ∏∞Í∂åÏùò Ï§ëÍ∞Ñ ÏßÄÏ†êÏùÑ ÎèåÌååÌñàÎã§.'
    },
    'weather-eye': {
      name: 'Weather Eye',
      phase: 'Phase 2: Ï§ÄÍ∂§ÎèÑ ÏóêÎùº',
      condition: '200km Í∂§ÎèÑ Ï§ÄÏÑ±Í≥µ Ïù∏Ï†ï',
      status: 'COMPLETE',
      date: 'D+35',
      reward: 'RP +250',
      desc: 'Í∏∞ÏÉÅ ÏúÑÏÑ± Í≥†ÎèÑÍπåÏßÄ ÎèÑÎã¨ÌïòÎäî Í∂§Ï†Å Îã¨ÏÑ±. Ï§ÄÏÑ±Í≥µÏúºÎ°ú Ïù∏Ï†ï.'
    },
    'karman-line': {
      name: 'K√°rm√°n Line',
      phase: 'Phase 2: Ï§ÄÍ∂§ÎèÑ ÏóêÎùº',
      condition: 'Í≥†ÎèÑ Ï†ïÌôïÌûà 100km ÎèåÌåå',
      status: 'IN PROGRESS ‚Äî 89.4 / 100km',
      date: 'ÎØ∏Îã¨ÏÑ±',
      reward: 'RP +500',
      desc: 'Íµ≠Ï†ú Ìï≠Í≥µ Ïó∞ÎßπÏù¥ Ï†ïÏùòÌïú Ïö∞Ï£ºÏùò Í≥µÏãù Í≤ΩÍ≥ÑÏÑ†. Ïù¥ ÏÑ†ÏùÑ ÎÑòÏúºÎ©¥ Í≥µÏãùÏ†ÅÏúºÎ°ú Ïö∞Ï£º ÎπÑÌñâÏÇ¨.'
    },
    'tourist-alt': {
      name: 'Tourist Altitude',
      phase: 'Phase 2: Ï§ÄÍ∂§ÎèÑ ÏóêÎùº',
      condition: 'Í≥†ÎèÑ 120km Îã¨ÏÑ±',
      status: 'LOCKED ‚Äî Ïπ¥Î•¥ÎßåÏÑ† Îã¨ÏÑ± ÌõÑ Ìï¥Í∏à',
      date: 'ÎØ∏Îã¨ÏÑ±',
      reward: 'RP +400',
      desc: 'Blue OriginÏùò Ïö∞Ï£º Í¥ÄÍ¥ë Í≥†ÎèÑ. Ïπ¥Î•¥ÎßåÏÑ†ÏùÑ ÎÑòÏñ¥Ïïº ÎèÑÏ†Ñ Í∞ÄÎä•.'
    },
    'suborbital-return': {
      name: 'Suborbital Return',
      phase: 'Phase 2: Ï§ÄÍ∂§ÎèÑ ÏóêÎùº',
      condition: 'Ï§ÄÍ∂§ÎèÑ ÎπÑÌñâ ÌõÑ ÌöåÏàò ÏÑ±Í≥µ',
      status: 'LOCKED',
      date: 'ÎØ∏Îã¨ÏÑ±',
      reward: 'RP +600',
      desc: 'Î∞úÏÇ¨Ìïú Î°úÏºìÏùÑ Ïò®Ï†ÑÌûà ÌöåÏàòÌïòÎäî Í≤É. Ïû¨ÏÇ¨Ïö© Î°úÏºìÏùò Ï≤´ Í±∏Ïùå.'
    }
  };

  // ============================================================
  //   MILESTONE MODAL
  // ============================================================
  function showMilestoneModal(id) {
    const d = milestoneData[id];
    if (!d) return;

    const isComplete = d.status === 'COMPLETE';
    const isInProgress = d.status.startsWith('IN PROGRESS');

    document.getElementById('modal-title').textContent = '// MILESTONE: ' + d.name.toUpperCase();

    const statusColor = isComplete ? 'var(--green)' : isInProgress ? 'var(--amber)' : 'var(--locked-text)';

    document.getElementById('modal-body').innerHTML = `
      <div class="modal-field">
        <div class="modal-field-label">PHASE</div>
        <div class="modal-field-value">${d.phase}</div>
      </div>
      <hr class="modal-divider">
      <div class="modal-field">
        <div class="modal-field-label">Îã¨ÏÑ± Ï°∞Í±¥</div>
        <div class="modal-field-value">${d.condition}</div>
      </div>
      <div class="modal-field">
        <div class="modal-field-label">ÏÉÅÌÉú</div>
        <div class="modal-field-value" style="color: ${statusColor}; text-shadow: ${isComplete ? 'var(--glow)' : isInProgress ? 'var(--glow-amber)' : 'none'};">${d.status}</div>
      </div>
      ${isComplete ? `<div class="modal-field"><div class="modal-field-label">Îã¨ÏÑ±Ïùº</div><div class="modal-field-value amber">${d.date}</div></div>` : ''}
      <hr class="modal-divider">
      <div class="modal-field">
        <div class="modal-field-label">Î≥¥ÏÉÅ</div>
        <div class="modal-field-value amber">${d.reward}</div>
      </div>
      <hr class="modal-divider">
      <div class="modal-field">
        <div class="modal-field-label">ÏÑ§Î™Ö</div>
        <div class="modal-field-value" style="color: var(--green-mid); line-height: 1.7;">${d.desc}</div>
      </div>
    `;

    document.getElementById('modal-overlay').classList.add('open');
  }

  // ============================================================
  //   PHASE MODAL
  // ============================================================
  const phaseData = {
    1: {
      name: 'Phase 1: ÌîÑÎ°úÌÜ†ÌÉÄÏûÖ ÏóêÎùº',
      status: 'COMPLETE',
      period: 'D+07 ~ D+35',
      maxAlt: '39km (Felix Line)',
      bonuses: ['Íµ¨Ï°∞ Í∞ïÎèÑ +10%', 'Í∏∞Ï¥à Ïó∞Íµ¨ÏÜçÎèÑ +5%'],
      milestones: '5 / 5',
      notes: 'ÌîÑÎ°úÌÜ†ÌÉÄÏûÖ Î°úÏºìÏúºÎ°ú ÏÑ±Ï∏µÍ∂å ÎèåÌååÏóê ÏÑ±Í≥µÌïú ÏóêÎùº. Î™®Îì† Í∏∞Ï¥à Í∏∞Ïà†Ïùò ÌÜ†ÎåÄÍ∞Ä ÎßàÎ†®ÎêòÏóàÎã§.'
    },
    2: {
      name: 'Phase 2: Ï§ÄÍ∂§ÎèÑ ÏóêÎùº',
      status: 'IN PROGRESS (60%)',
      period: 'D+35 ~ ÏßÑÌñâ Ï§ë',
      maxAlt: '89.4km (Î™©Ìëú: 100km)',
      bonuses: ['ÎØ∏ÏôÑÎ£å ‚Äî Ïπ¥Î•¥ÎßåÏÑ† Îã¨ÏÑ± Ïãú Ìï¥Í∏à ÏòàÏ†ï'],
      milestones: '2 / 5',
      notes: 'Ïπ¥Î•¥ÎßåÏÑ† 100km ÎèåÌååÎ•º Î™©ÌëúÎ°ú ÌïòÎäî ÏóêÎùº. 89.4km Ï§ÄÏÑ±Í≥µÏùÑ Îã¨ÏÑ±ÌñàÏúºÎÇò ÏïÑÏßÅ Í≥µÏãù Ïö∞Ï£º Í≤ΩÍ≥ÑÎ•º ÎÑòÏßÄ Î™ªÌñàÎã§.'
    },
    3: {
      name: 'Phase 3: Í∂§ÎèÑ ÏóêÎùº',
      status: 'LOCKED',
      period: 'ÎØ∏ÏßÑÏûÖ',
      maxAlt: '‚Äî',
      bonuses: ['Ïû†Í∏à Ìï¥Ï†ú ÌõÑ ÌôïÏù∏ Í∞ÄÎä•'],
      milestones: '0 / 5',
      notes: 'ÏßÑÏûÖ Ï°∞Í±¥: Ïπ¥Î•¥ÎßåÏÑ† 100km + ÌÑ∞Î≥¥ÌéåÌîÑ ÏÇ¨Ïù¥ÌÅ¥ Ïó∞Íµ¨ + ‚Ç©50,000,000'
    },
    4: {
      name: 'Phase 4: ÏãúÏä§Î£®ÎÇò ÏóêÎùº',
      status: 'LOCKED',
      period: 'ÎØ∏ÏßÑÏûÖ',
      maxAlt: '‚Äî',
      bonuses: ['Ïû†Í∏à Ìï¥Ï†ú ÌõÑ ÌôïÏù∏ Í∞ÄÎä•'],
      milestones: '0 / 5',
      notes: 'ÏßÑÏûÖ Ï°∞Í±¥: Phase 3 ÏôÑÎ£å + Îã¨ Í∂§Ï†Å Í≥ÑÏÇ∞ Í∏∞Ïà† + Î™ÖÏÑ± 500'
    },
    5: {
      name: 'Phase 5: Îã¨ ÌëúÎ©¥ ÏóêÎùº',
      status: 'LOCKED',
      period: 'ÎØ∏ÏßÑÏûÖ',
      maxAlt: '‚Äî',
      bonuses: ['Ïû†Í∏à Ìï¥Ï†ú ÌõÑ ÌôïÏù∏ Í∞ÄÎä•'],
      milestones: '0 / 5',
      notes: 'ÏßÑÏûÖ Ï°∞Í±¥: Phase 4 ÏôÑÎ£å + ISRU Í∏∞Ï¥à Í∏∞Ïà†. Í≤åÏûÑÏùò ÏµúÏ¢Ö Î™©Ìëú.'
    }
  };

  function showPhaseModal(id) {
    const d = phaseData[id];
    if (!d) return;

    const isComplete = d.status === 'COMPLETE';
    const isInProgress = d.status.startsWith('IN PROGRESS');
    const statusColor = isComplete ? 'var(--green)' : isInProgress ? 'var(--amber)' : 'var(--locked-text)';

    document.getElementById('modal-title').textContent = '// ' + d.name.toUpperCase();
    document.getElementById('modal-body').innerHTML = `
      <div class="modal-field">
        <div class="modal-field-label">ÏÉÅÌÉú</div>
        <div class="modal-field-value" style="color: ${statusColor}">${d.status}</div>
      </div>
      <div class="modal-field">
        <div class="modal-field-label">Í∏∞Í∞Ñ</div>
        <div class="modal-field-value">${d.period}</div>
      </div>
      <div class="modal-field">
        <div class="modal-field-label">ÏµúÍ≥† Í≥†ÎèÑ</div>
        <div class="modal-field-value amber">${d.maxAlt}</div>
      </div>
      <hr class="modal-divider">
      <div class="modal-field">
        <div class="modal-field-label">ÎßàÏùºÏä§ÌÜ§</div>
        <div class="modal-field-value">${d.milestones}</div>
      </div>
      <div class="modal-field">
        <div class="modal-field-label">ÏóêÎùº Î≥¥ÎÑàÏä§</div>
        <div class="modal-field-value" style="color: var(--green-mid);">${d.bonuses.join('<br>')}</div>
      </div>
      <hr class="modal-divider">
      <div class="modal-field">
        <div class="modal-field-label">ÏÑ§Î™Ö</div>
        <div class="modal-field-value" style="color: var(--green-mid); line-height: 1.7;">${d.notes}</div>
      </div>
    `;
    document.getElementById('modal-overlay').classList.add('open');
  }

  // ============================================================
  //   ACHIEVEMENT MODAL
  // ============================================================
  function showAchModal(id) {
    // Simple acknowledgement modal
    document.getElementById('modal-title').textContent = '// ACHIEVEMENT DETAIL';
    document.getElementById('modal-body').innerHTML = `
      <div class="modal-field">
        <div class="modal-field-label">ÏÉÅÌÉú</div>
        <div class="modal-field-value" style="color: var(--amber); text-shadow: var(--glow-amber);">ACHIEVEMENT DATA LOADED</div>
      </div>
    `;
    document.getElementById('modal-overlay').classList.add('open');
  }

  // ============================================================
  //   MODAL CLOSE
  // ============================================================
  function closeModal(e) {
    if (e.target === document.getElementById('modal-overlay')) {
      document.getElementById('modal-overlay').classList.remove('open');
    }
  }

  function closeModalBtn() {
    document.getElementById('modal-overlay').classList.remove('open');
  }

  // ============================================================
  //   PHASE TIMELINE TOOLTIP (hover)
  // ============================================================
  document.querySelectorAll('.phase-node').forEach(node => {
    node.addEventListener('mouseenter', () => {
      node.querySelector('.phase-dot').style.transform = 'scale(1.12)';
    });
    node.addEventListener('mouseleave', () => {
      node.querySelector('.phase-dot').style.transform = '';
    });
  });

  // ============================================================
  //   PROGRESS BAR ANIMATION ON LOAD
  // ============================================================
  window.addEventListener('load', () => {
    setTimeout(() => {
      document.querySelectorAll('.progress-fill').forEach(bar => {
        const target = bar.style.width;
        bar.style.width = '0%';
        setTimeout(() => { bar.style.width = target; }, 100);
      });
    }, 300);
  });

  // ============================================================
  //   ASCII TIMELINE STRIP RENDERER
  // ============================================================
  function renderAsciiTimeline() {
    const pre = document.getElementById('ascii-timeline-pre');
    if (!pre) return;

    // Build spans with class-based color using spans inside pre
    // We write raw HTML into the pre element via innerHTML
    const done  = (s) => `<span class="tl-done">${s}</span>`;
    const act   = (s) => `<span class="tl-active">${s}</span>`;
    const lock  = (s) => `<span class="tl-lock">${s}</span>`;

    pre.innerHTML =
      '  MISSION TIMELINE\n\n' +
      '  ' + done('[P1:DONE]') + '‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ' + act('[P2: 60%]') + '‚îÄ ‚îÄ ‚îÄ ‚îÄ' + lock('[P3:LOCK]') + '‚îÄ ‚îÄ ‚îÄ ‚îÄ' + lock('[P4:LOCK]') + '‚îÄ ‚îÄ ‚îÄ ‚îÄ' + lock('[P5:LOCK]') + '\n' +
      '     ' + done('‚úì') + '              ' + act('‚ñ∂') + '                  ' + lock('‚ñë') + '                ' + lock('‚ñë') + '                ' + lock('‚ñë') + '\n' +
      '  ' + done('ÌîÑÎ°úÌÜ†ÌÉÄÏûÖ') + '      ' + act('ÏÑúÎ∏åÏò§ÎπÑÌÉà') + '          ' + lock('Í∂§ÎèÑ') + '            ' + lock('ÏãúÏä§Î£®ÎÇò') + '          ' + lock('Îã¨ ÌëúÎ©¥') + '\n\n' +
      '  ÌòÑÏû¨: ' + act('‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë') + '  Phase 2  ' + act('60%');
  }

  // ============================================================
  //   ASCII PHASE SCENE VISIBILITY
  //   Shows only the scene matching the given phase number
  // ============================================================
  function showAsciiScene(phaseNum) {
    for (let i = 1; i <= 5; i++) {
      const el = document.getElementById('ascii-scene-' + i);
      if (el) el.style.display = (i === phaseNum) ? 'block' : 'none';
    }
  }

  // Wire up phase-node clicks in timeline to also reveal the matching scene
  // The onclick="showPhaseModal(N)" calls already open the modal;
  // we additionally call showAsciiScene via event delegation on .phase-node clicks.
  document.querySelectorAll('.phase-node').forEach((node, idx) => {
    node.addEventListener('click', () => {
      showAsciiScene(idx + 1);
    });
  });

  // ============================================================
  //   ASCII SCENE COLLAPSIBLE TOGGLE
  // ============================================================
  function toggleAsciiScene(phaseNum) {
    const body   = document.getElementById('ascii-body-' + phaseNum);
    const toggle = document.getElementById('ascii-toggle-' + phaseNum);
    if (!body || !toggle) return;
    if (body.classList.contains('collapsed')) {
      body.classList.remove('collapsed');
      toggle.textContent = '[‚àí]';
    } else {
      body.classList.add('collapsed');
      toggle.textContent = '[+]';
    }
  }

  // ============================================================
  //   ANIMATED MOON DOT (phase 4 scene)
  // ============================================================
  const moonFrames = ['‚óã', '‚óê', '‚óè', '‚óë'];
  let moonIdx = 0;
  function animateMoonDot() {
    const dot = document.getElementById('moon-dot');
    if (dot) {
      moonIdx = (moonIdx + 1) % moonFrames.length;
      dot.textContent = moonFrames[moonIdx];
    }
  }
  setInterval(animateMoonDot, 700);

  // ============================================================
  //   INIT: render timeline + show default scene (Phase 2 active)
  // ============================================================
  window.addEventListener('DOMContentLoaded', () => {
    renderAsciiTimeline();
    showAsciiScene(2); // default: show active phase scene
  });
  // Fallback if DOMContentLoaded already fired (script at end of body)
  if (document.readyState !== 'loading') {
    renderAsciiTimeline();
    showAsciiScene(2);
  }
</script>
</body>
</html>
